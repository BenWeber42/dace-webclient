{"version":3,"sources":["webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/get.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/superPropBase.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack://diode-webclient/./node_modules/@babel/runtime/regenerator/index.js","webpack://diode-webclient/./renderer_dir/datahelper.js","webpack://diode-webclient/./renderer_dir/renderer_util.js","webpack://diode-webclient/./renderer_dir/windowing.js","webpack://diode-webclient/./src/diode-ui/diode.js","webpack://diode-webclient/./src/diode-ui/diode_appearance.js","webpack://diode-webclient/./src/diode-ui/diode_project.js","webpack://diode-webclient/./src/diode-ui/diode_settings.js","webpack://diode-webclient/./src/diode-ui/table.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://diode-webclient/./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://diode-webclient/./src/diode-ui/treeview.js","webpack://diode-webclient/./src/diode-ui/contexts/context.js","webpack://diode-webclient/./src/diode-ui/contexts/settings.js","webpack://diode-webclient/./src/diode-ui/contexts/diode_settings.js","webpack://diode-webclient/./src/diode-ui/contexts/code_in.js","webpack://diode-webclient/./src/diode-ui/contexts/terminal.js","webpack://diode-webclient/./src/diode-ui/contexts/code_out.js","webpack://diode-webclient/./src/utils/context_menu.js","webpack://diode-webclient/./src/diode-ui/contexts/sdfg.js","webpack://diode-webclient/./src/utils/sdfg/find_exit_for_entry.js","webpack://diode-webclient/./src/diode-ui/contexts/prop_window.js","webpack://diode-webclient/./src/diode-ui/contexts/runqueue.js","webpack://diode-webclient/./src/diode-ui/contexts/start_page.js","webpack://diode-webclient/./src/diode-ui/contexts/transformation_history.js","webpack://diode-webclient/./src/diode-ui/contexts/available_transformations.js","webpack://diode-webclient/./src/diode-ui/contexts/error.js","webpack://diode-webclient/./src/diode-ui/contexts/run_config.js","webpack://diode-webclient/./src/diode-ui/contexts/perf_times.js","webpack://diode-webclient/./src/diode-ui/contexts/instrumentation_control.js","webpack://diode-webclient/./renderer_dir/Roofline/main.js","webpack://diode-webclient/./src/diode-ui/contexts/roofline.js","webpack://diode-webclient/./src/main.js","webpack://diode-webclient/./src/utils/sdfg/json_serializer.ts","webpack://diode-webclient/./src/utils/sdfg/sdfg_parser.js","webpack://diode-webclient/./node_modules/regenerator-runtime/runtime.js","webpack://diode-webclient/webpack/bootstrap","webpack://diode-webclient/webpack/runtime/load script","webpack://diode-webclient/webpack/runtime/compat get default export","webpack://diode-webclient/webpack/runtime/define property getters","webpack://diode-webclient/webpack/runtime/ensure chunk","webpack://diode-webclient/webpack/runtime/get javascript chunk filename","webpack://diode-webclient/webpack/runtime/global","webpack://diode-webclient/webpack/runtime/hasOwnProperty shorthand","webpack://diode-webclient/webpack/runtime/make namespace object","webpack://diode-webclient/webpack/runtime/publicPath","webpack://diode-webclient/webpack/runtime/jsonp chunk loading","webpack://diode-webclient/webpack/startup"],"names":["_arrayLikeToArray","arr","len","length","i","arr2","Array","_arrayWithoutHoles","isArray","_assertThisInitialized","self","ReferenceError","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","this","args","arguments","apply","err","undefined","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","protoProps","staticProps","prototype","_defineProperty","obj","_get","property","receiver","Reflect","get","base","desc","getOwnPropertyDescriptor","call","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","constructor","_iterableToArray","iter","Symbol","iterator","from","_nonIterableSpread","_possibleConstructorReturn","_setPrototypeOf","p","_superPropBase","object","hasOwnProperty","_toConsumableArray","_typeof","_unsupportedIterableToArray","minLen","n","toString","slice","name","test","module","exports","MathHelper","array","Math","sqrt","input","ObjectHelper","assert","tmp","toUpperCase","dict","x","a","keys","k","v","push","max_func_obj","X","Y","cov","stdev","xmean","mean","ymean","sum","zip","map","y","j","reduce","b","pow","sorted","Number","sort","index","ret","floor","array_of_arrays","outersize","innersize","filter","indexOf","in_array","chunksize","aggregate","isNaN","number","valarr","valstr","parseInt","toFixed","round","mode","unit","digits","exp","base1024table","0","1","2","3","4","5","toUnicodeSuperscript","thresh","numerator","denominator","abs","gcd","temp","gcd_val","super_n","sub_d","toUnicodeSubscript","func","String","modifyingMapRecursive","listKeys","valueFromPromiseFull","obj_array","valueFromPromise","arr1","onconflicts","console","log","o1","o2","specials","every","includes","o1ref","mergeRecursive","specfunc","concat","title","JSON","stringify","values","expr","trace","window","alert","Error","seen","WeakSet","has","add","render_button_to_graphic","button","button_class","c","document","createElement","ctx","getContext","width","button_subwindow","targetwidth","height","targetheight","new_obj","eval","button_subwindow_state","is_locked_open","setFullyOpen","Bracket","setupEventListeners","addButton","drawEx","Pos","imgdat","toDataURL","createImageDownload","brackets","prefix","colsize","rowsize","ypos","maxxpos","entries","buttons","save","fillStyle","fillRect","restore","bracket_entry","bracket","textBaseline","textAlign","font","unified_id","stateid","nodeid","fillText","xpos","src_canvas","drawImage","max","d","setAttribute","style","display","body","appendChild","click","removeChild","max_func","max_val","m","objfunc","max_obj","min_func","min_val","other","num","topleft","bottomright","Clickable","children","onEnterHover","onLeaveHover","onClick","onDoubleClick","onMouseMove","clickable_state","enable_func","clickable","unshift","mousepos","mb","is_inside","onUpdateDoubleClick","onUpdateClick","onUpdateMove","pos","SubWindow","_sizetrans","subwindow_trans_change","subwindow_popped_out","layout","background_color","state","ctx_override","beginPath","strokeStyle","lineWidth","oldfill","rect","fill","stroke","draw","offsetpos","minus","Button","update","color","addChild","size","button_image","setOnDoubleClick","newwin","DiodeWindow","setSenderData","className","dataParams","dataparams","open","data_url","side_len","Image","src","onload","now","Date","cfseg","PI","mid","fac","getMilliseconds","xval","cos","yval","sin","grad","createLinearGradient","addColorStop","Layout","subwindow","parent","_layout","databinding","_this","_layout_clickable","val","realsize","realtopleft","plus","times","_tmp_hovered","_mouse_pos","setOnClick","dv","getCurrentDataView","information_button_pos","information_button_size","showOptimizationHints","left","right","top","bottom","is_multiview","multiview_selector","dataviews","setOnMouseMove","mouseInside","openSettingsWindow","dataview","addVIPChild","enter","leave","setOnEnterHover","setOnLeaveHover","rect_name","dataview_array","RU_DataViewBarGraph","dvbg_clickable","setEnableFunc","db","setRect","DataBlock","data","type","setData","datatype","RU_DataView","analyze","color_scaling_func","update_data","information_html_string","information_overlay_age","information_overlay_alpha","information_overlay_timer","optimization_hint_path","path","win","dist","clearTimeout","setTimeout","scale","alpha","subalpha","information_sign","base_fontsize","textwidth","measureText","textheight","center_x","description","setSettingsDict","Function","setDataAnalysisFunction","str","sw","setCallback","reply","source","origin","getSettingsDict","datablock","RU_DataViewText","fontsize","align","text","optstruct","typevar","xAxisVar","yAxisVar","dvbg_chart_data","xAxes","yAxes","dvbg_canvas_scaler","dvbg_canvas","dvbg_ctx","chartsettings","options","responsive","tooltips","intersect","scales","dvbg_chart","Chart","visibility","position","parent_this","getBoundingClientRect","event","MouseEvent","offsetX","offsetY","clientX","clientY","dispatchEvent","basedict","display_xAxes","some","display_yAxes","display_legend","legend","general_graph_options","dha","dva","dl","forEach","prev_scale","datacpy","parse","dvbg_cached_data","resize","RU_DataViewNumberBlock","opt","display_title","text_align","draw_bar","padding","dvnb_cached_data","stringformatter","percent2color","left_pad","moveTo","lineTo","drawOverlay","percent","padStart","RU_DataViewSuggestedActionBlock","dvsa_clickable","tl_x","tl_y","size_x","size_y","local_pos","heightpadding","eachheight","dvsa_button_hovered","getButtonIndex","buttonHovered","hints","dvsab_cached_data","cond","display_text","ellipse","RU_DataViewFormLayout","datablock_in","form_entries","rows","realfontsize","text_height","line","start","end","offset","startoffset","listeners","button_alpha","bracket_alpha","opacity","canvas_draw_mgr","mouseXtrans","canvas","mouseYtrans","get_zoom","mapPixelToCoordsX","mapPixelToCoordsY","mm_lis","e","c_lis","dc_lis","lis","addEventListener","removeEventListener","animate","updatefunc","max_x","max_y","inRect","is_inside_buttons","is_inside_bracket","bracket_clicked","clearRect","oldalpha","globalAlpha","drawButtons","requestAnimationFrame","startpos","yoffset","tlsel","tl_higher","_canvas_manager_counter","CanvasDrawManager","ref_global_state","anim_id","drawables","indices","request_scale","scale_factor","last_scale_factor","_destroying","scale_origin","contention","_svg","createElementNS","user_transform","createSVGMatrix","addCtxTransformTracking","pt","createSVGPoint","ut","setTransform","f","svg","_custom_transform_matrix","checker","_ctx","scale_func","sx","sy","scaleNonUniform","translate_func","translate","rotate_func","rotate","r","transform_func","transform","m2","multiply","setTransform_func","custom_inverseTransformMultiply","matrixTransform","inverse","clearDrawables","counter","drawable","destroy","diff","sv","svgPoint","noJitter","parseFloat","applyUserTransform","drawSDFG","message_userdef","_msg_func","message","url","features","replace","msg_obj","postMessage","passMessage","window_data","getSendableObject","serialize","def","serialize_dataview","serialize_array","serialize_default","serialize_function","_data","answer","close","$","globalThis","DIODE","_settings","DIODE_Settings","_debouncing","_background_projects","_current_project","_stale_data_button","_shortcut_functions","_creation_counter","_client_id","localStorage","getItem","getPseudorandom","setItem","_appearance","Appearance","setOnChange","toStorable","goldenlayout","eventHub","on","project","eventString","__impl_showStaleDataButton","__impl_removeStaleDataButton","__impl_showIndeterminateLoading","__impl_hideIndeterminateLoading","ev","hint","pubSSH","config","existing","getRunConfigs","localeCompare","sessionStorage","getCurrentRunConfigName","getCurrentRunConfig","new_settings","keyfile_string","post_params","client_id","getClientID","REST_request","xhr","readyState","status","startsWith","cached","response","t","pubkey","create_overlay","_h","elem","fulldata","w2overlay","getAttribute","stopPropagation","preventDefault","composed","composedPath","purpose","w2popup","showMax","file_handler","newFile","setup_drag_n_drop","mime","readMode","fuploader","file","files","reader","FileReader","result","readAsText","getEnum","root","getItemsByFilter","comp","clearClosedWindowsList","componentName","cw","_closed_windows","setClosedWindowsList","contentItems","content","addContentItem","isSubWindow","emit","ci","copy","remove","closeAll","createNewProject","millis","split","componentState","created","code_content","gatherProjectElementsAndCompile","sdfg_over_code","transthis","node","params","realparams","params_keys","_lst","mx","category","element","target_name","propertyChanged","request","timeout","refreshSDFG","applyTransformation","apply_params","locateTransformation","opt_name","opt_pos","affects","sdfg_name","dt","DiodeTables","cur_dt","dtc","categories","cat","debugDevMode","z","cat_name","sp","innerText","tr","addRow","childNodes","colSpan","propx","title_part","value_part","diode","getMatchingInput","cr","addContentRow","setCSSClass","classList","locate_button","createIn","_x","disabled","_y","warn","create_visual_access_representation","elems","__access_indices","__ranges","__user_input","__additional_defines","_r","prompt","__mem_dims","attributes","shape","__eval_func","__defs","join","__tbl_container","__tbl_hor","__axis_x_info","__i","__tmp","__e","__axis_y_info","__tbl_vert","__size","__fixed_rngs","depth","reverse","__var_rng","__rng_inputs","__create_func","__main","main","input_cont","__global_slider","min","step","__total_rng_count","__locked_range","__r","_lbl","_in","_click","__spos","__base","__s","__v","__e_size","__x","__ev","__subval","_ev","innerHTML","__all_fixed","assign","rname","__defstring","__ellision_thresh_y","__ellision_thresh_x","__mark_cells","feval","__it","__r_s","__r_e","__r_step","__a_i","__y","__dim_2","__row","__cell","__set_marking","__colorstr","create_visual_range_representation","__starts","__ends","__steps","__tiles","__mayfail","__data","__obj_to_arr","__symbols","__e_starts","__e_ends","__e_steps","__e_tiles","__e_sizes","__r_it","__start","__end","__step","__tile","__e_start","__e_end","__e_step","__e_tile","__failed","__symbol_setter","Min","int_ceil","ceil","__shapedims","__sym_name","__ret","create_language_input","onchange","language_types","qualified","FormBuilder","__resolve_initials","__initials","__syms","__merger","acpy","__needed_defs","__placeholder_defines","__user_input_needed","__retry","__placeholder_def_str","__test","__j","__f","var","tile","create_index_subset_input","cont","preview","resp","syms","tsyms","SDFG_Parser","state_id","node_id","initials","newelems","data_objs","_arrays","popup_div","popup_div_body","value_input","apply_but","create_range_input","data_obj","ranges","range","range_elems","r_row","input_refs","lbl","ti","textContent","visbut","sdfg_obj","sdfg_object","vis_elem","re","onclick","metatype","checked","cb","arrays","sdfg","array_names","new_elem","parentNode","replaceChild","on_timeout","getJSON","classpath","available_implementations","sdfg_list_id","parent_id","id","parse_sdfg","handleErrors","new_sdfg","item_name","label","codeelem","langelem","language","string_data","schedule_types","types","access_types","info_obj","msg","storage_types","getHostList","dobj","replaceOrCreate","recompileOnPropertyChange","stale_data_button","show","hide","generic_group","comps","names","setActiveContentItem","code_ins","filterComponentTreeByCname","opttrees","opthists","sdfg_renderers","code_outs","property_renderers","code_in_stack","createContentItem","opttree_stack","sdfg_stack","code_out_stack","property_stack","top_row","bottom_row","top_bottom","predicate","sdfg_components","new_container","contents","alt","ctrl","altKey","expect","onKeyUp","cs","ctrlKey","DIODE_Project","clearTransformationHistory","clear","_project_id","setupEvents","proj_id","getCurrentProject","gl","getTime","random","sdfgs","sdfgs_obj","compounds","SDFG_available","create_sdfg_func","new_sdfg_config","sdfg_data","create_codeout_func","new_codeout_config","code","generated_code","new_error_config","optgraph","create_optgraph_func","new_optgraph_config","for_sdfg","optgraph_data","create_history_func","OptGraph_available","calling_context","direct_passing","on_success","on_failure","sdfg_props","optpath","reqlist","on_collected","collect_cb","dry_run","cis","cval","sd","run","runopts","compile_and_run","term_id","_","OptGraphs_available","compile","optpath_cb","code_is_sdfg","sdfg_node_properties","stringify_sdfg","runnercode","version_string","peek","removeStaleDataButton","multiple_SDFGs_available","errors","traceback","Error_available","terminal_identifier","terminal_config","showIndeterminateLoading","pd","ondone","hideIndeterminateLoading","applyCurrentRunConfig","remaining_settings","not","display_current_execution_status","perf_mode","endsWith","toast","newdata","substr","seenBytes","responseText","icon","callback","VanillaToasts","from_code","code_data","sdfgprop_data","on_data_available","replace_request","window_name","replace_params","recreate_func","open_windows","tid","timeout_id","group","list","btoa","crypto","subtle","digest","Uint8Array","filterfunc","filterComponentTree","theme","editorTheme","getScript","boolean_value","_change_callback","_config","insertStylesheet","_constructor_values","vals","getCSS","stylestring","stylesheet","getElementById","head","setChanged","css_type","css_value","shortname","inner","theme_name","s","getClassProperties","bgc","bg","setValue","cssclassname","getComputedStyle","project_id","_diode","setup","_callback","_rcvbuf","_waiter","_listeners","_blob","removeItem","sdata","getTransformationSnapshots","changing_transformation","getConfigForClosedWindow","getClosedWindowsList","new_list","rets","cname","suffix","hub","unbind","blob","Blob","URL","revokeObjectURL","createObjectURL","filename","link","href","createblob","__impl_request","reqid","startListening","interval_step","setInterval","missing","clearInterval","stopListening","project_name","pdata","getProjectData","snapshots","location","reload","denormalized","settings_values","changed","setting","TableCategory","table","parent_row","_table","_title_row","_cat_rows","row","Table","init","_thead","_tbody","_is_collapsed","columns","_columns","th","td","expandVertically","collapseVertically","classname","_slicedToArray","_arr","_n","_d","_e","_s","_i","next","unsupportedIterableToArray","ValueTreeNode","_label","_prev","_children","_on_activate","_representative","l","_path_label","pred","getChild","it","asPreOrderArray","pathLabel","map_func","current","new_node","LabelConflictSameLevel","LabelConflictGlobal","allLabelsInTree","handler","level","TreeView","value_tree_node","_tree","listitem","listitemspan","append","nextparent","onclickfunc","toggle","activate","ondblclickfunc","passed_click_func","passed_dblclick_func","debounce","setRepresentative","create_html_in","DIODE_Context","gl_container","container","initial_state","saveToState","_project","_event_listeners","_event_listeners_closed","_no_user_destroy","keep_alive_when_closed","eh","closed_on","addToClosedWindowsList","getState","extendState","removeClosedWindowEvents","dict_value","setState","DIODE_Context_Settings","settings","change","set_settings","toToggle","toggleclassname","hasClass","removeClass","addClass","is_topmost","dicts","meta","settings_lookup","settings_change_callback","setHandler","repr","representative","setting_path","newparent","addNode","parse_settings2","hasChanged","changed_values","changedValues","clearChanged","debounced","DIODE_Context_DIODESettings","_settings_container","_editor_themes","getThemes","createContainer","createLabel","theme_names","themeNames","createSelectInput","setFromAceEditorTheme","createToggleSwitch","setFont","DIODE_Context_CodeIn","editor","_terminal_identifer","_markers","clearSelection","highlight_error","highlight_code","clearErrors","dbg_info","s_c","start_col","e_c","end_col","markerrange","ace","Range","start_line","end_line","uc","marker","session","addMarker","scrollToLine","gotoLine","getSession","removeMarker","lineno","getLine","substring","getElement","DIODE_Context_Terminal","output","insert","getLength","column","curr_str","getValue","matchAll","perflist","median_val","time","DIODE_Context_CodeOut","extracted","setCode","codestr","cleanCode","ContextMenu","html_content","_html_content","_click_close_handlers","_options","_cmenu_elem","offsetWidth","onselect","onhover","checkbox","cmenu_div","css","markelem","DIODE_Context_SDFG","_message_handler","renderer_pane","_analysis_values","renamed_dict","json_list","_state","_transformed_state","create_renderer_pane","message_handler_filter","discardInvalidated","getChangedSDFGPropertiesFromState","named","symbolPropertyChanged","removeDataSymbol","addDataSymbol","forProgram","AnalysisName","forUnifiedID","forSuperSection","forSection","drawAllPerfInfo","getSDFGDataFromState","aname","found","old","resetState","typestr","dtype","nodeinfo","max_num","highlighted_elements","highlighted","draw_async","elements","sdfg_id","sid","nid","graph","sdfg_list","comp_name","has_component","force_open","sdfg_dat","render_free_variables","node_a","aprefix","node_b","bprefix","en_attrs","SDFG_PropUtil","ex_attrs","new_attrs","na","indirected","mcpy","xa","ecpy","renderPropertiesInWindow","getEdgeReference","getNodeReference","edges","dst","nodes","set_sdfg","sdfv","SDFGRenderer","et","el","sle","ed","on_renderer_mouse_event","evtype","canvas_coords","renderer","selected_elements","ends_drag","clicked_states","states","clicked_nodes","clicked_edges","clicked_interstate_edges","isedges","clicked_connectors","connectors","total_elements","foreground_elem","contextmenu","stroke_color","cmenu","addOption","spos","sdfg_elem","State","SDFGNode","scope_entry","is_collapsed","relayout","submenu","id_name","Edge","render_props","element_list","properties","attr","renderProperties","exit_node","entry_node","find_exit_for_entry","rnode","entry_id","DIODE_Context_PropWindow","_html_container","setTitle","getHTMLContainer","renderDataSymbols","caller_id","symbol","reduced_node","backaction","data_name","data_type","free_symbol_table","setHeaders","all_symbols","symbols","edit_but","renderDataSymbolProperties","del_but","but_container","input_name","placeholder","add_scalar","add_array","libnode_container","expand_all","DIODE_Context_Runqueue","_autorefresher","base_element","header","header_row","h","tbody","optparse","current_value","perfopts","core_counts","DataTable","getCurrentQueue","refreshUI","DIODE_Context_StartPage","startpage_container","startpage_recent","file_title","createStartpageListElement","openUploader","recent_title","startpage_resources","resource_title","last_saved","dace_logo","image","diode_image","cols","img","col2","proj_name","proj_detail","fontSize","justifyContent","col3","proj_date","proj_unused","DIODE_Context_TransformationHistory","hist","getTransformationHistory","parent_element","history_base_div","history_scoll_div","_history_scroll_div","addElementToHistory","simple_node","hsd","revert","hover","tsh","discardTransformationsAfter","DIODE_Context_AvailableTransformations","_tree_view","_current_root","operation_running","sel","sname","matching_opts","getTransformations","highlightTransformation","transforms","Event","appendHistoryItem","affecting","selstring","previousElementSibling","propertyChanged2","opt_params","idstring_list","og","full","arrayed","container_node","c_title","c_title_span","_transformation_list","sendHighlightRequest","_repr","sendClearHighlightRequest","_title","cpy","saveSnapshot","parent_override","at_list","list_elem","adv_button","newstate","at_div","addNodes","DIODE_Context_Error","setError","error_string","DIODE_Context_RunConfig","runopts_container","runopts_general_container","find","remoteparams","instrumentationparams","apply_button","addToRunConfigs","DIODE_Context_PerfTimes","_chart","addTime","oldstate","runtimes","labels","datasets","backgroundColor","ticks","beginAtZero","autoSkip","runtime","DIODE_Context_InstrumentationControl","started","_update_timeout","load_perfdata","download_but","base_url","download","download_can_but","delete_but","delete_can_but","render_but","roofline_but","show_roofline","celem","roofline_socket","fillLine","margin","yoptions","gflops","setLineDash","axis_len_y","pix_step","steps","logval","inv_step_value_func","options_max_val","step_value_func","value_per_step","getYPixel","pix_step_y","getXPixel","xoptions","pix_step_x","fillBandwidthBound","bytes_per_cycle","maxyval","maxxval","logvaly_start","y_start","logvaly","logvalx","angle","atan2","dotdata","flopbounds","bandwidthbounds","draw_full","painter","drawAxes","drawComputeBounds","drawBandwidthBounds","connectDots","drawDots","drawDot","flop_per_cyc","flop_per_byte","off","setDot","floppercyc","flopperbyte","highlight","drawInfoBox","sidelen","triangle_size","boxleft","boxright","boxbottom","boxtop","closePath","RooflinePainter","xopts","yopts","cur_val","marker_height","drawMarkersX","drawMarkersY","highlights","dot_x","dot","DIODE_Context_Roofline","_proc_func","redraw_func","message_source","log2","pow2","send","data_proc","pid","flop_per_c","socksetup","WebSocket","onopen","onmessage","onclose","onerror","Roofline","proc_func","on_resize","ResizeObserver","observe","host","callbackSingle","callbackMultiple","condition","drag_enter","drag_over","drag_drop","dataTransfer","readAsArrayBuffer","command","payload","method","XMLHttpRequest","setRequestHeader","onreadystatechange","initEnums","w2toolbar","items","caption","item","selected","open_diode_settings","open_runqueue","show_inst_options","show_exec_times","groupOptGraph","groupSDFGsAndCodeOutsTogether","groupLikeDIODE1","configs","setCurrentRunConfig","show_run_options","ui_compile_and_run","refresh","reopenClosedWindow","saved_config","GoldenLayout","isInitialised","openPopouts","popout","toConfig","registerComponent","html","diode_context","load","get_settings","editorstring","new_element","editor_div","edit","setTheme","setMode","commands","addCommand","bindKey","mac","exec","readOnly","setEditorReference","setReadOnly","firstval","divstring","setContainer","createFromState","setLayout","getProject","updateSize","onKeyDown","addKeyShortcut","firstChild","start_DIODE","idstr","known_list","initial","dlist","inputelem","onfocus","oldvalue","onblur","fname","labeltext","tooltip","legacy","styled_elem","option","option_elem","oninput","sdfg_json","reviver","replacer","orig_sdfg","_sdfg","SDFG_State_Parser","symbols_to_resolve","memlets","mdata","subset","lookup_symbols","rngs","fltrd","inc_edges","sdfg_state","_sdfg_state","SDFG_Node_Parser","_node","node_type","attr_name","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","__webpack_module_cache__","inProgress","dataWebpackPrefix","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","definition","chunkId","all","promises","u","g","prop","script","needAttach","scripts","getElementsByTagName","charset","nc","onScriptComplete","doneFns","bind","scriptUrl","importScripts","currentScript","installedChunks","179","installedChunkData","promise","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","chunkLoadingGlobal","__webpack_exports__"],"mappings":"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","file":"main.js","sourcesContent":["export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import superPropBase from \"./superPropBase.js\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","module.exports = require(\"regenerator-runtime\");\n","// Copyright 2019-2020 ETH Zurich and the DaCe authors. All rights reserved.\nimport { max_func, min_func, max_func_obj } from \"./renderer_util.js\";\n\n// Similar to the same class in python\nclass Entry {\n    constructor(entryobj) {\n        this.data = entryobj;\n    }\n\n    nodeid() {\n        return new Number(this.data.node) & 0xFFFF;\n        return this.data.node;\n    }\n\n    stateid() {\n        return (new Number(this.data.node) >> 16) & 0xFFFF;\n        return this.data.node;\n    }\n\n    thread() {\n        return this.data.thread;\n    }\n    iteration() {\n        return this.data.iteration;\n    }\n    values() {\n        return this.data.values;\n    }\n\n    getKeys() {\n        return this.data.values.map(x => ObjectHelper.listKeys(x)[0]);\n    }\n    getValue(papi_code, nofail = undefined) {\n        let vals = this.data.values;\n        for (let it of vals) {\n            let keys = Object.keys(it);\n            if (keys.some(x => x == papi_code)) {\n                return it[papi_code];\n            }\n        }\n        if(papi_code == \"-2147483589\") {\n            // Instead of TOT_CYC, we allow REF_CYC with a warning\n            console.warn(\"Fallback used (TOT_CYC => REF_CYC)\");\n            return this.getValue(\"-2147483541\");\n        }\n        if(nofail == undefined) {\n            ObjectHelper.logObject(\"this\", this);\n            ObjectHelper.logObject(\"keys\", this.getKeys());\n            ObjectHelper.assert(\"got value from key \" + papi_code, false);\n        }\n        return \"N/A\";\n    }\n}\n// Similar to the same class in Python\nclass Section {\n    constructor(sectionobj = null, flags = undefined) {\n        if (sectionobj == null) {\n            return;\n        }\n        if(sectionobj instanceof Section) {\n            \n            Object.assign(this, sectionobj);\n            this.private_fix_entries();\n            return;\n        }\n        if(flags == \"from_raw\") {\n            Object.assign(this, sectionobj);\n            this.private_fix_entries();\n            return;\n        }\n        this.node = sectionobj['entry_node'];\n        this.datasize = sectionobj['static_movement'];\n\n        ObjectHelper.assert(\"this is valid\", this != undefined);\n        let entries = sectionobj['entries']; // this is an array\n        if(entries == undefined) {\n            entries = sectionobj['_entries']; // Try with the other format\n            if(entries != undefined) {\n                ObjectHelper.logObject(\"sectionobj\", sectionobj);\n                console.trace(\"Dangerous assignment\");\n                Object.assign(this, sectionobj);\n                this.private_fix_entries();\n                ObjectHelper.assert(\"Correct subelements\", this._entries.every(x => x instanceof Entry));\n                return;\n            }\n            else {\n                // Throw exception.\n            }\n\n        }\n        ObjectHelper.assert(\"entries is valid\", entries != undefined && entries != \"undefined\" && typeof entries != \"function\");\n        this._entries = [];\n\n        for (let e of entries) {\n            // Construct and push\n            this._entries.push(new Entry(e));\n        }\n    }\n\n    private_fix_entries() {\n        if(this._entries == undefined) {\n            return;\n        }\n        if(!this._entries.every(x => x instanceof Entry)) {\n            // Fix the entries\n            this._entries = this._entries.map(x => new Entry(x.data));\n        }\n    }\n\n    nodeid() {\n        return new Number(this.node) & 0xFFFF;\n        return this.node;\n    }\n\n    stateid() {\n        return (new Number(this.node) >> 16) & 0xFFFF;\n        return this.node;\n    }\n\n    entries() {\n        return this._entries.map(x => x.data);\n    }\n\n    /* Returns true if this section is a serial section, i.e. only one thread \n       number occurs in all entries.\n       This does not mean that the section iself was not inside a parallel \n       block, but that the section itself was not parallelized.\n    */\n    isSerial() {\n        return this.threadid() != null;\n    }\n\n    threadid() {\n        if(this._entries.length == 0) {\n            return null;\n        }\n        let tid = this._entries[0].thread();\n        if(this._entries.every(x => x.thread() == tid)) {\n            return tid;\n        }\n        \n        return null; // Not everyone had the same thread\n    }\n\n    // Returns the full cost of this section on one particular CPU, grouped \n    // by nodeid.\n    sumIteration() {\n        ObjectHelper.assert(\"object is serial\", this.isSerial());\n\n        let ret = {\n            \"entry_node\": this.nodeid().toString(),\n            \"thread\": this.threadid(),\n            \"iteration\": \"mixed\",\n            \"flags\": \"mixed\",\n            \"values\": []\n        };\n\n        let keys = this.list_events();\n\n        let vals = keys.map(x => { \n            let ret = {}; \n            ret[x] = MathHelper.sum(this.select_event(x));\n            return ret;\n        });\n\n        ret['values'] = vals;\n\n        let e = new Entry(ret);\n\n        let retobj = new Section();\n        Object.assign(retobj, this);\n        retobj._entries = [e];\n\n        return retobj;\n    }\n\n    numIterations() {\n        let keys = this.list_events();\n\n        let entry_count = 0;\n        keys.forEach(x => { \n            entry_count = Math.max(entry_count, this.select_event(x).length);\n        });\n        return entry_count;\n    }\n\n    select_event(event, nofail = undefined) {\n\n        return this._entries.filter(x => x.getValue(event, nofail) != \"N/A\").map(x => x.getValue(event, nofail));\n    }\n\n    list_events() {\n        let keys = this._entries.map(x => x.getKeys());\n        if(keys.length == 0) {\n            return [];\n        }\n        let first = keys[0];\n        let all_equal = keys.every(x => ObjectHelper.arraysEqual(x, first));\n        if(!all_equal)\n        {\n            ObjectHelper.logObject(\"first\", first);\n            let first_different = keys.find(x => !ObjectHelper.arraysEqual(x, first));\n            ObjectHelper.logObject(\"first different\", first_different);\n        }\n        ObjectHelper.assert(\"same keys\", all_equal);\n\n        return first;\n    }\n\n    select_thread(threadnum) {\n        return this.filter(x => x.thread() == threadnum);\n    }\n    select_node(nodeid) {\n        return this.filter(x => x.nodeid() == nodeid);\n    }\n\n    get_max_thread_num() {\n        ObjectHelper.assert(\"entries are defined\", this._entries != undefined);\n        for(let x of this._entries)\n            ObjectHelper.assert(\"Must be correct object\", x.thread != undefined);\n        if(this._entries.length === 0)\n            return undefined;\n        return max_func(this._entries, x => x.thread());\n    }\n\n    get_min_thread_num() {\n        ObjectHelper.assert(\"entries are defined\", this._entries != undefined);\n        if(this._entries.length === 0)\n            return undefined;\n        return min_func(this._entries, x => x.thread());\n    }\n\n    filter(predicate) {\n        let ret = new Section();\n        ret.node = this.nodeid();\n        ObjectHelper.assert(\"entries valid\", this._entries.every(x => x instanceof Entry));\n        ret._entries = this._entries.filter(predicate);\n\n        return ret;\n    }\n}\n\nclass SuperSection {\n\n    constructor(supersection_obj = null) {\n        let s = supersection_obj;\n        if(s == null) {\n            return;\n        }\n\n        this._sections = supersection_obj.sections.map(x => new Section(x));\n        this._nodeid = supersection_obj.supernode;\n    }\n\n    // Downgrade to a section by flattening \n    toSection(nodeid = undefined, stateid = undefined) {\n        let input = this.sections().filter(x => (nodeid == undefined || x.nodeid() == nodeid) && (stateid == undefined || x.stateid() == stateid));\n        let rawobj = ObjectHelper.merge(input, {\"datasize\": (x, y) => x + y});\n        let ret =  new Section(rawobj, \"from_raw\");\n\n        let max_thread_num = 0;\n        if(ret._entries != undefined) {\n\n            max_thread_num = ret.get_max_thread_num();\n\n            if(max_thread_num === undefined) {\n                return undefined;\n            }\n        }\n\n        for(let t = 0; t < max_thread_num; ++t) {\n            let pre = input.map(x => x.select_thread(t).select_event('-2147483589'));\n            if(pre.length == 0) {\n                // We don't like it...\n                continue;\n            }\n            else {\n                let unwrapped = ObjectHelper.flatten(pre);\n                let oldsum = MathHelper.sum(unwrapped);\n                let newsum = MathHelper.sum(ret.select_thread(t).select_event('-2147483589'));\n                ObjectHelper.assert(\"sum cyc equal\", newsum == oldsum);\n            }\n        }\n\n        return ret;\n    }\n\n    getSections(nodeid, stateid = undefined) {\n        ObjectHelper.assert(\"nodeid provided\", nodeid != undefined);\n\n        let ret = this.sections();\n\n        return ret.filter(x => x.nodeid() == nodeid && (stateid == undefined || x.stateid() == stateid));\n    }\n\n    // Get mean of threads\n    toThreadMean(nodeid) {\n        ObjectHelper.assert(\"nodeid defined\", nodeid != undefined);\n\n        // If we have a supersection of many sections and each of the \n        // sections contains only one thread, we are inside a parallel section.\n        // Otherwise, if a supersection contains sections with mixed threads, \n        // we are outside.\n\n        let all_serial = this.sections().every(x => x.isSerial());\n        if(all_serial) {\n            console.log(\"all sections are serial\");\n        }\n        else {\n            console.log(\"not all subsections are serial.\");\n            // This operation does not make any sense then.\n            return null;\n        }\n\n        let means = this.sections().map(x => x.sumIteration());\n        // means now has the means of all super-iterations \n\n        return means;\n    }\n\n    get_max_thread_num() {\n        // Returns the maximum thread number of all sections\n        ObjectHelper.assert(\"sections are defined\", this.sections() != undefined);\n        return max_func(this.sections(), x => x.get_max_thread_num());\n    }\n\n    filter(predicate) {\n        let ret = new SuperSection();\n        ret._nodeid = this.nodeid();\n        \n        ret._sections = this.sections().filter(predicate);\n\n        return ret;\n    }\n\n    nodeid() {\n        return this._nodeid & 0xFFFF;\n    }\n\n    stateid() {\n        return new Number(this._nodeid) >> 16;\n    }\n\n    containsSection(nodeid, stateid = undefined) {\n        return this.sections().filter(x => x.nodeid() == nodeid && (stateid == undefined || x.stateid() == stateid)).length > 0;\n    }\n\n    sections() {\n        return this._sections;\n    }\n\n    allSectionNodeIds(for_state = undefined) {\n        if(for_state == undefined) {\n            return this.sections().map(x => x.nodeid());\n        }\n        else {\n            // Only return the nodes of a given state\n            return this.sections().filter(x => x.stateid() == for_state).map(x => x.nodeid());\n        }\n    }\n    allSectionStateIds() {\n        return this.sections().map(x => x.stateid());\n    }\n\n}\nclass MathHelper {\n    static stdev(array) {\n        return Math.sqrt(this.var(array));\n    }\n\n    static normalizedToHexByte(input) {\n        ObjectHelper.assert(\"Input is normalized\", input >= 0.0 && input <= 255.0);\n\n        let denorm = input * 255;\n\n        let tmp = denorm.toString(16).toUpperCase();\n        ObjectHelper.assert(\"Correct Length\", tmp.length == 1 || tmp.length == 2);\n        return tmp.length == 2 ? tmp : \"0\" + tmp;\n    }\n\n    static majority(array) {\n\n        ObjectHelper.assert(\"array valid\", array != undefined && array.length != undefined);\n        let i = 0;\n        let dict = {};\n        for (let x of array) {\n            if (dict[x] == undefined) {\n                dict[x] = 0;\n            }\n            dict[x]++;\n            i++;\n        }\n        let a = [];\n        for (let k of Object.keys(dict)) {\n            let v = dict[k];\n\n            a.push([k, v]);\n        }\n        ObjectHelper.assert(\"a sensible\", a.length > 0);\n        return max_func_obj(a, x => x[1], x => x[0]);\n    }\n\n    // Pearson's correlation coefficient\n    static corr(X, Y) {\n        return this.cov(X, Y) / (this.stdev(X) * this.stdev(Y));\n    }\n\n    // sample correlation\n    static sample_corr(X, Y) {\n        let xmean = this.mean(X);\n        let ymean = this.mean(Y);\n\n        let num = this.sum(this.zip(X, Y).map(x => (x[0] - xmean) * (x[1] - ymean)));\n        let denom = Math.sqrt(this.sum(X.map(x => (x - xmean) * (x - xmean))) * this.sum(Y.map(y => (y - ymean) * (y - ymean))));\n        return num / denom;\n    }\n\n    static cov(X, Y) {\n        let n = X.length;\n\n        let acc = 0;\n        for (let i = 0; i < n; ++i) {\n            for (let j = i + 1; j < n; ++j) {\n                let tmp = (X[i] - X[j]) * (Y[i] - Y[j]);\n                acc += tmp;\n            }\n        }\n        return tmp / (n * n);\n    }\n\n    static var(array) {\n        let mean = this.mean(array);\n        let sum = array.reduce((a, b) => a + Math.pow(b - mean, 2.0), 0);\n        return sum / array.length;\n    }\n\n    static mean(array) {\n        if (array.length != 0) {\n            return this.sum(array) / (array.length);\n        }\n        else {\n            return 0;\n        }\n    }\n\n    // This is the upper median\n    static median(array) {\n        if (array.length != 0) {\n            let sorted = array.map(x => new Number(x));\n            sorted.sort((a, b) => a - b);\n            let index = sorted.length / 2;\n            index = Math.floor(index);\n            let ret = sorted[index];\n\n            ret = new Number(ret);\n            \n            ObjectHelper.assert(\"is_number\", ret instanceof Number);\n            return ret;\n        }\n        else {\n            return 0;\n        }\n    }\n\n    static sum(array) {\n        ObjectHelper.assert(\"Input valid\", array != undefined && array != null);\n        return array.reduce((a, b) => Number(a) + Number(b), 0);\n    }\n    static sumArray(array_of_arrays) {\n        let base = null;\n        for(let x of array_of_arrays) {\n            if (base == null) {\n                base = x;\n            }\n            else {\n                for(let i = 0; i < base.length; ++i) {\n                    base[i] = base[i] + x[i];\n                }\n            }\n        }\n        return base;\n    }\n\n    // Zips all elements of a 2d array \n    // (example: zip2d([[a, b, c], [1,2,3]]) -> [[a, 1], [b, 2], [c, 3]]). \n    // Restrictions: All sumelements must be of the same size!\n    static zip2d(array) {\n        if (array == []) return [];\n\n        let ret = [];\n        let outersize = array.length;\n        let innersize = array[0].length;\n\n        for (let i = 0; i < innersize; ++i) {\n            let tmp = [];\n            for (let j = 0; j < outersize; ++j) {\n                tmp.push(array[j][i]);\n            }\n            ret.push(tmp);\n        }\n        return ret;\n    }\n\n    static zip(X, Y) {\n        let ret = [];\n        for (let i = 0; i < X.length; ++i) {\n            ret.push([X[i], Y[i]]);\n        }\n        return ret;\n    }\n\n    static unique(array) {\n        return array.filter((x, index, a) => a.indexOf(x) == index);\n    }\n}\n\nclass ObjectHelper {\n\n    static createChunks(in_array, chunksize, aggregate=undefined) {\n        ObjectHelper.assert(\"chunksize valid\", !isNaN(chunksize) && chunksize != 0.0 && chunksize != undefined);\n        let ret = []\n        if(aggregate === undefined) aggregate = x => x;\n        for(let i = 0; i < in_array.length; i += chunksize) {\n            let tmp = in_array.slice(i, i + chunksize);\n            ret.push(aggregate(tmp));\n        }\n        return ret;\n    }\n\n    static toUnicodeSuperscript(number) {\n        number = new Number(number);\n        const valarr = [\"\\u2070\",\"\\u00B9\", \"\\u00B2\", \"\\u00B3\", \"\\u2074\", \"\\u2075\", \"\\u2076\", \"\\u2077\", \"\\u2078\", \"\\u2079\"];\n        let valstr = \"\";\n\n        if(number == 0) {\n            valstr = valarr[0];\n        }\n        // Note: ~~(i / 10) is an integer division in JS\n        // (bitwise operators make sense only on ints, so JS casts the float to \n        // an int, and then negates twice, which gives the int again)\n        for(let i = parseInt(number.toFixed(0)); i > 0; i = ~~(i / 10)) {\n            let index = Math.round(i) % 10;\n            let c = valarr[index];\n            \n            valstr = c + valstr;\n        }\n        return valstr;\n    }\n\n    static toUnicodeSubscript(number) {\n        number = new Number(number);\n        const valarr = [\"\\u2080\",\"\\u2081\", \"\\u2082\", \"\\u2083\", \"\\u2084\", \"\\u2085\", \"\\u2086\", \"\\u2087\", \"\\u2088\", \"\\u2089\"];\n        let valstr = \"\";\n\n        if(number == 0) {\n            valstr = valarr[0];\n        }\n        \n        for(let i = parseInt(number.toFixed(0)); i > 0; i = ~~(i / 10)) {\n            let index = Math.round(i) % 10;\n            let c = valarr[index];\n            \n            valstr = c + valstr;\n        }\n        return valstr;\n    }\n\n    // Number to sensible String\n    static valueToSensibleString(value, mode=\"scientific\", unit=\"\", digits=4) {\n        // valid modes:\n        // scientific: x*10^(exp)\n        // programmer: Ki/Mi/Gi/...\n        value = new Number(value);\n        let exp = 0;\n        let base1024table = {\n            0: \"\",\n            1: \"Ki\",\n            2: \"Mi\",\n            3: \"Gi\",\n            4: \"Ti\",\n            5: \"Pi\"\n        };\n        let base1000table = {\n            0: \"\",\n            1: \"K\",\n            2: \"M\",\n            3: \"G\",\n            4: \"T\",\n            5: \"P\"\n        };\n        let ret = \"\";\n        if(mode == \"programmer\") {\n            // Go in 1024-Chunks\n            while(value >= 1024.) {\n                value = value / 1024.;\n                ++exp;\n            }\n            ret = value.toFixed(digits - 1);\n\n            ret += \" \" + base1024table[exp] + unit;\n        }\n        else if(mode == \"scientific\") {\n            // Normal Scientific notation\n            while(value >= 10.) {\n                value /= 10;\n                ++exp;\n            }\n            ret = value.toFixed(digits - 1);\n            let valstr = exp.toString();\n            // We need to replace numbers by their unicode equivalent for superscript\n            valstr = ObjectHelper.toUnicodeSuperscript(exp);\n            \n\n            ret += \" \\u22C5 10\" + valstr;\n        }\n        else if(mode == \"fraction\") {\n            // Transform value into fraction (makes sense mostly for values \\in [0, 1])\n\n            // Simple (and slow) algorithm: Just multiply by 10 until the numerator is (about) integer\n            const thresh = 0.00001;\n\n            let numerator = new Number(value);\n            let denominator = 1;\n            while(Math.abs(Math.round(numerator) - numerator) > thresh)\n            {\n                numerator *= 10;\n                denominator *= 10;\n            }\n            // Now it's really likely that the result is not rational (just a fraction, not normalized)\n            let gcd = (a, b) => { \n                a = Math.abs(Math.round(a));\n                b = Math.abs(Math.round(b));\n                if (b > a) {let temp = a; a = b; b = temp;}\n                while (a >= 0 && b >= 0) {\n                    if (b == 0) return a;\n                    a %= b;\n                    if (a == 0) return b;\n                    b %= a;\n                }\n                return 1;\n            };\n\n            let gcd_val = gcd(numerator, denominator);\n            numerator /= gcd_val;\n            denominator /= gcd_val;\n\n            // We have the values - now translate them to the unicode equivalents\n            let super_n = ObjectHelper.toUnicodeSuperscript(numerator.toString());\n            let sub_d = ObjectHelper.toUnicodeSubscript(denominator.toString());\n\n            ret = super_n + \"/\" + sub_d;\n\n        }\n        else {\n            ObjectHelper.assert(\"unknown mode\", false);\n        }\n\n        \n        return ret;\n    }\n\n    // Applies operations to a key recursively (i.e. find a key and apply a function to the corresponding value). This function is in-place\n    static modifyingMapRecursive(obj, key, func) {\n        if(obj == undefined || obj == null || obj instanceof String || typeof obj == \"string\") {\n            return;\n        }\n        if(obj instanceof Array) {\n            for(let x of obj) {\n                ObjectHelper.modifyingMapRecursive(x, key, func);\n            }\n            return;\n        }\n        let keys = ObjectHelper.listKeys(obj);\n        if(keys == undefined) {\n            return;\n        }\n        for(let k of keys) {\n            if(k == key) {\n                obj[k] = func(obj[k]);\n            }\n            else {\n                ObjectHelper.modifyingMapRecursive(obj[k], key, func);\n            }\n        }\n    }\n\n    static async valueFromPromise(obj) {\n        if (obj.then != undefined) {\n            let x = await obj;\n            return x;\n        }\n        else {\n            return obj;\n        }\n\n    }\n\n    // Same as valueFromPromise, but fully recursive (this will never return a promise)\n    static async valueFromPromiseFull(obj) {\n        if (obj.then != undefined) {\n            let x = await obj;\n            return await ObjectHelper.valueFromPromiseFull(x);\n        }\n        else {\n            return obj;\n        }\n\n    }\n\n    static async waitArray(obj_array) {\n        for(let i = 0; i < obj_array.length; ++i) {\n            obj_array[i] = await ObjectHelper.valueFromPromise(obj_array[i]);\n        }\n        return obj_array;\n    }\n\n    static arraysEqual(arr1, arr2) {\n        this.assert(\"1 is array\", arr1 instanceof Array);\n        this.assert(\"2 is array\", arr2 instanceof Array);\n        if(arr1.length != arr2.length) {\n            return false;\n        }\n\n        for(let i = 0; i < arr1.length; ++i) {\n            if(arr1[i] != arr2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    static listKeys(obj) {\n        let ret = [];\n        for (let k of Object.keys(obj)) {\n            ret.push(k);\n        }\n\n        return ret;\n    }\n\n    // Merges all objects together. Primitive values must be the same, and \n    // list elements will be appended. All prepended underscores of keys are\n    // removed.\n    static merge(in_array, onconflicts = {}) {\n        // onconflicts: dict of key -> function(x, y), where the function \n        // resolves conflicts if the values are not identical.\n        if(in_array.length == 0) return [];\n\n        let keys = this.listKeys(in_array[0]);\n\n        let ret = {};\n        // Prime by adding keys\n        for(let k of keys) {\n            ret[k] = undefined;\n        }\n        for(let x of in_array) {\n            for(let k of keys) {\n                let v = x[k];\n                if(v instanceof Array) {\n                    if(ret[k] == undefined) {\n                        ret[k] = [];\n                    }\n                    ret[k].push(...v);\n                }\n                else {\n                    if(ret[k] == undefined) {\n                        ret[k] = v;\n                    }\n                    if(ret[k] != v) {\n                        console.log(\"Different elements for key \" + k + \": \" + ret[k] + \" vs \" + v);\n                        if(onconflicts[k] != undefined) {\n                            ret[k] = onconflicts[k](ret[k], v);\n                            continue;\n                        }\n                    }\n                    this.assert(\"Same primitive values\", ret[k] == v);\n                }\n            }\n        }\n        return ret;\n    }\n\n    // Merges two objects into the return value. 'specials' applies the function in the value to the matching key.\n    static mergeRecursive(o1, o2, specials = {}) {\n        if(o1 == null || o1 == undefined) return o2;\n        if(o2 == null || o2 == undefined) return o1;\n        if(typeof o1 == \"string\") return o1;\n        if(((typeof o1 == \"array\") || (o1 instanceof Array)) && ((typeof o2 == \"array\") || (o2 instanceof Array))) {\n            if(o2.every(x => o1.includes(x))) {\n                // If every element of o2 is already in o1, why bother?\n                return o1;\n            }\n            return [...o1, ...o2];\n        }\n\n        let ret = o1;\n        let keys = ObjectHelper.listKeys(o2);\n\n        for(let k of keys) {\n            let v = o2[k];\n\n            if(specials[k] != undefined) {\n                let specfunc = specials[k];\n                ret[k] = specfunc(ret[k], v, specials);\n                continue;\n            }\n\n            let o1ref = ret[k];\n            if(o1ref == undefined) {\n                // If the key is not present in o1, just add key + value\n                ret[k] = v;\n            }\n            else {\n                ret[k] = ObjectHelper.mergeRecursive(ret[k], v);\n            }\n        }\n        return ret;\n    }\n\n    // Flattens an array of arrays to a single array\n    static flatten(in_array) {\n        return [].concat.apply([], in_array);\n    }\n\n    static logObject(title, obj) {\n        if(obj == undefined) {\n            obj = title;\n            title = \"(anon)\";\n        }\n        return console.log(title + \": \" + JSON.stringify(obj));\n    }\n\n    /* Groups elements by selecting a key using func(x) for every element x \n       in in_array. Returns a dict of key => [objects] */\n    static groupBy(in_array, func) {\n\n        let ret = {};\n\n        for(let x of in_array) {\n            ObjectHelper.assert(\"key not undefined\", func(x) !== undefined);\n            if(ObjectHelper.listKeys(ret).includes(func(x))) {\n                ret[func(x)].push(x);\n            }\n            else {\n                ret[func(x)] = [x];\n            }\n        }\n\n        return Object.values(ret);\n    }\n\n    static assert(name, expr) {\n        if(!expr) {\n            console.log(\"Assertion \\\"\" + name + \"\\\" failed\");\n            console.trace();\n            window.alert(\"Assertion failed. Check console\");\n            throw new Error();\n        }\n    }\n\n    static stringify_circular(obj) {\n        const getCircularReplacer = () => {\n            const seen = new WeakSet;\n            return (key, value) => {\n                if (typeof value === \"object\" && value !== null) {\n                    if (seen.has(value)) {\n                        return;\n                    }\n                    seen.add(value);\n                }\n                return value;\n            };\n        };\n\n        return JSON.stringify(obj, getCircularReplacer());\n    }\n}\n\n// Class providing analysis of threads (mainly used in balance)\nclass ThreadAnalysis {\n    constructor(section) {\n        if(section instanceof Section) {\n            this.section = section;\n        }\n        else if(section instanceof SuperSection) {\n            ObjectHelper.assert(\"this is undesired.\", false);\n            // A supersection has many subsections. For now, let's try if \n            // merging works for this.\n            this.section = section.toSection();\n        }\n        else if(section instanceof LazySuperSection) {\n            this.section = section;\n        }\n        else if(section instanceof LazySection) {\n            this.section = section;\n        }\n    }\n\n    judgement(analysis=null) {\n        return undefined;\n    }\n\n    analyze() {\n        let section = this.section;\n\n        let b_print_analysis = false;   // Set to true to debug.\n\n        let data = {};\n\n        let max_thread_num = Number(section.get_max_thread_num());\n        if (b_print_analysis)\n            console.log(\"max_thread_num: \" + max_thread_num);\n        let tot_cyc = [];\n        let tot_l3_miss = [];\n        let tot_l2_miss = [];\n        let t = 0;\n        for (t = 0; t < max_thread_num + 1; t++) {\n            let ts = section.select_thread(t);\n            let tc = ts.select_event('-2147483589'); // PAPI_TOT_CYC\n            tot_cyc.push(MathHelper.sum(tc));\n\n            let tl3 = ts.select_event('-2147483640'); // PAPI_L3_TCM\n            tot_l3_miss.push(MathHelper.sum(tl3));\n\n            let tl2 = ts.select_event('-2147483641');   //PAPI_L2_TCM\n            tot_l2_miss.push(MathHelper.sum(tl2));\n        }\n\n        //Now we can get the balance\n        let i = 0;\n        if (b_print_analysis)\n            for (let t of tot_cyc) {\n                console.log(\"Thread \" + i + \" took \" + t + \" cycles\");\n                i++;\n            }\n\n        data.cycles_per_thread = tot_cyc;\n\n        if(toplevel_use_mean)\n            data.balance_stdev = (MathHelper.stdev(tot_cyc) / MathHelper.mean(tot_cyc));\n        else if(toplevel_use_median) {\n            data.balance_stdev = (MathHelper.stdev(tot_cyc) / MathHelper.median(tot_cyc));\n        }\n        else ObjectHelper.assert(\"Undefined mode\", false);\n        if (b_print_analysis)\n            if (tot_cyc.length > 1 && MathHelper.mean(tot_cyc) != 0) {\n\n                console.log(\"stdev: \" + MathHelper.stdev(tot_cyc));\n                console.log(\"Balance (stdev): \" + data.balance_stdev);\n            }\n\n\n        // We need different means of balance calculations.\n        let max_elem = Math.max(...tot_cyc);\n        let min_elem = Math.min(...tot_cyc);\n        let max_diff = max_func(tot_cyc, x => Math.max(Math.abs(max_elem - x), Math.abs(min_elem - x)));\n        \n        let biggest_unbalance = 0;\n        if(toplevel_use_mean)\n            biggest_unbalance = max_diff / MathHelper.mean(tot_cyc);\n        else if(toplevel_use_median)\n            biggest_unbalance = max_diff / MathHelper.median(tot_cyc);\n        else ObjectHelper.assert(\"Undefined mode\", false);\n\n        if (b_print_analysis)\n            console.log(\"max_diff: \" + max_diff);\n        if (b_print_analysis)\n            console.log(\"Balance (max): \" + biggest_unbalance);\n\n        data.balance_max = biggest_unbalance;\n\n        i = 0;\n        if (b_print_analysis)\n            for (let t of tot_l3_miss) {\n                console.log(\"Thread \" + i + \" had \" + t + \" L3 misses\");\n                i++;\n            }\n        let sum_l3 = MathHelper.sum(tot_l3_miss);\n        if (b_print_analysis)\n            console.log(\"\\n\" + section.datasize + \" bytes (presumably) accessed\\n\" + sum_l3 + \" L3 misses over all threads\\n\" + (sum_l3 * 64) + \" bytes loaded from memory\");\n\n        i = 0;\n        if (b_print_analysis)\n            for (let t of tot_l2_miss) {\n                console.log(\"Thread \" + i + \" had \" + t + \" L2 misses\");\n                i++;\n            }\n\n        let sum_l2 = MathHelper.sum(tot_l2_miss);\n        if (b_print_analysis)\n            console.log(\"\\n\" + section.datasize + \" bytes (presumably) accessed\\n\" + sum_l2 + \" L3 misses over all threads\\n\" + (sum_l2 * 64) + \" bytes loaded from memory\");\n\n\n        return new DataBlock(data, \"thread\");\n    }\n\n\n}\n\nclass LazyThreadAnalysis extends ThreadAnalysis {\n\n    constructor(communicator, section) {\n        super(section);\n        this.section = section;\n        this.communicator = communicator;\n        ObjectHelper.assert(\"Parameter valid\", this.communicator != undefined);\n        ObjectHelper.assert(\"Parameter valid\", this.section != undefined);\n    }\n\n    async analyze() {\n        \n        let tmp = await this.communicator.runAnalysis(\"ThreadAnalysis\", [new Number(this.section.unified_id), new Number(this.section.supersection_id)]).get();\n\n        let data = tmp;\n\n        let ret = new DataBlock(data, \"thread\");\n        this.analysis_result = ret;\n        ret.judgement = this.judgement();\n        return ret;\n    }\n}\n\nfunction AutoThreadAnalysis(communicator, section) {\n    if(section instanceof Section) {\n        return new ThreadAnalysis(section);\n    }\n    else {\n        return new LazyThreadAnalysis(communicator, section);\n    }\n}\n\nclass MemoryAnalysis {\n    constructor(section, target_bw) {\n        this.section = section;\n        this.analysis_result = null;\n        this.Memory_Target_Bandwidth = target_bw;\n        if(this.Memory_Target_Bandwidth == undefined) {\n            this.Memory_Target_Bandwidth = 20;\n        }\n    }\n\n    judgement(analysis = null) {\n        if (analysis == null) analysis = this.analysis_result;\n\n        return MemoryAnalysis.sjudgement(analysis);\n    }\n    static sjudgement(analysis) {\n        // We say memory was slow if the achieved bandwidth is below 50% of the target bandwidth\n        let bandwidth = analysis.data.expected_bandwidth;\n        let m = bandwidth / analysis.data.Memory_Target_Bandwidth;\n        if (m < 0.5) {\n            return -1;\n        }\n        // Otherwise, everything is fine\n        return 1;\n    }\n\n    analyze() {\n        let section = this.section;\n\n        ObjectHelper.assert(\"section is Section\", section instanceof Section);\n\n        let b_print_analysis = false;   // Set to true to debug.\n\n        let data = {};\n\n        data.expected_memory_movement = section.datasize;\n\n        if(b_print_analysis)\n            console.log(\"Expected data movement: \" + data.expected_memory_movement);\n\n        let max_thread_num = Number(section.get_max_thread_num());\n        let min_thread_num = Number(section.get_min_thread_num());\n\n        if(max_thread_num == undefined || min_thread_num == undefined) {\n            return undefined;\n        }\n        if (b_print_analysis)\n            console.log(\"max_thread_num: \" + max_thread_num);\n        let tot_cyc = [];\n        let tot_l3_miss = [];\n        let tot_l2_miss = [];\n\n        let mem_bw = []; // Bandwidth from mem to L3\n        let l3_bw = [];  // Bandwidth from L3 to L2\n\n        let critical_path_cyc = 0; // Critical path cycles\n\n        let t = 0;\n        for (t = min_thread_num; t < max_thread_num + 1; t++) {\n            let ts = section.select_thread(t);\n            let tc = ts.select_event('-2147483589'); // PAPI_TOT_CYC\n            let tc_sum = MathHelper.sum(tc);\n            tot_cyc.push(tc_sum);\n\n            let tl3 = ts.select_event('-2147483640'); // PAPI_L3_TCM\n            let tl3_sum = MathHelper.sum(tl3);\n            tot_l3_miss.push(tl3_sum);\n\n            let tl2 = ts.select_event('-2147483641');   //PAPI_L2_TCM\n            let tl2_sum = MathHelper.sum(tl2);\n            tot_l2_miss.push(tl2_sum);\n\n            // Add the bandwidths for this element\n            mem_bw.push(tl3_sum / tc_sum);\n            l3_bw.push(tl2_sum / tc_sum);\n        }\n\n        if(tot_cyc.length == 0) {\n            return undefined;\n        }\n        critical_path_cyc = max_func(tot_cyc, x => x);\n\n        data.critical_path_cyc = critical_path_cyc;\n\n        data.mem_bandwidth = mem_bw;\n        data.l3_bandwidth = l3_bw;\n\n        // Now we can get the balance\n        let i = 0;\n        if (b_print_analysis)\n            for (let t of tot_cyc) {\n                console.log(\"Thread \" + i + \" took \" + t + \" cycles\");\n                i++;\n            }\n\n        data.TOT_CYC = tot_cyc;\n        data.L3_TCM = tot_l3_miss;\n        data.L2_TCM = tot_l2_miss;\n\n\n        i = 0;\n        if (b_print_analysis)\n            for (let t of tot_l3_miss) {\n                console.log(\"Thread \" + i + \" had \" + t + \" L3 misses\");\n                i++;\n            }\n        let sum_l3 = MathHelper.sum(tot_l3_miss);\n        if (b_print_analysis)\n            console.log(\"\\n\" + section.datasize + \" bytes accessed\\n\" + sum_l3 + \" L3 misses over all threads\\n\" + (sum_l3 * 64) + \" bytes loaded from memory\");\n\n        i = 0;\n        if (b_print_analysis)\n            for (let t of tot_l2_miss) {\n                console.log(\"Thread \" + i + \" had \" + t + \" L2 misses\");\n                i++;\n            }\n\n        let sum_l2 = MathHelper.sum(tot_l2_miss);\n        if (b_print_analysis)\n            console.log(\"\\n\" + section.datasize + \" bytes accessed\\n\" + sum_l2 + \" L3 misses over all threads\\n\" + (sum_l2 * 64) + \" bytes loaded from memory\");\n\n        {\n            let datasize = data.expected_memory_movement;\n            let crit_cyc = data.critical_path_cyc;\n\n            let expected_bandwidth = datasize / crit_cyc;\n\n            data.expected_bandwidth = expected_bandwidth;\n        }\n        data.Memory_Target_Bandwidth = this.Memory_Target_Bandwidth;\n        let ret = new DataBlock(data, \"memory\");\n        this.analysis_result = ret;\n        ret.judgement = this.judgement();\n        return ret;\n    }\n}\n\nclass SuperSectionMemoryAnalysis {\n    constructor(section, nodeid, stateid, target_bw) {\n        this.section = section;\n        this.for_node = nodeid;\n        this.for_state = stateid;\n        this.analysis_result = null;\n\n        this.Memory_Target_Bandwidth = target_bw;\n        if(this.Memory_Target_Bandwidth == undefined) {\n            this.Memory_Target_Bandwidth = 20;\n        }\n\n        if(!(stateid == 0xFFFF || stateid == 65535))\n            ObjectHelper.assert(\"for_node defined\", this.for_node != undefined && new Number(this.for_node) != NaN);\n    }\n\n    judgement(analysis = null) {\n        if (analysis == null) analysis = this.analysis_result;\n\n        // We say memory was slow if the achieved bandwidth is below 50% of \n        // the target bandwidth\n        let bandwidth = analysis.data.expected_bandwidth;\n\n        let m = bandwidth / analysis.data.Memory_Target_Bandwidth;\n        if (m < 0.5) {\n            return -1;\n        }\n        // Otherwise, everything is fine\n        return 1;\n    }\n\n    analyze() {\n        let section = this.section;\n\n        ObjectHelper.assert(\"section is SuperSection\", section instanceof SuperSection);\n\n        // We have a supersection, so we should try to get individual \n        // sections out.\n        section = section.toSection(this.for_node, this.for_state);\n        if(section == undefined) {\n            return null;\n        }\n        if(section['_entries'] == undefined) {\n            return null;\n        }\n\n        let b_print_analysis = false;   // Set to true to debug.\n\n        let data = {};\n\n        data.expected_memory_movement = section.datasize;\n\n        if(b_print_analysis)\n            console.log(\"Expected data movement: \" + data.expected_memory_movement);\n\n        \n\n        let max_thread_num = Number(section.get_max_thread_num());\n        let min_thread_num = Number(section.get_min_thread_num());\n        if (b_print_analysis)\n            console.log(\"max_thread_num: \" + max_thread_num);\n        let tot_cyc = [];\n        let tot_l3_miss = [];\n        let tot_l2_miss = [];\n\n        let mem_bw = []; // Bandwidth from mem to L3\n        let l3_bw = [];  // Bandwidth from L3 to L2\n\n        let critical_path_cyc = 0; // Critical path cycles\n\n        let t = 0;\n        for (t = min_thread_num; t < max_thread_num + 1; t++) {\n            //console.log(\"iteration \" + t);\n            let ts = section.select_thread(t);\n            let tc = ts.select_event('-2147483589'); // PAPI_TOT_CYC\n            //console.log(tc);\n            let tc_sum = MathHelper.sum(tc);\n            tot_cyc.push(tc_sum);\n\n            let tl3 = ts.select_event('-2147483640'); // PAPI_L3_TCM\n            let tl3_sum = MathHelper.sum(tl3);\n            tot_l3_miss.push(tl3_sum);\n\n            let tl2 = ts.select_event('-2147483641');   //PAPI_L2_TCM\n            let tl2_sum = MathHelper.sum(tl2);\n            tot_l2_miss.push(tl2_sum);\n\n            // Add the bandwidths for this element\n            mem_bw.push(tl3_sum / tc_sum);\n            l3_bw.push(tl2_sum / tc_sum);\n        }\n\n        critical_path_cyc = max_func(tot_cyc, x => x);\n\n        data.critical_path_cyc = critical_path_cyc;\n\n        data.mem_bandwidth = mem_bw;\n        data.l3_bandwidth = l3_bw;\n\n        let i = 0;\n        if (b_print_analysis)\n            for (let t of tot_cyc) {\n                console.log(\"Thread \" + i + \" took \" + t + \" cycles\");\n                i++;\n            }\n\n        data.TOT_CYC = tot_cyc;\n        data.L3_TCM = tot_l3_miss;\n        data.L2_TCM = tot_l2_miss;\n\n\n        i = 0;\n        if (b_print_analysis)\n            for (let t of tot_l3_miss) {\n                console.log(\"Thread \" + i + \" had \" + t + \" L3 misses\");\n                i++;\n            }\n        let sum_l3 = MathHelper.sum(tot_l3_miss);\n        if (b_print_analysis)\n            console.log(\"\\n\" + section.datasize + \" bytes accessed\\n\" + sum_l3 + \" L3 misses over all threads\\n\" + (sum_l3 * 64) + \" bytes loaded from memory\");\n\n        i = 0;\n        if (b_print_analysis)\n            for (let t of tot_l2_miss) {\n                console.log(\"Thread \" + i + \" had \" + t + \" L2 misses\");\n                i++;\n            }\n\n        let sum_l2 = MathHelper.sum(tot_l2_miss);\n        if (b_print_analysis)\n            console.log(\"\\n\" + section.datasize + \" bytes accessed\\n\" + sum_l2 + \" L3 misses over all threads\\n\" + (sum_l2 * 64) + \" bytes loaded from memory\");\n\n        {\n            let datasize = data.expected_memory_movement;\n            let crit_cyc = data.critical_path_cyc;\n\n            let expected_bandwidth = datasize / crit_cyc;\n\n            data.expected_bandwidth = expected_bandwidth;\n        }\n\n        data.Memory_Target_Bandwidth = this.Memory_Target_Bandwidth;\n        let ret = new DataBlock(data, \"memory\");\n        this.analysis_result = ret;\n        ret.judgement = this.judgement();\n        return ret;\n    }\n}\n\nclass LazySuperSectionMemoryAnalysis extends SuperSectionMemoryAnalysis {\n    constructor(communicator, section, nodeid, stateid, target_bw) {\n        super(section, nodeid, stateid, target_bw);\n        this.communicator = communicator;\n    }\n\n    async analyze() {\n\n        // We differ from the eager analysis here: We let the python/sql-side do the hard work\n        let n = undefined;\n        let s = new Number(this.for_state);\n        if(this.for_node !== undefined)\n            n = new Number(this.for_node);\n        else\n        {\n            // Global\n            s = 0;\n            n = 0x0FFFFFFFF;\n        }\n        let tmp = await this.communicator.runAnalysis(\"MemoryAnalysis\", [(s << 16) | n, this.section.index]).get();\n\n        let data = tmp;\n\n        if(data == null) {\n            return null;\n        }\n\n        data.Memory_Target_Bandwidth = this.Memory_Target_Bandwidth;\n        let ret = new DataBlock(data, \"memory\");\n        this.analysis_result = ret;\n        ret.judgement = this.judgement();\n        return ret;\n    }\n}\n\nfunction AutoSuperSectionMemoryAnalysis(communicator, section, nodeid, stateid, target_bw) {\n\n    if(section instanceof LazySuperSection) {\n        return new LazySuperSectionMemoryAnalysis(communicator, section, nodeid, stateid, target_bw);\n    }\n    else {\n        return new SuperSectionMemoryAnalysis(section, nodeid, stateid, target_bw);\n    }\n}\n\nclass CriticalPathAnalysis {\n\n    constructor(rundata, entry_node, stateid) {\n        this.rundata = rundata;\n        this.analysis_result = null;\n        this.section_entry_node = entry_node;\n        this.for_state = stateid;\n    }\n\n    judgement(analysis = null) {\n        if (analysis == null) analysis = this.analysis_result;\n        \n        return CriticalPathAnalysis.sjudgement(analysis);\n    }\n\n    static sjudgement(analysis) {\n\n        let e = analysis.data.efficiency;\n        let max_thread_num = max_func(e, x => x.thread_num);\n\n        let eff = 0;\n\n        if(toplevel_use_mean) {\n            eff = MathHelper.mean(e.find(x => x.thread_num == max_thread_num).value);\n        }\n        else if(toplevel_use_median) {\n            eff = MathHelper.median(e.find(x => x.thread_num == max_thread_num).value);\n        }\n        else {\n            ObjectHelper.assert(\"Undefined mode\", false);\n        }\n        if (eff < 0.5) {\n            return -1;\n        }\n\n        return 1;\n    }\n\n    analyze() {\n        let data = {};\n\n        // We want to compare different runs.\n        let runs = this.rundata.map(x => x.data);\n\n        \n        if(this.section_entry_node !== undefined) {\n            let single_threaded = new SuperSection(runs[0][0]).toThreadMean(this.section_entry_node, this.for_state);\n        }\n\n        let filtered_to_section = runs.map(x => x.map(y => new SuperSection(y).toSection(this.section_entry_node, this.for_state)).filter(x => x != undefined && x._entries != undefined));\n        \n\n       let thread_analyzed = filtered_to_section.map(x => x.map(y => { \n           return new ThreadAnalysis(y).analyze(); \n        }));\n\n        // Now map to cycles_per_thread\n        let cycles_per_thread = thread_analyzed.map(x => x.map(y => y.data.cycles_per_thread));\n\n        // From here, we have all thread analyses (including tot_cyc for \n        // each element)\n        let critical_paths = cycles_per_thread.map(x => x.map(y => max_func(y, z => z)));\n\n        data.critical_paths = critical_paths.map((x, index) => ({ thread_num: index + 1, value: x }));\n\n        let T1 = data.critical_paths.find(x => x.thread_num == 1).value;\n        data.speedup = critical_paths.map((x, index) => ({ thread_num: index + 1, value: x.map((y, yi) => T1[yi] / y) }));\n\n        data.efficiency = data.speedup.map((x, index) => ({ thread_num: index + 1, value: x.value.map((y, yi) => y / (index + 1)) }));\n\n        let ret = new DataBlock(data, \"path\");\n        this.analysis_result = ret;\n        ret.judgement = this.judgement();\n        return ret;\n    }\n\n}\n\nclass LazyCriticalPathAnalysis extends CriticalPathAnalysis {\n\n    constructor(communicator, entry_node, stateid) {\n        super(undefined, entry_node, stateid);\n        this.communicator = communicator;\n    }\n\n    async analyze() {\n        // We differ from the eager analysis here: We let the python/sql-side do the hard work\n        ObjectHelper.assert(\"Valid state\", this.for_state !== undefined);\n        let p1 = undefined;\n        if(this.section_entry_node !== undefined)\n            p1 = new Number(this.section_entry_node);\n        let tmp = await this.communicator.runAnalysis(\"CriticalPathAnalysis\", [p1, new Number(this.for_state)]).get();\n\n        let data = tmp;\n\n        let ret = new DataBlock(data, \"path\");\n        this.analysis_result = ret;\n        ret.judgement = this.judgement();\n        return ret;\n    }\n    \n}\n\n\nfunction AutoCriticalPathAnalysis(communicator, rundata, entry_node, stateid) {\n\n    if(rundata != undefined) {\n        return new CriticalPathAnalysis(rundata, entry_node, stateid);\n    }\n    else {\n        // This is a lazy analysis.\n        return new LazyCriticalPathAnalysis(communicator, entry_node, stateid)\n    }\n}\n\n\n\n// Class to check if a result is reasonable\nclass ResultVerifier {\n    constructor(all_perf_data) {\n        this.all_data = all_perf_data;\n\n        // Extract the list of supersections from the runs\n        let rundata = this.all_data.map(x => x.data);\n\n        ObjectHelper.assert(\"Data received\", rundata.length > 0);\n        if(!global_disable_verifier)\n            ResultVerifier.assert_all_runs_same_number_of_entries(rundata);\n    }\n\n    static assert_all_runs_same_number_of_entries(runs) {\n        \n        ObjectHelper.assert(\"all_runs_same_number_of_supersection\", runs.every(x => x.length == runs[0].length));\n\n        // Now get all sections and check again.\n        ObjectHelper.assert(\"all_runs_same_number_of_sections\", runs.every(x => MathHelper.sum(x.map(y => new SuperSection(y).sections().length)) == MathHelper.sum(runs[0].map(y => new SuperSection(y).sections().length))));\n\n        // Now check number of entries (this must also be the same)\n        ObjectHelper.assert(\"all_runs_same_number_of_entries\", runs.every(x => MathHelper.sum(x.map(y => MathHelper.sum(new SuperSection(y).sections().map(x => x.entries().length)))) == MathHelper.sum(runs[0].map(y => MathHelper.sum(new SuperSection(y).sections().map(x => x.entries().length))))));\n\n    }\n\n\n}\n\nexport {Entry, Section, SuperSection, MathHelper, ObjectHelper,\nCriticalPathAnalysis, MemoryAnalysis};","// Copyright 2019-2020 ETH Zurich and the DaCe authors. All rights reserved.\nimport {ObjectHelper, MathHelper} from \"./datahelper.js\"\nimport { DiodeWindow } from \"./windowing.js\";\n\n// Renderer utilities.\n\n// Render a button to a canvas and return an image\nfunction render_button_to_graphic(button, mode=\"canvas_element\") {\n    let button_class = button.constructor.name;\n    let c = document.createElement(\"canvas\");\n    let ctx = c.getContext(\"2d\");\n\n    c.width = button.button_subwindow.targetwidth;\n    c.height = button.button_subwindow.targetheight;\n\n    // Recreate the button from the type name\n    let new_obj = eval(\"new \" + button_class + \"(ctx, \" + \"...(button.dataparams)\" + \");\");\n\n    new_obj.button_subwindow_state = 'open';\n    new_obj.is_locked_open = true;\n    // Skip animation\n    new_obj.setFullyOpen();\n    let b = new Bracket(ctx);\n\n    b.setupEventListeners();\n\n    b.addButton(new_obj);\n\n    b.drawEx(new Pos(-20, 0), new Pos(0, 0), 0, 0, true);\n\n\n    let imgdat = c.toDataURL(\"image/jpeg\");\n\n    if(mode === \"canvas_element\")\n        return c;\n    \n    return imgdat;\n}\n\nfunction createImageDownload(brackets, prefix=\"\") {\n    // Some difficulties here: First, we have to merge the images to one big image.\n    // We default to the following convention:\n    // There are 10 columns with a width of 800px each. The first column is reserved to (textual) information about the node\n    // Any more buttons would be wrapping around to newlines.\n\n    // Every bracket begins a newline\n\n    // Assuming WebKit=Firefox, there's a maximum of 32767px in either direction, or a total of 472'907'776px (e.g., 22'528 x 20'992)\n\n    // TODO: Reevalutate this code and adjust to the case that there are more than 10 buttons (implement wrap-around, basically)\n\n    let c = document.createElement(\"canvas\");\n\n    let ctx = c.getContext(\"2d\");\n\n    const colsize = 700;\n    const rowsize = 500;\n    let ypos = 0;\n    let maxxpos = 0;\n\n    // Cut height\n    c.height = Object.entries(brackets).length * rowsize;\n\n    // Cut width\n    let tmp = Object.entries(brackets)[0][1];\n    c.width = (1 + tmp.buttons.length) * colsize;\n\n\n    // Fill white (will appear as transparent otherwise, which is viewer-dependent)\n    ctx.save();\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, c.width, c.height);\n    ctx.restore();\n\n    for(let bracket_entry of Object.entries(brackets)) {\n        \n        let key = bracket_entry[0];\n        let bracket = bracket_entry[1];\n\n        ctx.save();\n\n        ctx.textBaseline = \"middle\";\n        ctx.textAlign = \"center\";\n\n        ctx.font = \"60px Arial\";\n\n        let unified_id = new Number(key);\n        let stateid = (unified_id >> 16) & 0xFFFF;\n        let nodeid = (unified_id) & 0xFFFF;\n\n        ctx.fillText(\"Affected node \" + stateid.toString() + \"|\" + nodeid.toString(), colsize / 2.0, ypos + rowsize / 2.0);\n\n        ctx.restore();\n        \n        let xpos = colsize;\n        for(let button of bracket.buttons) {\n            // Draw the buttons accordingly\n\n            let src_canvas = render_button_to_graphic(button);\n\n            ctx.drawImage(src_canvas, xpos, ypos);\n\n            xpos += colsize;\n        }\n        maxxpos = Math.max(maxxpos, xpos);\n\n        ypos += rowsize;\n        xpos = 0;\n    }\n\n    let imgdat = c.toDataURL(\"image/jpeg\");\n    \n    let d = document.createElement(\"a\");\n    d.setAttribute(\"href\", imgdat);\n    d.setAttribute(\"download\", prefix + \"buttons.jpg\");\n\n    d.style.display = 'none';\n    document.body.appendChild(d);\n  \n    d.click();\n  \n    document.body.removeChild(d);\n\n}\n\nfunction max_func(array, func) {\n    if(array == undefined) {\n        console.trace(\"undefined parameter\");\n    }\n    ObjectHelper.assert(\"Array is non-empty\", array.length > 0);\n    let max_obj = null;\n    let max_val = func(array[0]);\n    for(let x of array) {\n        let m = func(x);\n        if(m > max_val) {\n            max_val = m;\n            max_obj = x;\n        }\n    }\n\n    return max_val;\n}\n\nfunction max_func_obj(array, func, objfunc) {\n    if(array.length == 0) {\n        return null;\n    }\n    let max_obj = objfunc(array[0]);\n    let max_val = func(array[0]);\n    for(let x of array) {\n        let m = func(x);\n        if(m > max_val) {\n            max_val = m;\n            max_obj = objfunc(x);\n        }\n    }\n\n    return max_obj;\n}\n\nfunction min_func(array, func) {\n    let min_obj = null;\n    let min_val = func(array[0]);\n    for(let x of array) {\n        let m = func(x);\n        if(m < min_val) {\n            min_val = m;\n            min_obj = x;\n        }\n    }\n\n    return min_val;\n}\n\nclass Pos {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n\n    toString() {\n        return \"(\" + this.x + \", \" + this.y + \")\";\n    }\n\n    minus(other) {\n        return new Pos(this.x - other.x, this.y - other.y);\n    }\n    plus(other) {\n        return new Pos(this.x + other.x, this.y + other.y);\n    }\n    times(other) {\n        return new Pos(this.x * other.x, this.y * other.y);\n    }\n    \n    multiply(num) {\n        return new Pos(this.x * num, this.y * num);\n    }\n\n    dist() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    }\n\n    inRect(topleft, bottomright) {\n        if (this.x < topleft.x || this.y < topleft.y) return false;\n        if (this.x > bottomright.x || this.y > bottomright.y) return false;\n        return true;\n    }\n}\n\n\nclass Clickable {\n\n    constructor() {\n\n        this.children = Array();\n\n        this.onEnterHover = function () { return false; }\n        this.onLeaveHover = function () { return false; }\n        this.onClick = function () { return false; }\n        this.onDoubleClick = function () { return false; }\n        this.onMouseMove = function () { return false; }\n        \n\n        this.clickable_state = \"not_hovered\";\n\n        this.enable_func = () => true;\n    }\n\n    destroy() {\n        this.children = [];\n    }\n\n    addChild(clickable) {\n        this.children.push(clickable);\n    }\n\n    addVIPChild(clickable) {\n        this.children.unshift(clickable);\n    }\n\n    setEnableFunc(func) {\n        this.enable_func = func;\n    }\n\n    onUpdateDoubleClick(mousepos, mb) {\n        if(!this.enable_func()) return false;\n        if(this.is_inside(mousepos)) {\n            if(this.onDoubleClick())\n                return true;\n        }\n        else {\n            // Deselect?\n        }\n\n        for(let c of this.children) {\n            if(c.onUpdateDoubleClick(mousepos, mb)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    onUpdateClick(mousepos, mb) {\n        if(!this.enable_func()) return false;\n        if(this.is_inside(mousepos)) {\n            if(this.onClick())\n                return true;\n        }\n        else {\n            // Deselect?\n        }\n\n        for(let c of this.children) {\n            if(c.onUpdateClick(mousepos, mb)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    onUpdateMove(mousepos) {\n        if(!this.enable_func()) return false;\n        if (this.is_inside(mousepos)) {\n            this.onMouseMove(mousepos);\n            if (this.clickable_state == \"not_hovered\") {\n                this.clickable_state = \"hovered\";\n                if (this.onEnterHover(mousepos)) {\n                    return true;\n                }\n            }\n        }\n        else {\n            if (this.clickable_state == \"hovered\") {\n                this.clickable_state = \"not_hovered\";\n                if (this.onLeaveHover()) {\n                    return true;\n                }\n            }\n        }\n        // Else pass to children\n        for (let c of this.children) {\n            if (c.onUpdateMove(mousepos)) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    is_inside(pos) {\n        // Abstract\n        console.log(\"Abstract function called (is_inside)\");\n        return false\n    }\n\n    setOnEnterHover(func) {\n        this.onEnterHover = func;\n    }\n\n    setOnLeaveHover(func) {\n        this.onLeaveHover = func;\n    }\n\n    setOnClick(func) {\n        this.onClick = func;\n    }\n\n    setOnDoubleClick(func) {\n        this.onDoubleClick = func;\n    }\n\n    setOnMouseMove(func) {\n        this.onMouseMove = func;\n    }\n\n}\n\nclass SubWindow extends Clickable {\n    constructor(ctx, x, y, width, height) {\n        super();\n\n        this.ctx = ctx;\n        this.topleft = new Pos(x, y);\n        this.targetwidth = width;\n        this.targetheight = height;\n        this._sizetrans = 0;\n\n        this.subwindow_trans_change = 10;\n\n        this.subwindow_popped_out = false;\n\n        this.layout = null;\n\n        this.background_color = \"white\"; // Set to \"transparent\" if no background is requested\n    }\n\n    setLayout(layout) {\n        this.layout = layout;\n        return this;\n    }\n\n    width() {\n        return this.targetwidth * this._sizetrans / 100.;\n    }\n\n    height() {\n        return this.targetheight * this._sizetrans / 100.;\n    }\n\n    draw(topleft, state, ctx_override = null) {\n\n        if (topleft != null)\n            this.topleft = topleft;\n\n        let ctx = this.ctx;\n        if(ctx_override) {\n            ctx = ctx_override;\n        }\n\n        ctx.save();\n\n        ctx.beginPath();\n        ctx.strokeStyle = \"black\";\n        ctx.lineWidth = 2;\n        let oldfill = ctx.fillStyle;\n        ctx.fillStyle = this.background_color;\n        ctx.rect(this.topleft.x, this.topleft.y, this.width(), this.height());\n        ctx.fill();\n        ctx.stroke();\n        ctx.fillStyle = oldfill;\n\n        if (state == 'open') {\n            this._sizetrans += this.subwindow_trans_change;\n            if (this._sizetrans > 100.)\n                this._sizetrans = 100.;\n        } else if (state == 'collapsed') {\n            this._sizetrans -= this.subwindow_trans_change;\n            if (this._sizetrans < 0.)\n                this._sizetrans = 0.;\n        }\n\n        if(this.layout != null) {\n            if(this._sizetrans != 0)\n                this.layout.draw(ctx);\n        }\n\n        ctx.restore();\n    }\n\n    is_inside(pos) {\n        let offsetpos = pos.minus(this.topleft);\n\n        if (offsetpos.x < 0 || offsetpos.y < 0) return false;\n        if (offsetpos.x > this.width() || this.height()) return false;\n        return true;\n    }\n\n\n}\n\nclass Button extends Clickable {\n    constructor(ctx) {\n        super();\n        this.ctx = ctx;\n        this.state = 0;\n        this.update = 0;\n\n        this.color = \"orange\";\n        this.button_subwindow_state = \"collapsed\";\n        this.button_subwindow = new SubWindow(ctx, 0, 0, 600, 400);\n        this.addChild(this.button_subwindow);\n        this.is_locked_open = false;\n\n        this.topleft = new Pos(0,0);\n        this.size = new Pos(0,0);\n\n        this.button_image = null;\n    }\n\n    setDefaultDblClick() {\n        this.setOnDoubleClick(p => {\n            let newwin = new DiodeWindow(window);\n            newwin.setSenderData({ \n                className: this.constructor.name,\n                dataParams: this.dataparams\n            });\n            let subwin = newwin.open(\"renderer_dir/subwindow.html\", \"_blank\");\n            if(!subwin) {\n                console.log(\"Failed to open subwindow\");\n                alert(\"failed to open subwindow\");\n            }\n            \n            return true;\n        });\n    }\n\n    // Bypass the opening animation (for saving results)\n    setFullyOpen() {\n        this.button_subwindow_state = \"open\";\n        this.button_subwindow._sizetrans = 100.0;\n        this.is_locked_open = true;\n    }\n\n    // Set a button image from data_url, and resize to the given side length (the image must be square)\n    setButtonImage(data_url, side_len = 100) {\n        if(data_url == undefined) {\n            return this;\n        }\n        \n        this.button_image = new Image();\n        this.button_image.src = data_url;\n\n        // Apparently you cannot assume that the image element is ready synchronously (without onload, it could happen that an empty image is set instead)\n        this.button_image.onload = () => {\n\n            let c = document.createElement(\"canvas\");\n            let ctx = c.getContext(\"2d\");\n\n            c.width = side_len;\n            c.height = side_len;\n\n            ctx.drawImage(this.button_image, 0, 0, side_len, side_len);\n\n            // Now set the resized image to gain some performance.\n            this.button_image.src = c.toDataURL();\n        }\n    }\n\n    is_inside(pos) {\n        let offsetpos = pos.minus(this.topleft);\n\n        if (offsetpos.x < 0 || offsetpos.y < 0) return false;\n        if (offsetpos.x > this.size.x || offsetpos.y > this.size.y) return false;\n        return true;\n    }\n\n    draw(topleft, size) {\n        this.update++;\n        let now = new Date();\n        let ctx = this.ctx;\n\n        this.topleft = topleft\n        this.size = size\n\n        // Draw the window first (this way, the button is not occluded)\n        this.button_subwindow.draw(topleft, this.button_subwindow_state);\n        ctx.save();\n\n        ctx.beginPath();\n        // Draw the rect\n        if(this.button_image == null) {\n            if (this.state == 0) {\n            \n                let cfseg = 2 * Math.PI / 1000.;\n                let mid = size.x / 2;\n                let fac = now.getMilliseconds();\n                let xval = Math.cos(cfseg * fac) * mid;\n                let yval = Math.sin(cfseg * fac) * mid;\n\n\n                let grad = ctx.createLinearGradient(topleft.x + mid + xval, topleft.y + mid + yval, topleft.x + mid - xval, topleft.y + mid - yval);\n                grad.addColorStop(0, this.color);\n                grad.addColorStop(1, \"white\");\n                ctx.fillStyle = grad;\n                \n            }\n\n            ctx.strokeStyle = \"#000000\";\n            ctx.lineWidth = 2;\n            ctx.rect(topleft.x, topleft.y, size.x, size.y);\n            ctx.stroke();\n            if (this.state == 0) {\n                ctx.fill();\n            }\n        }\n        else {\n            ctx.drawImage(this.button_image, topleft.x, topleft.y, size.x, size.y);\n            ctx.strokeStyle = \"#000000\";\n            ctx.lineWidth = 2;\n            ctx.rect(topleft.x, topleft.y, size.x, size.y);\n            ctx.stroke();\n        }\n\n        ctx.restore();\n\n        topleft = null;\n        size = null;\n        now = null;\n\n    }\n\n\n}\n\n// Class to specify where which elements are located\nclass Layout {\n    constructor(subwindow) {\n        this.parent = subwindow;\n        this._layout = {};\n        this.databinding = null;\n        let _this = this;\n        this._layout_clickable = new class extends Clickable {\n            is_inside(pos) {\n                for(let x of Object.keys(_this._layout)) {\n                    let val = _this._layout[x];\n                    let realsize = new Pos(_this.parent.width() * val.size.x / 100.0, _this.parent.height() * val.size.y / 100.0);\n                    let realtopleft = _this.parent.topleft.plus(val.topleft.times(new Pos(_this.parent.width() / 100.0, _this.parent.height() / 100.0)));\n\n                    let inside = realtopleft.x < pos.x && pos.x < (realtopleft.x + realsize.x) && realtopleft.y < pos.y && pos.y < (realtopleft.y + realsize.y);\n                    let has_handlers = true;\n                    if(inside && has_handlers) {\n                        this._tmp_hovered = x;\n                        this._mouse_pos = pos;\n                        return true;\n                    }\n                }\n                delete this._tmp_hovered;\n                return false;\n            }\n        }\n\n        this._layout_clickable.setOnClick(() => {\n            let target = this._layout_clickable._tmp_hovered;\n            let val = this._layout[target];\n\n            let realsize = new Pos(this.parent.width() * val.size.x / 100.0, this.parent.height() * val.size.y / 100.0);\n            let realtopleft = this.parent.topleft.plus(val.topleft.times(new Pos(this.parent.width() / 100.0, this.parent.height() / 100.0)));\n\n            let pos = this._layout_clickable._mouse_pos;\n\n            // check if the \"information-button\" is clicked\n            {\n                let dv = this.getCurrentDataView(target);\n                if(dv.information_button_pos != null) {\n                    if(dv.information_button_pos.x < pos.x && dv.information_button_pos.y < pos.y) {\n                        if(dv.information_button_pos.x + dv.information_button_size.x > pos.x && dv.information_button_pos.y + dv.information_button_size.y > pos.y) {\n                            console.log(\"Information Button clicked!\");\n                            dv.showOptimizationHints();\n                            return true;\n                        }\n                    }\n                }\n            }\n\n            let left = realtopleft.x + realsize.x - 20;\n            let right = realtopleft.x + realsize.x;\n            let top = realtopleft.y;\n            let bottom = realtopleft.y + 20;\n            if(val.is_multiview) {\n                if(left < pos.x && pos.x < right && top < pos.y && pos.y < bottom) {\n                    // Multiview switcher pressed\n                    val.multiview_selector = (val.multiview_selector + 1) % val.dataviews.length;\n                    return true;\n                }\n                else {\n                }\n            }\n            \n            return false; // Pass the event to the next handler\n            \n\n        });\n\n        this._layout_clickable.setOnMouseMove((pos) => {\n            // We want to know the position and which element is hovered so \n            // that we can forward events\n            let target = this._layout_clickable._tmp_hovered;\n            if(target) {\n                let val = this.getCurrentDataView(target);\n                val.mouseInside(pos);\n                return true;\n            }\n            else {\n            }\n        });\n\n        this._layout_clickable.setOnDoubleClick(() => {\n            let target = this._layout_clickable._tmp_hovered;\n            let val = this._layout[target];\n\n            let realsize = new Pos(this.parent.width() * val.size.x / 100.0, this.parent.height() * val.size.y / 100.0);\n            let realtopleft = this.parent.topleft.plus(val.topleft.times(new Pos(this.parent.width() / 100.0, this.parent.height() / 100.0)));\n\n            let pos = this._layout_clickable._mouse_pos;\n\n            let left = realtopleft.x + realsize.x - 20;\n            let right = realtopleft.x + realsize.x;\n            let top = realtopleft.y;\n            let bottom = realtopleft.y + 20;\n            if(val.is_multiview) {\n                if(left < pos.x && pos.x < right && top < pos.y && pos.y < bottom) {\n                    return false;\n                }\n                else {\n                    // Trigger the options for the underlying dataview\n                    let dv = val.dataviews[val.multiview_selector];\n\n                    dv.openSettingsWindow();\n                    return true;\n                }\n            }\n            else {\n                // Trigger the options for the underlying dataview\n                let dv = val.dataview;\n\n                dv.openSettingsWindow();\n\n                return true;\n            }\n            \n            return false; // Not reached, but leave here (in case the handling of above cases changes)\n            \n\n        });\n\n        subwindow.addVIPChild(this._layout_clickable);\n    }\n\n    setEventHandlers(click, enter, leave) {\n        this._layout_clickable.setOnClick(click);\n        this._layout_clickable.setOnEnterHover(enter);\n        this._layout_clickable.setOnLeaveHover(leave);\n    }\n\n    getCurrentDataView(rect_name) {\n        let val = this._layout[rect_name];\n        if(val.is_multiview) {\n            return val.dataviews[val.multiview_selector];\n        }\n        else {\n            return val.dataview;\n        }\n    }\n\n    getLayoutObject() {\n        let ret = {};\n        for(let k of Object.keys(this._layout)) {\n            if(k == 'dataview') continue;\n            if(k == 'dataviews') continue;\n            ret[k] = this._layout[k];\n        }\n        return this._layout;\n    }\n\n    // Sizes all must be in percentages.\n    setRect(name, topleft, size, dataview) {\n        this._layout[name] = {};\n        this._layout[name].topleft = topleft;\n        this._layout[name].size = size;\n        this._layout[name].dataview = dataview;\n    }\n\n    setMultiviewRect(name, topleft, size, dataview_array) {\n        if(dataview_array.length < 1) {\n            alert(\"You cannot set a multiview with no contents!\");\n            return;\n        }\n        this._layout[name] = {};\n        this._layout[name].topleft = topleft;\n        this._layout[name].size = size;\n        this._layout[name].dataviews = dataview_array;\n        this._layout[name].is_multiview = true;\n        this._layout[name].multiview_selector = dataview_array.length - 1;\n\n        // Set enable functions so that charts that are hidden behind others \n        // don't get the events propagated\n        for(let i = 0; i < dataview_array.length; ++i) {\n            let x = dataview_array[i];\n            if(x instanceof RU_DataViewBarGraph) {\n                x.dvbg_clickable.setEnableFunc(() => {\n                    return this._layout[name].multiview_selector == i;\n                });\n            }\n        }\n    }\n\n    setDataBinding(db) {\n        this.databinding = db;\n    }\n\n    draw(ctx) {\n        let databinding = this.databinding;\n        for(let x of Object.keys(this._layout)) {\n            let val = this._layout[x];\n\n            let realsize = new Pos(this.parent.width() * val.size.x / 100.0, this.parent.height() * val.size.y / 100.0);\n            let realtopleft = this.parent.topleft.plus(val.topleft.times(new Pos(this.parent.width() / 100.0, this.parent.height() / 100.0)));\n\n            let dv = null;\n            if(val.is_multiview) {\n                dv = val.dataviews[val.multiview_selector];\n            }\n            else {\n                dv = val.dataview;\n            }\n            if(dv == undefined) {\n                console.log(\"Undefined dv for key \" + x);\n            }\n            dv.setRect(realtopleft, realsize);\n\n            if(val.is_multiview) {\n                dv.draw(ctx, databinding[x][val.multiview_selector], this.parent._sizetrans / 100.);\n                ctx.save();\n                ctx.beginPath();\n                ctx.fillStyle=\"lime\";\n                ctx.rect(realtopleft.x + realsize.x - 20, realtopleft.y, 20, 20);\n                ctx.fill();\n                ctx.restore();\n            }\n            else {\n                dv.draw(ctx, databinding[x], this.parent._sizetrans / 100.);\n            }\n        }\n    }\n}\n\n// Class holding data\nclass DataBlock {\n    constructor(data, type) {\n        this.setData(data, type);\n    }\n    setData(data, type) {\n        this.data = data;\n        this.datatype = type;\n\n        return this;\n    }\n}\n\n// Class providing an interface to plug some graphs into.\nclass RU_DataView {\n    constructor() {\n        this.topleft = null;\n        this.size = null;\n        this.analyze = x => x;\n        this.color_scaling_func = x => x;\n\n        this.update_data = true;\n\n        /* String that contains an html markup with general information about \n           the implications of this dataview (i.e. how to interpret the \n           displayed results) */\n        this.information_html_string = \"\";\n\n        this.information_overlay_age = 0;\n        this.information_overlay_alpha = 0.0;\n        this.information_overlay_timer = null;\n\n        this.information_button_pos = null;\n        this.information_button_size = null;\n        this.optimization_hint_path = \"error\";\n    }\n\n    setInformationFilePath(path) {\n        this.optimization_hint_path = path;\n\n        return this;\n    }\n\n    showOptimizationHints() {\n        \n        console.log(\"Opening \" + this.optimization_hint_path);\n        let win = window.open(this.optimization_hint_path, \"\", \"width=800,height=600\");\n        \n        ObjectHelper.assert(\"win valid\", win != null);\n\n        return this;\n    }\n\n    mouseInside(pos) {\n        ObjectHelper.assert(\"pos valid\", pos);\n        ObjectHelper.assert(\"topleft valid\", this.topleft);\n        ObjectHelper.assert(\"size valid\", this.size);\n        \n        let diff = pos.minus(this.topleft.plus(new Pos(this.size.x / 2, 0)));\n\n        let dist = diff.dist();\n\n        if(dist <= 30) {\n            this.information_overlay_age = -1;\n            window.clearTimeout(this.information_overlay_timer);\n            this.information_overlay_timer = window.setTimeout(() => this.information_overlay_age = 0,  3000);\n        }\n        else {\n            this.information_overlay_age = 0;\n        }\n\n        if(dist <= 10) {\n            this.information_overlay_alpha = 1.0;\n        }\n        else {\n            // Scale squared\n            let d = (dist) / 10;\n            this.information_overlay_alpha = 1.0 / (d);\n        }\n    }\n\n    // Draw an overlay (containing the info-button at least). This function \n    // should be called by all subclasses after drawing.\n    drawOverlay(ctx, scale = 1.0) {\n\n        if(this.information_overlay_age >= 0) {\n\n            ++this.information_overlay_age;\n            if(this.information_overlay_age > 1) {\n                this.information_overlay_alpha -= 0.05;\n                if(this.information_overlay_alpha < 0) {\n                    this.information_overlay_alpha = 0;\n                }\n                this.information_overlay_age = 0; \n            }\n        }\n\n        let alpha = 0.9; // Transparency value\n        alpha *= this.information_overlay_alpha;\n        let subalpha = 1.0;\n        subalpha *= this.information_overlay_alpha;\n        \n        let information_sign = \"\\u{1F6C8}\"; // This is the circled information icon.\n        let base_fontsize = 18;\n        ctx.save();\n        ctx.beginPath();\n\n        // Setup font\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"top\";\n        ctx.font = Math.round(base_fontsize * scale) + \"px sans-serif\";\n\n        // Get the textwidth\n        let textwidth = ctx.measureText(information_sign).width;\n        let textheight = textwidth;\n        // Draw background first\n        ctx.fillStyle = \"rgba(128, 128, 128, \" + alpha + \")\";\n        ctx.strokeStyle = \"rgba(128, 128, 128, \" + subalpha + \")\";\n        this.information_button_pos = new Pos(this.topleft.x + (this.size.x - textwidth) * scale / 2 - textwidth, this.topleft.y);\n        this.information_button_size = new Pos(textwidth * 3, textheight * 1.1);\n        ctx.rect(this.information_button_pos.x, this.information_button_pos.y, this.information_button_size.x, this.information_button_size.y);\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.beginPath();\n        \n        alpha = 3.0 * this.information_overlay_alpha; \n        ctx.fillStyle = \"rgba(0, 0, 255, \" + alpha + \")\";\n        let center_x = this.topleft.x + this.size.x * scale / 2;\n        ctx.fillText(information_sign, center_x, this.topleft.y);\n\n\n        ctx.restore();\n    }\n\n    // Gets the settings (data analysis function and subclass-specific settings)\n    getSettingsDict() {\n        let ret = {\n            \"analysis_func\": {\n                type: \"code\",\n                value: this.analyze.toString(),\n                description: \"#TODO\"\n            }\n        };\n\n        return ret;\n    }\n\n    setSettingsDict(dict) {\n        let func = eval(dict['analysis_func'].value.toString());\n        ObjectHelper.assert(\"Object type function\", func instanceof Function);\n        this.setDataAnalysisFunction(func);\n        this.update_data = true; // Trigger an update request\n    }\n\n    setInformationHTMLString(str) {\n        this.information_html_string = str;\n        return this;\n    }\n\n    getInformationHTMLString() {\n        return this.information_html_string;\n    }\n\n    openSettingsWindow() {\n        let sw = new DiodeWindow(window);\n        // Set the callback function for user-defined data\n        sw.setCallback(x => {\n            \n            if(x.type == \"ClientOpened\") {\n                sw.reply(x.source, x.origin, {\n                    type: \"settings-data\",\n                    data: this.getSettingsDict()\n                });\n            }\n            else if(x.type == \"save-settings\") {\n                this.setSettingsDict(x.data);\n                console.log(\"Applied new settings\");\n            }\n            else {\n                console.log(\"Undefined operation reached! \" + JSON.stringify(x));\n            }\n        });\n        let cw = sw.open(\"DataViewSettings.html\", \"_blank\");\n        if(!cw) {\n            alert(\"Failed to open child window...\");\n        }\n    }\n\n    setTitle(title) {\n        // Abstract\n        return this;\n    }\n    draw(ctx, datablock, scale) {\n        console.log(\"Abstract function called\");\n    }\n\n    getSendableObject() {\n        return this;\n    }\n\n    fromSendableObject(object) {\n        console.log(\"Abstract function fromSendableObject() called\");\n        return this;\n    }\n\n    setDataAnalysisFunction(func) {\n        this.analyze = func;\n        return this;\n    }\n\n    setRect(topleft, size) {\n        this.topleft = topleft;\n        this.size = size;\n        return this;\n    }\n    \n    drawRect(ctx) {\n        ctx.beginPath();\n        ctx.rect(this.topleft.x, this.topleft.y, this.size.x, this.size.y);\n        ctx.stroke();\n    }\n}\n\n// Class to draw text\nclass RU_DataViewText extends RU_DataView {\n    constructor() {\n        super();\n    }\n\n    fromSendableObject(obj) {\n        // We don't need to do anything here because the data is in the datablock...\n        return this;\n    }\n    draw(ctx, datablock, scale) {\n\n        if(scale == 0.)\n            return;\n\n\n        ctx.save();\n\n        ctx.beginPath();\n\n\n        ctx.font = Math.round(scale * datablock.data.fontsize).toString() + \"px sans-serif\";\n        ctx.fillStyle = datablock.data.color;\n        ctx.textAlign=datablock.data.align;\n        let textheight = ctx.measureText('M').width;\n        ctx.fillText(datablock.data.text, this.topleft.x + this.size.x / 2, this.topleft.y + textheight);\n\n        ctx.restore();\n\n    }\n\n}\n\n// Class to bar graphs (using chart.js)\nclass RU_DataViewBarGraph extends RU_DataView {\n    constructor(optstruct = null) {\n        super();\n\n        let typevar = \"bar\";\n        let xAxisVar = undefined;\n        let yAxisVar = undefined;\n\n        this.dvbg_chart_data = null;\n\n        if(optstruct != null) {\n            if(optstruct.type != undefined) {\n                typevar = optstruct.type;\n            }\n            if(optstruct.xAxes != undefined) {\n                xAxisVar = optstruct.xAxes;\n            }\n            if(optstruct.yAxes != undefined) {\n                yAxisVar = optstruct.yAxes;\n            }\n        }\n\n        // We create a new canvas just for the chart (mainly to avoid \n        // potential trouble with different update handlers)\n        this.dvbg_canvas_scaler = document.createElement(\"div\");\n        this.dvbg_canvas = document.createElement(\"canvas\");\n        this.dvbg_ctx = this.dvbg_canvas.getContext(\"2d\");\n\n        this.dvbg_canvas_scaler.appendChild(this.dvbg_canvas);\n        document.body.appendChild(this.dvbg_canvas_scaler);\n\n        let chartsettings = {\n            type: typevar,\n            data: this.analyze(null),\n            options: {\n                responsive: true,\n                title: {\n                    display: true,\n                    text: \"Chart test...\"\n                },\n                tooltips: {\n                    mode: 'index',\n                    intersect: true\n                },\n                scales: {\n                    \n                }\n            }\n        };\n\n        if(xAxisVar != undefined) {\n            chartsettings.options.scales.xAxes = xAxisVar;\n        }\n        if(yAxisVar != undefined) {\n            chartsettings.options.scales.yAxes = yAxisVar;\n        }\n\n        this.dvbg_chart = new Chart(this.dvbg_ctx, chartsettings);\n\n        this.dvbg_canvas_scaler.style.visibility = \"hidden\";\n        this.dvbg_canvas_scaler.style.position = \"fixed\";\n\n        // A Clickable instance, for forwarding events.\n        let parent_this = this;\n        this.dvbg_clickable = new class extends Clickable {\n            constructor() {\n                super();\n            }\n\n            is_inside(pos) {\n                if(parent_this.topleft == null) return false;\n                return (parent_this.topleft.x < pos.x && pos.x < parent_this.topleft.x + parent_this.size.x) && (parent_this.topleft.y < pos.y && pos.y < parent_this.topleft.y + parent_this.size.y);\n            }\n\n            onUpdateMove(pos) {\n                if(!this.enable_func()) return false;\n                if(!this.is_inside(pos))\n                    return false;\n                // We have to translate the event to the target.\n                let rect = parent_this.dvbg_canvas.getBoundingClientRect();\n                let event = new MouseEvent(\"mousemove\", {\n                    offsetX: pos.x,\n                    offsetY: pos.y,\n                    clientX: rect.left + pos.x - parent_this.topleft.x,\n                    clientY: rect.top + pos.y - parent_this.topleft.y\n                });\n\n                // Now pass to other canvas\n                parent_this.dvbg_canvas.dispatchEvent(event);\n            }\n\n            onUpdateClick(pos) {\n                if(!this.enable_func()) return false;\n                if(!this.is_inside(pos))\n                    return false;\n                // We have to translate the event to the target.\n                let rect = parent_this.dvbg_canvas.getBoundingClientRect();\n                let event = new MouseEvent(\"click\", {\n                    offsetX: pos.x,\n                    offsetY: pos.y,\n                    clientX: rect.left + pos.x - parent_this.topleft.x,\n                    clientY: rect.top + pos.y - parent_this.topleft.y\n                });\n\n                // Now pass to other canvas\n                parent_this.dvbg_canvas.dispatchEvent(event);\n            }\n        }\n    }\n\n    getSettingsDict() {\n        let basedict = super.getSettingsDict();\n\n        // Collect the information\n        let xAxes = this.dvbg_chart.options.scales.xAxes;\n        let yAxes = this.dvbg_chart.options.scales.yAxes;\n        let display_xAxes = xAxes.some(x => x == undefined || x.display);\n        let display_yAxes = yAxes.some(x => x == undefined || x.display);\n\n        let display_legend = this.dvbg_chart.options.legend.display;\n\n        // Now we can append to the basedict\n        basedict['graph_general_options'] = {\n            type: \"group\", // Specify subgroup\n            value: {\n                // new subgroup of all graph options\n                \"display_horizonal_axis\": {\n                    type: \"bool\",\n                    value: display_xAxes,\n                    description: \"Display the horizontal axes\"\n                },\n                \"display_vertical_axis\": {\n                    type: \"bool\",\n                    value: display_yAxes,\n                    description: \"Display the vertical axes\"\n                },\n                \"display_legend\": {\n                    type: \"bool\",\n                    value: display_legend,\n                    description: \"Display the legend\"\n                }\n            },\n            description: \"General graph display options\"\n\n        };\n\n        return basedict;\n    }\n\n    setSettingsDict(dict) {\n        super.setSettingsDict(dict);\n\n        // Get the desired settings\n        let general_graph_options = dict['graph_general_options'].value;\n        let dha = general_graph_options['display_horizonal_axis'].value;\n        let dva = general_graph_options['display_vertical_axis'].value;\n        let dl = general_graph_options['display_legend'].value;\n\n        // Apply the settings\n        this.dvbg_chart.options.scales.xAxes.forEach(x => x.display = dha);\n        this.dvbg_chart.options.scales.yAxes.forEach(x => x.display = dva);\n\n        this.dvbg_chart.options.legend.display = dl;\n\n        this.dvbg_chart.update();\n    }\n\n    getSendableObject() {\n        let ret = {};\n\n        ret.chartsettings = this.dvbg_chart.options;\n        ret.analyze = this.analyze.toString();\n\n        return ret;\n    }\n\n    fromSendableObject(obj) {\n        this.setDataAnalysisFunction(new Function(obj.analyze));\n        return this;\n    }\n\n\n    // Provides an array of some pre-selected colors.\n    static colorList() {\n        let ret = new Array();\n\n        //ret.push(\"red\");\n        ret.push(\"rgba(255, 0, 0, 0.7)\");\n        //ret.push(\"green\");\n        ret.push(\"rgba(0, 128, 0, 0.7)\");\n        //ret.push(\"blue\");\n        ret.push(\"rgba(0, 0, 255, 0.7)\");\n        //ret.push(\"#E8ADAA\"); // rose\n        ret.push(\"rgba(232, 173, 170, 0.7)\");\n        //ret.push(\"cyan\");\n        ret.push(\"rgba(0, 255, 255, 0.7)\");\n        //ret.push(\"black\");\n        ret.push(\"rgba(0, 0, 0, 0.7)\");\n        //ret.push(\"aqua\");\n        ret.push(\"rgba(16, 255, 255, 0.7)\");\n        //ret.push(\"lime\");\n        ret.push(\"rgba(0, 255, 0, 0.7)\");\n        //ret.push(\"fuchsia\");\n        ret.push(\"rgba(255, 0, 255, 0.7)\");\n        //ret.push(\"navy\");\n        ret.push(\"rgba(0, 0, 128, 0.7)\");\n        //ret.push(\"purple\");\n        ret.push(\"rgba(128, 0, 128, 0.7)\");\n        //ret.push(\"gray\");\n        ret.push(\"rgba(128, 128, 128, 0.7)\");\n\n        return ret;\n    }\n\n    linkMouse(parent) {\n        parent.addChild(this.dvbg_clickable);\n        return this;\n    }\n\n    changeGraphOptions(func) {\n        func(this.dvbg_chart);\n        return this;\n    }\n\n    draw(ctx, datablock, scale) {\n        if(scale == 0.)\n            return;\n\n        let update = this.prev_scale != scale;\n        this.prev_scale = scale;\n        this.dvbg_canvas_scaler.style.height = Math.max(this.size.y * scale, 1) + \"px\";\n        this.dvbg_canvas_scaler.style.width = Math.max(this.size.x * scale, 1) + \"px\";\n\n\n        if(this.update_data)\n        {\n            this.dvbg_chart_data = this.analyze(datablock);\n            let datacpy = JSON.parse(JSON.stringify(this.dvbg_chart_data)); \n            this.dvbg_chart.data = datacpy;\n            this.update_data = false;\n            this.dvbg_chart.update();\n        }\n\n        if(datablock == this.dvbg_cached_data) {\n            // no update needed\n        }\n        else {\n            this.dvbg_cached_data = datablock;\n\n            this.dvbg_chart.update();\n        }\n\n        if(update) {\n            // Force refresh\n            this.dvbg_chart.resize();\n        }\n        \n        \n        ctx.save();\n\n        ctx.beginPath();\n\n        // Blit this onto our canvas\n        ctx.drawImage(this.dvbg_canvas, this.topleft.x, this.topleft.y, this.size.x, this.size.y);\n\n        ctx.restore();\n\n    }\n\n}\n\nclass RU_DataViewNumberBlock extends RU_DataView {\n    constructor() {\n        super();\n\n        this.opt = {\n            display_title: true,\n            text_align: \"center\",\n            draw_bar: undefined, // Defines where to draw a bar. Options: \"left\", \"right\", \"top\", \"bottom\" or any combination thereof\n            padding: undefined\n        };\n\n        this.dvnb_cached_data = undefined;\n    }\n\n    setTitle(title) {\n        this.title = title;\n        return this;\n    }\n\n    setOptions(opt) {\n        this.opt = opt;\n        return this;\n    }\n\n    setStringFormatter(func) {\n        this.stringformatter = func;\n    }\n\n    static percent2color(percent) {\n        let step = 255 / 100.;\n\n        let val = Math.floor(step * percent) * 2;\n\n        let ret = 0;\n\n        if(percent <= 50) {\n            ret = 0x0000ff00 + 0x00010000 * val;\n        }\n        else {\n            ret = 0x00ff0000 + 0x00000100 * Math.round(255.0 - val);\n        }\n        return '#' + ret.toString(16).padStart(6, '0');\n    }\n    setColorScaling(func) {\n        this.color_scaling_func = func;\n        return this;\n    }\n    draw(ctx, datablock, scale) {\n\n        if(this.update_data)\n        {\n            this.dvnb_cached_data = this.analyze(datablock);\n            this.update_data = false;\n        }\n\n        if(scale == 0.)\n            return; //Nothing to do if we are size 0\n        \n        ctx.save();\n\n        ctx.beginPath();\n        ctx.textAlign=\"center\";\n        ctx.font= Math.round(16 * scale).toString() + \"px sans-serif\";\n        \n        let textheight = ctx.measureText('M').width; // Approximating text height by width of M (which should be about square)\n        let x = this.topleft.x + this.size.x / 2;\n        let y = this.topleft.y + textheight;\n\n        if(this.opt.display_title) {\n            ctx.fillText(this.title, x, y); // Set the title\n        }\n\n        // We'll only be interested in balance_max.\n        let p = this.dvnb_cached_data;\n\n        ctx.beginPath();\n        ctx.textAlign = this.opt.text_align;\n        ctx.font=\"bold \" + (50 * scale).toString() + \"px sans-serif\";\n        ctx.fillStyle=RU_DataViewNumberBlock.percent2color(this.color_scaling_func(p));\n        textheight = ctx.measureText('M').width;\n        ctx.textBaseline = \"middle\";\n\n        let left_pad = 0;\n        if(this.opt.padding) {\n            if(this.opt.padding.left) {\n                left_pad = this.opt.padding.left;\n            }\n        }\n        if(this.opt.text_align == \"center\")\n            ctx.fillText(String(p) + \"%\", x + left_pad, this.topleft.y + this.size.y / 2);\n        else if(this.opt.text_align == \"left\")\n            ctx.fillText(String(p) + \"%\", this.topleft.x + left_pad, this.topleft.y + this.size.y / 2);\n        \n        \n        if(this.opt.draw_bar) {\n            for(x of this.opt.draw_bar) {\n                if(x == \"left\") {\n                    ctx.beginPath();\n                    ctx.strokeStyle=\"black\";\n                    ctx.lineWidth = 3;\n                    ctx.moveTo(this.topleft.x, this.topleft.y);\n                    ctx.lineTo(this.topleft.x, this.topleft.y + this.size.y * scale);\n                    ctx.stroke();\n                }\n                else {\n                    console.log(\"#TODO: Implement this other DataViewNumberBlock bar: \" + x);\n                }\n            }\n        }\n\n        this.drawOverlay(ctx, scale);\n\n        ctx.restore();\n    }\n}\n\n// Class to suggest actions based on input values\nclass RU_DataViewSuggestedActionBlock extends RU_DataView {\n    constructor() {\n        super();\n\n        this.opt = {\n            \n        };\n\n        let parent_this = this;\n        this.dvsa_clickable = new class extends Clickable {\n            constructor() {\n                super();\n            }\n\n            is_inside(pos) {\n                if(parent_this.topleft == null) return false;\n                return (parent_this.topleft.x < pos.x && pos.x < parent_this.topleft.x + parent_this.size.x) && (parent_this.topleft.y < pos.y && pos.y < parent_this.topleft.y + parent_this.size.y);\n            }\n\n            getButtonIndex(pos) {\n                // Wrapper to look up the index\n                let tl_x = parent_this.topleft.x;\n                let tl_y = parent_this.topleft.y;\n\n                let size_x = parent_this.size.x;\n                let size_y = parent_this.size.y;\n\n                let hp = parent_this.heightpadding;\n\n                let local_pos = {x: pos.x - tl_x, y: pos.y - tl_y};\n\n                if(local_pos.x < 0 || local_pos.x > size_x) return -1;\n                if(local_pos.y < 0 || local_pos.y > size_y) return -1;\n\n                // We can just divide through ellipseheight (approximated by a rect) + heightpadding\n                let eachheight = parent_this.textheight + parent_this.heightpadding;\n\n                let index = Math.floor(local_pos.y / eachheight);\n\n                return index;\n            }\n\n            onUpdateMove(pos) {\n                if(!this.enable_func()) return false;\n                if(!this.is_inside(pos))\n                {\n                    parent_this.dvsa_button_hovered = -1;\n                    return false;\n                }\n                \n                let index = this.getButtonIndex(pos);\n                // Pass to parent\n                parent_this.buttonHovered(index);\n\n                // No children here\n                return true;\n            }\n\n            onUpdateClick(pos) {\n                if(!this.enable_func()) return false;\n                if(!this.is_inside(pos))\n                    return false;\n                \n                return true;\n            }\n        };\n\n        this.hints = {}; // Dict of condition => hint text\n\n        this.dvsab_cached_data = [];\n\n        this.heightpadding = 20;\n\n        //this.analyze() expected return value:\n        //list of condition strings that evaluated to 'true' (those will be displayed)\n    }\n\n    buttonHovered(index) {\n        this.dvsa_button_hovered = index;\n    }\n\n    setTitle(title) {\n        this.title = title;\n        return this;\n    }\n\n    setHint(cond, text) {\n        this.hints[cond] = text;\n        return this;\n    }\n\n    setOptions(opt) {\n        this.opt = opt;\n        return this;\n    }\n\n    setStringFormatter(func) {\n        this.stringformatter = func;\n    }\n\n    linkMouse(parent) {\n        parent.addChild(this.dvsa_clickable);\n        return this;\n    }\n\n    \n    draw(ctx, datablock, scale) {\n\n        if(this.update_data)\n        {\n            this.dvsab_cached_data = this.analyze(datablock);\n            ObjectHelper.assert(\"Data evaluated to undefined\", this.dvsab_cached_data != undefined);\n            this.update_data = false;\n        }\n\n        if(scale == 0.)\n            return; //Nothing to do if we are size 0\n        \n        ctx.save();\n\n\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        ctx.strokeStyle = \"black\";\n        ctx.lineWidth = 3;\n\n\n        ctx.font = Math.round(12 * scale).toString() + \"px sans-serif\";\n\n\n        let textheight = ctx.measureText(\"M\").width; // Approximate height by width\n        this.textheight = textheight;\n\n        let xpos = this.topleft.x + this.size.x / 2.0;\n        let ypos = this.topleft.y + textheight;\n\n        let i = 0;\n        for(let x of this.dvsab_cached_data) {\n            let display_text = this.hints[x];\n\n            ctx.beginPath();\n            if(i == this.dvsa_button_hovered) {\n                ctx.strokeStyle = \"red\";\n            }\n            else {\n                ctx.strokeStyle = \"black\";\n            }\n            ctx.fillText(display_text, xpos, ypos);\n            ctx.ellipse(xpos, ypos, this.size.x / 2.0, (textheight + this.heightpadding / 2.0) / 2.0, 0.0, 0.0, 2 * Math.PI);\n            ctx.stroke();\n\n\n            ypos += (textheight + this.heightpadding) * scale;\n            ++i;\n        }\n\n        \n        this.drawOverlay(ctx, scale);\n\n        ctx.restore();\n    }\n}\n\n\n// This is a text-based \"form-layout\"-style dataview\nclass RU_DataViewFormLayout extends RU_DataView {\n    constructor() {\n        super();\n    }\n\n    draw(ctx, datablock_in, scale) {\n\n        if(scale == 0.) return;\n\n        ctx.save();\n        ctx.beginPath();\n\n        // Transform to drawable\n        let datablock = this.analyze(datablock_in);\n\n\n        let fontsize = datablock.fontsize;\n        let form_entries = datablock.rows;\n\n        let padding = datablock.padding;\n\n        let realfontsize = Math.round(fontsize * scale);\n\n        ctx.font = realfontsize + \"px sans-serif\";\n\n        // Determine the max width of the left side\n        let name_width = max_func(form_entries.map(x => x.title), x => ctx.measureText(x + \": \").width);\n\n        let text_height = ctx.measureText('M').width;\n        let line_spacing = 10;\n\n        // Determine the length of the right side (to allow for alignment)\n        let val_width = max_func(form_entries.map(x => x.val), x => ctx.measureText(x).width);\n\n        let i = 0;\n        for(let line of form_entries) {\n            let name = line.title;\n            let val = line.value;\n\n            // Draw title\n            ctx.beginPath();\n            ctx.textAlign = \"left\";\n            ctx.fillText(name, this.topleft.x + padding.left * scale, this.topleft.y + padding.top + (i+1) * (text_height + line_spacing));\n\n            // Align the text on the right side\n            ctx.beginPath();\n            ctx.textAlign = \"right\";\n            // Draw value\n            ctx.fillText(val, this.topleft.x + (this.size.x - padding.right) * scale, this.topleft.y + padding.top + (i+1) * (text_height + line_spacing));\n\n            i++;\n        }\n        ctx.restore();\n    }\n}\n\nclass Bracket extends Clickable {\n    constructor(ctx) {\n        super();\n        this.ctx = ctx;\n        this.buttons = [];\n\n        this.start = new Pos(0, 0);\n        this.end = new Pos(0, 0);\n        this.offset = 0;\n        this.startoffset = 0;\n\n        this.listeners = [];\n\n        this.button_alpha = 1.;\n        this.bracket_alpha = 1.;\n    }\n\n    hide() {\n        this.button_alpha = 0.;\n        this.bracket_alpha = 0.;\n    }\n\n    show(opacity = 1.0) {\n        this.button_alpha = opacity;\n        this.bracket_alpha = opacity;\n    }\n\n    setupEventListeners(canvas_draw_mgr=undefined) {\n        let canvas = this.ctx.canvas;\n\n        let mouseXtrans = x => x;\n        let mouseYtrans = y => y;\n\n        if(window.get_zoom != undefined) {\n            mouseXtrans = x => x / window.get_zoom();\n            mouseYtrans = y => y / window.get_zoom();\n        }\n\n        if(canvas_draw_mgr != undefined) {\n            mouseXtrans = x => canvas_draw_mgr.mapPixelToCoordsX(x);\n            mouseYtrans = y => canvas_draw_mgr.mapPixelToCoordsY(y);\n        }\n\n        let mm_lis = e => {\n            this.onUpdateMove(new Pos(mouseXtrans(e.offsetX), mouseYtrans(e.offsetY)));\n        };\n        let c_lis = e => {\n            this.onUpdateClick(new Pos(mouseXtrans(e.offsetX), mouseYtrans(e.offsetY)), e.button);\n        };\n        let dc_lis = e => {\n            this.onUpdateDoubleClick(new Pos(mouseXtrans(e.offsetX), mouseYtrans(e.offsetY)), e.button);\n        };\n\n        // Add all event listeners to an array (this allows for easier un-setting)\n        this.listeners.push(['mousemove', mm_lis]);\n        this.listeners.push(['click', c_lis]);\n        this.listeners.push(['dblclick', dc_lis]);\n\n        let ctx = this.ctx;\n        for(let lis of this.listeners) {\n            ctx.canvas.addEventListener(...lis);\n        }\n    }\n\n    destroy() {\n        super.destroy();\n\n        for(let lis of this.listeners) {\n            this.ctx.canvas.removeEventListener(...lis);\n        }\n\n        this.buttons = null;\n        this.start = null;\n        this.end = null;\n        this.ctx = null;\n    }\n\n    drawEx(start, end, offset, startoffset, animate, updatefunc) {\n        this.start = start;\n        this.end = end;\n        this.offset = offset;\n        this.startoffset = startoffset;\n        this.animate = animate;\n        this.updatefunc = updatefunc;\n\n        this.draw();\n    }\n\n    is_inside_buttons(pos) {\n        if(this.button_alpha == 0.) {\n            // Hidden buttons should not be clickable\n            return false;\n        }\n\n        let max_x = 0;\n        let max_y = 0;\n\n        for (let b of this.buttons) {\n            if(b == undefined) {\n                console.log(\"Undefined button!\");\n            }\n            else if(b.topleft == undefined) {\n                console.log(\"Undefined topleft\");\n            }\n            max_x = Math.max(b.topleft.x + b.size.x, max_x);\n            max_y = Math.max(b.topleft.y + b.size.y, max_y);\n        }\n\n        if (pos.inRect(this.start, new Pos(max_x, max_y))) {\n            return true;\n        }\n\n        return false;\n    }\n\n    bracket_clicked() {\n        if(this.button_alpha == 0.0) {\n            this.button_alpha = 1.0;\n        }\n        else {\n            this.button_alpha = 0.0;\n        }\n    }\n\n    is_inside_bracket(pos) {\n        const tol = 5;\n        if(pos.x < this.start.x + this.startoffset - tol || pos.x > this.start.x + this.offset + tol) {\n            return false;\n        }\n        if(pos.y < this.start.y - tol || pos.y > this.end.y + tol) {\n            console.log(\"outside y\");\n            return false;\n        }\n        \n        return true;\n    }\n\n    is_inside(pos) {\n        return this.is_inside_buttons(pos);\n    }\n\n    onUpdateClick(pos, mb) {\n        if(this.is_inside_bracket(pos, mb)) {\n            this.bracket_clicked();\n            return true;\n        }\n\n        if(this.button_alpha == 0.0) {\n            // Buttons are hidden, don't process events on them\n            return false;\n        }\n\n        return super.onUpdateClick(pos, mb);\n    }\n\n    onUpdateDoubleClick(pos, mb) {\n        if(this.is_inside_bracket(pos, mb)) {\n            this.bracket_clicked();\n            return true;\n        }\n\n        if(this.button_alpha == 0.0) {\n            // Buttons are hidden, don't process events on them\n            return false;\n        }\n\n        return super.onUpdateDoubleClick(pos, mb);\n    }\n\n    draw() {\n        let start = this.start;\n        let end = this.end;\n        let offset = this.offset;\n        let startoffset = this.startoffset;\n        let ctx = this.ctx;\n\n        if(this.animate && this.updatefunc == null)\n            ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n        let button_offset = 20;\n\n        ctx.save();\n        ctx.beginPath();\n        ctx.lineWidth = 5;\n        ctx.strokeStyle = \"rgba(0,0,255,\" + this.bracket_alpha.toString() + \")\";\n        ctx.moveTo(start.x + startoffset, start.y);\n\n        ctx.lineTo(start.x + offset, start.y);\n        ctx.stroke();\n\n        ctx.lineTo(start.x + offset, end.y);\n        ctx.stroke();\n\n        ctx.lineTo(end.x + startoffset, end.y);\n        ctx.stroke();\n\n        ctx.restore();\n\n        let oldalpha = ctx.globalAlpha;\n        ctx.globalAlpha = this.button_alpha;\n\n        if(this.button_alpha > 0.0) {\n            // only draw if it is visible to humans.\n            this.drawButtons(new Pos(start.x + offset + button_offset, start.y));\n        }\n\n        ctx.globalAlpha = oldalpha;\n\n\n        if(this.animate) {\n            let _this = this;\n\n            \n            window.requestAnimationFrame(() => {\n                if(this.updatefunc == null) {\n                    _this.draw();\n                }\n                else {\n                    this.updatefunc();\n                }\n            });\n        }\n    }\n\n    drawButtons(startpos) {\n        let xpos = startpos.x;\n        let ypos = startpos.y;\n\n        startpos = null;\n\n        let size = 30;\n        let b;\n        let yoffset = 0;\n        for (b of this.buttons) {\n            let tl = new Pos(xpos, ypos);\n            let tl_higher = new Pos(xpos, ypos + yoffset); // Slightly offset position to avoid collisions\n\n            let tlsel = tl;\n            if(b.button_subwindow_state == \"open\") {\n                // Select the offset position (so that the buttons / windows don't overlap)\n                yoffset -= size + 5;\n            }\n            tlsel = tl_higher;\n            b.draw(tlsel, new Pos(size, size), this.ctx);\n            xpos += size + 10;\n        }\n    }\n\n    addButton(b) {\n        this.buttons.push(b);\n        this.addChild(b);\n    }\n\n};\n\nvar _canvas_manager_counter = 0;\n\n// Class to manage drawing of all resources. This ensures that one object \n// does not overwrite another by mistake.\nclass CanvasDrawManager {\n    static counter() {\n        return _canvas_manager_counter++;\n    }\n    constructor(ctx, ref_global_state) {\n        this.ctx = ctx;\n        this.anim_id = null;\n        this.drawables = [];\n        this.ref_global_state = ref_global_state;\n        this.indices = [];\n\n        this.request_scale = false;\n        this.scale_factor = {x: 1, y: 1};\n        this.last_scale_factor = {x: 1, y: 1};\n        \n        this._destroying = false;\n\n        this.scale_origin = {x: 0, y: 0};\n\n        this.contention = 0;\n\n        this._svg = document.createElementNS(\"http://www.w3.org/2000/svg\",'svg');\n\n        this.user_transform = this._svg.createSVGMatrix();\n\n        this.addCtxTransformTracking();\n    }\n\n    svgPoint(x, y) {\n        let pt  = this._svg.createSVGPoint();\n        pt.x=x; pt.y=y;\n        return pt;\n    }\n\n    applyUserTransform() {\n        let ut = this.user_transform;\n        this.ctx.setTransform(ut.a, ut.b, ut.c, ut.d, ut.e, ut.f);\n    }\n\n    get translation() {\n        return { x: this.user_transform.e, y: this.user_transform.f };\n    }\n\n    addCtxTransformTracking() {\n        /* This function is a hack to provide the non-standardized functionality\n        of getting the current transform from a RenderingContext.\n        When (if) this is standardized, the standard should be used instead.\n        This is made for \"easy\" transforms and does not support saving/restoring\n        */\n\n        let svg = document.createElementNS(\"http://www.w3.org/2000/svg\",'svg');\n        this.ctx._custom_transform_matrix = svg.createSVGMatrix();\n        // Save/Restore is not supported.\n\n        let checker = () => {\n            console.assert(!isNaN(this.ctx._custom_transform_matrix.f));\n        };\n        let _ctx = this.ctx;\n        let scale_func = _ctx.scale;\n        _ctx.scale = function(sx,sy) {\n            _ctx._custom_transform_matrix = _ctx._custom_transform_matrix.scaleNonUniform(sx,sy);\n            checker();\n            return scale_func.call(_ctx, sx, sy);\n        };\n        let translate_func = _ctx.translate;\n        _ctx.translate = function(sx,sy) {\n            _ctx._custom_transform_matrix = _ctx._custom_transform_matrix.translate(sx,sy);\n            checker();\n            return translate_func.call(_ctx, sx, sy);\n        };\n        let rotate_func = _ctx.rotate;\n        _ctx.rotate = function(r) {\n            _ctx._custom_transform_matrix = _ctx._custom_transform_matrix.rotate(r * 180.0 / Math.PI);\n            checker();\n            return rotate_func.call(_ctx, r);\n        };\n        let transform_func = _ctx.scale;\n        _ctx.transform = function(a,b,c,d,e,f){\n\t\t\tlet m2 = svg.createSVGMatrix();\n\t\t\tm2.a=a; m2.b=b; m2.c=c; m2.d=d; m2.e=e; m2.f=f;\n            _ctx._custom_transform_matrix = _ctx._custom_transform_matrix.multiply(m2);\n            checker();\n\t\t\treturn transform_func.call(_ctx,a,b,c,d,e,f);\n\t\t};\n\n        let setTransform_func = _ctx.setTransform;\n\t\t_ctx.setTransform = function(a,b,c,d,e,f){\n\t\t\t_ctx._custom_transform_matrix.a = a;\n\t\t\t_ctx._custom_transform_matrix.b = b;\n\t\t\t_ctx._custom_transform_matrix.c = c;\n\t\t\t_ctx._custom_transform_matrix.d = d;\n\t\t\t_ctx._custom_transform_matrix.e = e;\n            _ctx._custom_transform_matrix.f = f;\n            checker();\n\t\t\treturn setTransform_func.call(_ctx,a,b,c,d,e,f);\n\t\t};\n\t\t\n\t\t_ctx.custom_inverseTransformMultiply = function(x,y){\n            let pt  = svg.createSVGPoint();\n            pt.x=x; pt.y=y;\n            checker();\n\t\t\treturn pt.matrixTransform(_ctx._custom_transform_matrix.inverse());\n\t\t}\n    }\n\n    destroy() {\n        this._destroying = true;\n        this.clearDrawables();\n    }\n\n    addDrawable(obj) {\n        this.drawables.push(obj);\n        this.indices.push({\"c\": CanvasDrawManager.counter(), \"d\": obj});\n    }\n\n    removeDrawable(drawable) {\n        this.drawables = this.drawables.filter(x => x != drawable);\n    }\n\n    clearDrawables() {\n        for(let x of this.drawables) {\n            x.destroy();\n        }\n        this.drawables = [];\n        this.indices = [];\n    }\n\n    scale(diff, x=0, y=0) {\n        \n        if(this.request_scale || Math.abs(diff) < 0.0001 || this.contention > 0) {\n            console.log(\"Blocking potential race\");\n            return;\n        }\n        this.contention++;\n        this.request_scale = true;\n\n        this.scale_origin.x = x;\n        this.scale_origin.y = y;\n        this.scale_factor.x += diff;\n        this.scale_factor.y += diff;\n        \n        this.scale_factor.x = Math.max(0.001, this.scale_factor.x);\n        this.scale_factor.y = Math.max(0.001, this.scale_factor.y);\n        {\n            let sv = diff < 0 ? 0.9 : 1.1;\n            let pt = this.svgPoint(this.scale_origin.x, this.scale_origin.y).matrixTransform(this.user_transform.inverse());\n            this.user_transform = this.user_transform.translate(pt.x, pt.y);\n            this.user_transform = this.user_transform.scale(sv, sv, 1, 0, 0, 0);\n            this.user_transform = this.user_transform.translate(-pt.x, -pt.y);\n        }\n        this.contention--;\n    }\n\n    translate(x, y) {\n        this.user_transform = this.user_transform.translate(x / this.user_transform.a, y / this.user_transform.d);\n    }\n\n    mapPixelToCoordsX(xpos) {\n        return this.svgPoint(xpos, 0).matrixTransform(this.user_transform.inverse()).x;\n    }\n\n    mapPixelToCoordsY(ypos) {\n        return this.svgPoint(0, ypos).matrixTransform(this.user_transform.inverse()).y;\n    }\n\n    getScale() {\n        ObjectHelper.assert(\"Uniform scale\", this.scale_factor.x == this.scale_factor.y);\n        return this.noJitter(this.scale_factor.x); // We don't allow non-uniform scaling.\n    }\n\n    getLastScale() {\n        return this.noJitter(this.last_scale_factor.x); // We don't allow non-uniform scaling.\n    }\n\n    noJitter(x) {\n        x = parseFloat(x.toFixed(3));\n        x = Math.round(x * 100) / 100;\n        return x;\n    }\n\n\n    draw() {\n        if(this._destroying) {\n            return;\n        }\n        if(this.contention > 0) return;\n        this.contention += 1;\n        let ctx = this.ctx;\n\n        // Clear with default transform\n        ctx.save();\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        ctx.restore();\n\n        let mx = 0;\n        let my = 0;\n        if(this.request_scale && this.contention == 1) {\n            \n            mx = this.mapPixelToCoordsX(this.scale_origin.x);\n            my = this.mapPixelToCoordsY(this.scale_origin.y);\n\n            // Reset the translation\n            this.applyUserTransform();\n            this.request_scale = false;\n        }\n        else\n        {\n            mx = this.mapPixelToCoordsX(this.scale_origin.x);\n            my = this.mapPixelToCoordsY(this.scale_origin.y);\n            \n            \n        }\n        this.applyUserTransform();\n            \n        \n\n        this.ref_global_state.drawSDFG();\n        for(let d of this.drawables) {\n            d.draw();\n        }\n\n        if(false) // Comment this line to show debug values at cursor position\n        {\n            ctx.fillText(\"(\" + mx.toFixed(1) + \"|\" + my.toFixed(1) + \")\",  mx, my);\n            ctx.fillText(\"(\" + this.translation.x.toFixed(1) + \"|\" + this.translation.y.toFixed(1) + \")\",  mx, my + 10);\n            ctx.fillText(\"s:\" + this.getScale().toFixed(1),  mx, my + 20);\n        }\n        this.contention -= 1;\n    }\n\n    draw_async() {\n        let _this = this;\n        this.anim_id = window.requestAnimationFrame(() => _this.draw());\n    }\n}\n\nexport { CanvasDrawManager, Bracket, Button, Layout, Pos, min_func, max_func, max_func_obj,\nRU_DataView, RU_DataViewBarGraph, RU_DataViewFormLayout, RU_DataViewNumberBlock, RU_DataViewSuggestedActionBlock, RU_DataViewText,\ncreateImageDownload, DataBlock };","// Copyright 2019-2020 ETH Zurich and the DaCe authors. All rights reserved.\nimport {ObjectHelper} from \"./datahelper.js\"\n// Contains resources used to provide a \"native\" multi-window interface\n\n// Class to create the window on the parent side\nclass DiodeWindow {\n    constructor(parent) {\n        this.parent = parent;\n        this.window = null;\n\n        this.message_userdef = null;\n\n        this._msg_func = x => this.message(x);\n        this.parent.addEventListener('message', this._msg_func);\n    }\n\n    open(url = '', target = '', features = '', replace = false) {\n        this.window = parent.open(url, target, features + \"width=800,height=600\", replace);\n\n        if(!this.window) return this.window; // some error occurred\n\n        return this.window;\n    }\n\n    setCallback(x) {\n        this.message_userdef = x;\n    }\n\n    passMessage(msg_obj) {\n        return this.window.postMessage(msg_obj, \"*\");\n    }\n\n    reply(win, origin, msg_obj) {\n        if(win != this.window && this.window != null) {\n            console.log(\"We do not talk to strangers\");\n        }\n        return this.passMessage(msg_obj);\n    }\n\n    setSenderData(data) {\n        this.window_data = data;\n    }\n\n    destroy() {\n        this.parent.removeEventListener('message', this._msg_func)\n    }\n\n    serialize_dataview(dv) {\n        return dv.getSendableObject();\n    }\n\n    serialize_array(arr) {\n        let ret = [];\n        for(let x of arr) {\n            ret.push(this.serialize(x));\n        }\n        return ret;\n    }\n    \n    serialize_function(func) {\n        return func.toString();\n    }\n\n    serialize_default(def) {\n        if(def == undefined) {\n            return \"\";\n        }\n        let ret = {};\n        let keys = ObjectHelper.listKeys(def);\n        for(let x of keys) {\n            let val = def[x];\n\n            ret[x] = this.serialize(val);\n        }\n\n        return ret;\n    }\n\n\n\n    serialize(obj) {\n        if(obj instanceof RU_DataView) {\n            return this.serialize_dataview(obj);\n        }\n        else if(obj instanceof Array) {\n            return this.serialize_array(obj);\n        }\n        else if(obj instanceof Object)\n            return this.serialize_default(obj);\n        else if(typeof obj == \"function\")\n            return this.serialize_function(obj);\n        else\n            return obj;\n    }\n\n    message(event) {\n        let _data = event.data;\n        if(event.source != this.window) {\n            return; \n        }\n\n        if(_data.type == \"ClientOpened\") {\n            // Respond with the data\n           \n            if(this.message_userdef == null) {\n                let answer = {\n                    type: \"DisplayData\",\n                    data: this.window_data\n                };\n                this.reply(event.source, event.origin, answer);\n            }\n            else {\n                // Pass to custom function.\n                this.message_userdef(_data);\n            }\n        }\n        else if(_data.type == \"close\") {\n            console.log(\"Parent received close message\");\n            this.window.close();\n            this.destroy();\n        }\n        else if(this.message_userdef != null) {\n            // Custom callback method.\n\n            \n            this.message_userdef(_data);\n        }\n        else {\n            console.log(\"Unknown type \" + JSON.stringify(_data));\n        }\n    }\n\n}\n\n\n// Class managing the client side\nclass ClientSide {\n    constructor(thiswindow, userfunc = null) {\n        this.thiswindow = thiswindow;\n\n        this.owner = thiswindow.opener;\n\n        this.thiswindow.addEventListener('message', x => this.message(x));\n\n        this.thiswindow.addEventListener('onbeforeunload', x => this.destroy(x));\n\n        this.subwindow = null;\n\n        this.message_userdef = userfunc;\n\n        this.passMessage({\n            type: \"ClientOpened\"\n        });\n    }\n\n    destroy(x) {\n        x.preventDefault();\n        x.returnValue = '';\n        console.log(\"Destroying client window\");\n    }\n\n    setCallback(x) {\n        this.message_userdef = x;\n    }\n\n    passMessage(msg_obj) {\n        return this.owner.postMessage(msg_obj, \"*\");\n    }\n\n    reply(win, origin, msg_obj) {\n        if(win != this.owner) {\n            return;\n        }\n        return this.passMessage(msg_obj);\n    }\n\n    // Reads the event coming from the parent window\n    message(event) {\n        \n        let data = event.data;\n\n        if(data.type == \"DisplayData\") {\n\n            let canvas = window.document.getElementById('subwindowcanvas');\n            if(!canvas) {\n                alert(\"Didn't find canvas!\");\n            }\n            let ctx = canvas.getContext('2d');\n            if(!ctx) {\n                alert(\"Didn't find context!\");\n            }\n            \n            let content = data.data;\n            let classname = content.className;\n            if(!classname) {\n                alert(\"Classname is not set!\");\n            }\n            let dataparams = content.dataParams;\n\n            let class_obj = null;\n            let loaded_module = null;\n            if(classname == \"ParallelizationButton\") {\n                loaded_module = import(\"./parallelization_button.js\").then(mod => {\n                    class_obj = mod.ParallelizationButton;\n                });\n            }\n            else if(classname == \"MemoryButton\") {\n                loaded_module = import(\"./memory_button.js\").then(mod => {\n                    class_obj = mod.MemoryButton;\n                });\n            }\n            else if(classname == \"VectorizationButton\") {\n                loaded_module = import(\"./vectorization_button.js\").then(mod => {\n                    class_obj = mod.VectorizationButton;\n                });\n            }\n            else if(classname == \"MemoryOpButton\") {\n                loaded_module = import(\"./memop_button.js\").then(mod => {\n                    class_obj = mod.MemoryOpButton;\n                });\n            }\n            else if(classname == \"CacheOpButton\") {\n                loaded_module = import(\"./cache_button.js\").then(mod => {\n                    class_obj = mod.CacheOpButton;\n                });\n            }\n            else {\n                ObjectHelper.assert(\"Missing definition\", false);\n            }\n            \n            \n\n            loaded_module.then(x =>\n            {\n                let new_obj = new class_obj(ctx, ...(dataparams));\n\n                if(!new_obj) {\n                    alert(\"Failed to instantiate class \" + classname);\n                }\n                let subwindow_width = new_obj.button_subwindow.targetwidth;\n                let subwindow_height = new_obj.button_subwindow.targetheight;\n                let subwindow_left = new_obj.topleft.x;\n                let subwindow_top = new_obj.topleft.y;\n\n                ctx.canvas.width = subwindow_width;\n                ctx.canvas.height = subwindow_height;\n\n                // The width is specified in outer-width. This code adjusts the differences accordingly.\n                // magic +10 (px): Avoid scrollbars\n                let diff_x = window.outerWidth - window.innerWidth + 10;\n                let diff_y = window.outerHeight - window.innerHeight + 10;\n                window.resizeTo(subwindow_width + diff_x, subwindow_height + diff_y);\n\n                new_obj.button_subwindow_state = 'open'; // Open Sesame\n                new_obj.is_locked_open = true;\n\n                import(\"./renderer_util.js\").then(mod => {\n                    let b = new mod.Bracket(ctx);\n                    b.setupEventListeners();\n                    b.addButton(new_obj);\n                    b.drawEx(new mod.Pos(-20, 0), new mod.Pos(0, 0), 0, 0, true);\n                });\n            });\n        }\n        else if(this.message_userdef != null) {\n            this.message_userdef(data);\n        }\n        else  {\n            console.log(\"Unknown event caught\");\n            ObjectHelper.logObject(\"message\", data);\n        }\n        \n    }\n}\n\nexport {DiodeWindow, ClientSide}","// Copyright 2019-2020 ETH Zurich and the DaCe authors. All rights reserved.\n\nimport { REST_request, FormBuilder, setup_drag_n_drop } from \"../main\";\nimport { Appearance } from \"./diode_appearance\";\nimport { SDFG_Parser } from \"../utils/sdfg/sdfg_parser\";\nimport { parse_sdfg, stringify_sdfg } from \"../utils/sdfg/json_serializer\";\nimport * as DiodeTables from \"./table\";\nimport { DIODE_Settings } from \"./diode_settings\";\nimport { DIODE_Project } from \"./diode_project\";\nconst { $ } = globalThis;\n\nexport class DIODE {\n    constructor() {\n        this._settings = new DIODE_Settings();\n        this._debouncing = {};\n\n        this._background_projects = [];\n        this._current_project = null;\n\n        this._stale_data_button = null;\n\n        this._shortcut_functions = {\n            /*\n            format:\n            key: {\n                .alt: Trigger if altKey is pressed\n                .ctrl: Trigger if ctrlKey is pressed\n                .function: Function to run\n                .state: Multi-key only: state in state machine\n                .expect: The state transitions (without the first state transition)\n            }\n            */\n        };\n\n        this._creation_counter = 0;\n\n        // Load a client_id\n        this._client_id = localStorage.getItem(\"diode_client_id\");\n        if (this._client_id == null) {\n            this._client_id = this.getPseudorandom();\n            localStorage.setItem(\"diode_client_id\", this._client_id);\n        }\n\n        // Initialize appearance\n        this._appearance = new Appearance(localStorage.getItem(\"DIODE/Appearance\"));\n        this._appearance.setOnChange(x => {\n            localStorage.setItem(\"DIODE/Appearance\", JSON.stringify(x.toStorable()))\n        });\n    }\n\n    setupEvents() {\n        this.goldenlayout.eventHub.on(this.project().eventString('-req-show_stale_data_button'), x => {\n            this.__impl_showStaleDataButton();\n        });\n        this.goldenlayout.eventHub.on(this.project().eventString('-req-remove_stale_data_button'), x => {\n            this.__impl_removeStaleDataButton();\n        });\n        this.goldenlayout.eventHub.on(this.project().eventString('-req-show_loading'), x => {\n            this.__impl_showIndeterminateLoading();\n        });\n        this.goldenlayout.eventHub.on(this.project().eventString('-req-hide_loading'), x => {\n            this.__impl_hideIndeterminateLoading();\n        });\n\n        // Install the hint mechanic on the whole window\n        window.addEventListener('contextmenu', ev => {\n            console.log(\"contextmenu requested on\", ev.target);\n\n            this.hint(ev);\n        });\n    }\n\n    getRunConfigs(name = undefined) {\n        let tmp = localStorage.getItem(\"diode_run_configs\");\n        if (tmp != null) {\n            tmp = JSON.parse(tmp);\n        } else {\n            // Create a default\n            tmp = [{\n                \"Configuration name\": \"default\",\n                \"Host\": \"localhost\",\n                \"Use SSH\": true,\n                \"SSH Key\": this.pubSSH(),\n                \"SSH Key override\": \"\",\n                \"Instrumentation\": \"off\",\n                \"Number of threads\": \"[0]\"\n            }];\n        }\n\n        if (name != undefined) {\n            const ret = tmp.filter(x => x['Configuration name'] == name);\n            if (ret.length == 0) {\n                // Error\n                console.error(\"Could not find a configuration with that name\", name);\n            } else {\n                return ret[0];\n            }\n        }\n        return tmp;\n    }\n\n    addToRunConfigs(config) {\n        delete config['SSH Key']; // Don't save large, unnecessary data\n        const existing = this.getRunConfigs();\n\n        let i = 0;\n        for (const x of existing) {\n            if (x['Configuration name'] == config['Configuration name']) {\n                // Replace\n                existing[i] = config;\n                break;\n            }\n            ++i;\n        }\n        if (i >= existing.length) {\n            existing.push(config);\n        }\n        existing.sort((a, b) => a['Configuration name'].localeCompare(b['Configuration name']));\n        localStorage.setItem(\"diode_run_configs\", JSON.stringify(existing));\n    }\n\n    setCurrentRunConfig(name) {\n        sessionStorage.setItem(\"diode_current_run_config\", name);\n    }\n\n    getCurrentRunConfigName() {\n        const tmp = sessionStorage.getItem(\"diode_current_run_config\");\n        if (tmp == null) {\n            return \"default\";\n        } else {\n            return tmp;\n        }\n    }\n\n    getCurrentRunConfig() {\n        const config = this.getRunConfigs(this.getCurrentRunConfigName());\n        return config;\n    }\n\n    applyCurrentRunConfig() {\n        const config = this.getCurrentRunConfig();\n\n        let new_settings = {};\n\n        new_settings = {\n            ...new_settings, ...{\n                \"execution/general/host\": config['Host']\n            }\n        };\n\n        // Apply the runconfig values to the dace config\n        if (config['Use SSH']) {\n\n\n            const keyfile_string = /\\S/.test(config['SSH Key override']) ? (\" -i \" + config['SSH Key override'] + \" \") : \" \";\n            new_settings = {\n                ...new_settings, ...{\n                    \"execution/general/execcmd\": (\"ssh -oBatchMode=yes\" + keyfile_string + \"${host} ${command}\"),\n                    \"execution/general/copycmd_r2l\": (\"scp -B\" + keyfile_string + \" ${host}:${srcfile} ${dstfile}\"),\n                    \"execution/general/copycmd_l2r\": (\"scp -B\" + keyfile_string + \" ${srcfile} ${host}:${dstfile}\"),\n                }\n            };\n        } else {\n            // Use standard / local commands\n            new_settings = {\n                ...new_settings, ...{\n                    \"execution/general/execcmd\": \"${command}\",\n                    \"execution/general/copycmd_r2l\": \"cp ${srcfile} ${dstfile}\",\n                    \"execution/general/copycmd_l2r\": \"cp ${srcfile} ${dstfile}\",\n                }\n            };\n        }\n\n        // Instrumentation settings are not to be applied here, but later when the run request is actually sent\n\n        const ret = new Promise((resolve, reject) => {\n            const post_params = {\n                client_id: this.getClientID(),\n                ...new_settings\n            };\n            REST_request(\"/dace/api/v1.0/preferences/set\", post_params, (xhr) => {\n                if (xhr.readyState === 4 && xhr.status === 200) {\n                    resolve(config);\n                } else if (xhr.status !== 0 && !(xhr.status + \"_\").startsWith(\"2\")) {\n                    reject();\n                }\n            });\n        });\n\n        return ret;\n    }\n\n    pubSSH() {\n        const cached = localStorage.getItem('diode_pubSSH');\n        if (cached != null) {\n            return cached;\n        }\n        REST_request(\"/dace/api/v1.0/getPubSSH/\", undefined, xhr => {\n            if (xhr.readyState === 4 && xhr.status === 200) {\n                const j = JSON.parse(xhr.response);\n                if (j.error == undefined) {\n                    const t = j.pubkey;\n                    localStorage.setItem('diode_pubSSH', t);\n                } else {\n                    alert(j.error);\n                }\n            }\n        }, 'GET');\n    }\n\n    static getHostList() {\n        const tmp = localStorage.getItem(\"diode_host_list\");\n        if (tmp == null) return ['localhost'];\n        else return JSON.parse(tmp);\n    }\n\n    static setHostList(list) {\n        localStorage.setItem(\"diode_host_list\", JSON.stringify(list));\n    }\n\n    hint(ev) {\n        /*\n            ev: Event triggering this hint.\n        */\n\n        const create_overlay = (_h, elem) => {\n            // Found hint data\n            const fulldata = JSON.parse(_h);\n\n            // #TODO: Link to documentation instead of using this placeholder\n            $(elem).w2overlay(\"<div><h2>Help for category \" + fulldata.type + \"</h2>\" + fulldata.name + \"</div>\");\n        };\n\n        const target = ev.target;\n        let _h = target.getAttribute(\"data-hint\");\n        if (_h == null) {\n            // Iterate chain\n            if (!ev.composed) return;\n            const x = ev.composedPath();\n            for (const e of x) {\n                if (e.getAttribute != undefined) {\n                    _h = e.getAttribute(\"data-hint\");\n                } else _h = null;\n\n                if (_h != null) {\n                    create_overlay(_h, e);\n                    ev.stopPropagation();\n                    ev.preventDefault();\n                    break;\n                }\n            }\n            return;\n        } else {\n            create_overlay(_h, target);\n            ev.stopPropagation();\n            ev.preventDefault();\n        }\n\n        console.log(\"Got hint data\", _h);\n\n    }\n\n    openUploader(purpose = \"\") {\n\n        w2popup.open({\n            title: \"Upload a code file\",\n            body: `\n<div class=\"w2ui-centered upload_flexbox\">\n    <label for=\"file-select\" style=\"flex-grow: 1\">\n        <div class=\"diode_uploader\" id='upload_box'>\n            <div class=\"uploader_text\">\n                Drop file here or click to select a file\n            </div>\n        </div>\n    </label>\n    <input id=\"file-select\" type=\"file\"  accept=\".py,.m,.sdfg\" style=\"position:absolute;\"/>\n</div>\n`,\n            buttons: '',\n            showMax: true\n        });\n        let x = $('#upload_box');\n        if (x.length == 0) {\n            throw \"Error: Element not available\";\n        }\n        x = x[0];\n\n        const file_handler = (data) => {\n            if (purpose == \"code-python\") {\n                this.newFile(data);\n            }\n        };\n\n        setup_drag_n_drop(x, (mime, data) => {\n            console.log(\"upload mime\", mime);\n\n            file_handler(data);\n\n            // Close the popup\n            w2popup.close();\n        }, null, {\n            readMode: \"text\"\n        });\n\n        let fuploader = $('#file-select');\n        if (fuploader.length == 0) {\n            throw \"Error: Element not available\";\n        }\n        fuploader = fuploader[0];\n\n        fuploader.style.opacity = 0;\n\n        fuploader.addEventListener(\"change\", x => {\n            const file = fuploader.files[0];\n\n            const reader = new FileReader();\n            reader.onload = y => {\n                file_handler(y.target.result);\n                // Close the popup\n                w2popup.close();\n            };\n            reader.readAsText(file);\n        });\n    }\n\n    getClientID() {\n        return this._client_id;\n    }\n\n    static hash(data) {\n        return btoa(crypto.subtle.digest('SHA-256', Uint8Array.from(data)));\n    }\n\n\n    initEnums() {\n        this.getEnum(\"ScheduleType\");\n        this.getEnum(\"StorageType\");\n        this.getEnum(\"AccessType\");\n        this.getEnum(\"Language\");\n    }\n\n    // Closes all open windows\n    closeAll() {\n        if (!this.goldenlayout.root)\n            return;\n        const comps = this.goldenlayout.root.getItemsByFilter(x => x.config.type == \"component\");\n        comps.forEach((comp) => comp.close());\n        this.project().clearClosedWindowsList();\n    }\n\n    addContentItem(config) {\n        // Remove all saved instances of this component type from the closed windows list\n        if (config.componentName) {\n            const cw = this.project()._closed_windows;\n            this.project().setClosedWindowsList(cw.filter(x => x[0] != config.componentName));\n        }\n\n        const root = this.goldenlayout.root;\n\n        // In case goldenlayout was not yet initialized, fail silently\n        if (!root)\n            return;\n\n        if (root.contentItems.length === 0) {\n            // Layout is completely missing, need to add one (row in this case)\n            const layout_config = {\n                type: 'row',\n                content: []\n            };\n            root.addChild(layout_config);\n\n            // retry with recursion\n            this.addContentItem(config);\n        } else {\n            if (this.goldenlayout.isSubWindow) {\n                // Subwindows don't usually have layouts, so send a request that only the main window should answer\n                this.goldenlayout.eventHub.emit('create-window-in-main', JSON.stringify(config));\n            } else {\n                for (const ci of root.contentItems) {\n                    if (ci.config.type != \"stack\") {\n                        ci.addChild(config);\n                        return;\n                    }\n\n                }\n                const copy = root.contentItems[0].contentItems.map(x => x.config);\n                root.contentItems[0].remove();\n                // retry with recursion\n                for (const ci of copy) {\n                    this.addContentItem(ci);\n                }\n                this.addContentItem(config);\n                //root.contentItems[0].addChild(config);\n            }\n        }\n    }\n\n    newFile(content = \"\") {\n        // Reset project state\n        this.closeAll();\n        this.createNewProject();\n\n        const millis = this.getPseudorandom();\n\n        // Assuming SDFG files start with {\n        if (content[0] == '{') {\n            // Prettify JSON object, if not pretty\n            if (content.split('\\n').length == 1)\n                content = JSON.stringify(JSON.parse(content), null, 2);\n        }\n\n\n        const config = {\n            title: \"Source Code\",\n            type: 'component',\n            componentName: 'CodeInComponent',\n            componentState: { created: millis, code_content: content }\n        };\n\n        this.addContentItem(config);\n\n        // Compile automatically after loading\n        this.gatherProjectElementsAndCompile(this, {}, { sdfg_over_code: true });\n    }\n\n    open_diode_settings() {\n        const millis = this.getPseudorandom();\n\n        const config = {\n            title: \"Settings\",\n            type: 'component',\n            componentName: 'SettingsComponent',\n            componentState: { created: millis }\n        };\n\n        this.addContentItem(config);\n    }\n\n    open_runqueue() {\n        const millis = this.getPseudorandom();\n\n        const config = {\n            title: \"Run Queue\",\n            type: 'component',\n            componentName: 'RunqueueComponent',\n            componentState: { created: millis }\n        };\n\n        this.addContentItem(config);\n    }\n\n    getEnum(name) {\n        const cached = localStorage.getItem('Enumeration:' + name);\n        if (cached == null || cached == undefined) {\n            // Request the enumeration from the server\n\n            REST_request(\"/dace/api/v1.0/getEnum/\" + name, undefined, xhr => {\n                if (xhr.readyState === 4 && xhr.status === 200) {\n                    console.log(name, xhr.response);\n                    const tmp = JSON.parse(xhr.response);\n                    if (name == \"Language\") {\n                        tmp.enum.push(\"NoCode\");\n                    }\n                    localStorage.setItem('Enumeration:' + name, JSON.stringify(tmp));\n                }\n            }, 'GET');\n\n            return null;\n        }\n\n        return JSON.parse(cached)['enum'];\n    }\n\n    renderProperties(transthis, node, params, parent, options = undefined) {\n        /*\n            Creates property visualizations in a 2-column table.\n        */\n        if (params == null) {\n            console.warn(\"renderProperties as nothing to render\");\n            return;\n        }\n        if (!Array.isArray(params)) {\n            const realparams = params;\n\n            // Format is different (diode to_json with seperate meta / value - fix before passing to renderer)\n            let params_keys = Object.keys(params).filter(x => !x.startsWith('_meta_'));\n            params_keys = params_keys.filter(x => Object.keys(params).includes('_meta_' + x));\n\n            const _lst = params_keys.map(x => {\n                const mx = JSON.parse(JSON.stringify(params['_meta_' + x]));\n\n                mx.name = x;\n                mx.value = params[x];\n\n                return { property: mx, category: mx.category, element: realparams, data: node.data };\n            });\n\n            params = _lst;\n        }\n\n        if (typeof (transthis) == 'string') {\n            // Event-based\n            const target_name = transthis;\n            transthis = {\n                propertyChanged: (element, name, value) => {\n                    // Modify in SDFG object first\n                    this.project().request(['property-changed-' + target_name], x => {\n\n                    }, {\n                        timeout: 200,\n                        params: {\n                            element: element,\n                            name: name,\n                            value: value,\n                            type: options ? options.type : options\n                        }\n                    });\n\n                    // No need to refresh SDFG if transformation\n                    if (options && options.type === 'transformation')\n                        return;\n\n                    this.refreshSDFG();\n                },\n                applyTransformation: () => {\n                    this.project().request(['apply-adv-transformation-' + target_name], x => {\n\n                    }, {\n                        timeout: 200,\n                        params: options == undefined ? undefined : options.apply_params\n                    })\n                },\n                locateTransformation: (opt_name, opt_pos, affects) => {\n                    this.project().request(['locate-transformation-' + options.sdfg_name], x => {\n\n                    }, {\n                        timeout: 200,\n                        params: JSON.stringify([opt_name, opt_pos, affects]),\n                    })\n                },\n                project: () => this.project()\n            };\n        }\n        const dt = new DiodeTables.Table();\n        let cur_dt = dt;\n\n        let dtc = null;\n        const categories = {};\n        for (const x of params) {\n\n            const cat = x.category;\n            if (categories[cat] == undefined) {\n                categories[cat] = [];\n            }\n            categories[cat].push(x);\n        }\n        if (!DIODE.debugDevMode()) {\n            delete categories[\"(Debug)\"]\n        }\n        for (const z of Object.entries(categories)) {\n\n            // Sort within category\n            const cat_name = z[0];\n            const y = z[1].sort((a, b) => a.property.name.localeCompare(b.property.name));\n\n\n            // Add Category header\n            cur_dt = dt;\n            const sp = document.createElement('span');\n            sp.innerText = cat_name;\n            const tr = cur_dt.addRow(sp);\n            tr.childNodes[0].colSpan = \"2\";\n\n            dtc = new DiodeTables.TableCategory(cur_dt, tr);\n\n            for (const propx of y) {\n                const title_part = document.createElement(\"span\");\n                const x = propx.property;\n                title_part.innerText = x.name;\n                title_part.title = x.desc;\n                const value_part = diode.getMatchingInput(transthis, x, propx);\n                const cr = cur_dt.addRow(title_part, value_part);\n                if (dtc != null) {\n                    dtc.addContentRow(cr);\n                }\n            }\n        }\n        dt.setCSSClass(\"diode_property_table\");\n\n        if (options && options.type == \"transformation\") {\n            // Append a title\n            const title = document.createElement(\"span\");\n            title.classList = \"\";\n            title.innerText = options.opt_name;\n            parent.appendChild(title);\n\n            // Append a \"locate\" button\n            const locate_button = document.createElement(\"span\");\n            locate_button.innerText = \"location_on\";\n            locate_button.classList = \"material-icons\";\n            locate_button.style = \"cursor: pointer;\";\n\n            locate_button.addEventListener(\"click\", () => {\n                // Highlight the affected elements (both transformation and nodes)\n                transthis.locateTransformation(options.opt_name, options.pos, options.apply_params[0].affects);\n            });\n            parent.appendChild(locate_button);\n        }\n        dt.createIn(parent);\n        if (options && options.type == \"transformation\") {\n            // Append an 'apply-transformation' button\n            const button = document.createElement('button');\n            button.innerText = \"Apply advanced transformation\";\n            button.addEventListener('click', _x => {\n                button.disabled = true;\n                this.project().request(['apply-adv-transformation-' + options.sdfg_name], _y => {\n                }, {\n                    params: JSON.stringify(options.apply_params)\n                });\n            });\n            parent.appendChild(button);\n\n        }\n    }\n\n    create_visual_access_representation(elems, data) {\n\n        const __access_indices = elems[0];\n        const __ranges = elems[1];\n        const __user_input = elems[2];\n        const __additional_defines = {};\n\n        // Add standard functions\n        __additional_defines['Min'] = \"(...x) => Math.min(...x)\";\n        __additional_defines['int_ceil'] = \"(a,b) => Math.ceil(a/b)\";\n\n        for (const x of __user_input) {\n            const _r = window.prompt(\"Enter a value for symbol \" + x);\n            if (_r != null) {\n\n                // Write the value \n                __additional_defines[x] = _r;\n            } else {\n                // Aborted\n                break;\n            }\n        }\n\n        // Read the data object properties\n        console.log(\"data\", data);\n        if (data.type != \"Array\") {\n            console.warn(\"Non-Array accessed\", data);\n            // #TODO: What to do here?\n        }\n        let __mem_dims = data.attributes.shape;\n        console.assert(__mem_dims != undefined);\n        // Try to eval the functions\n        const __eval_func = () => {\n            const __defs = Object.keys(__additional_defines).map(x => \"let \" + x + \" = \" + __additional_defines[x]).join(\";\") + \";\";\n            __mem_dims = __mem_dims.map(x => eval(__defs + x));\n        };\n        __eval_func();\n\n\n        const __tbl_container = document.createElement(\"div\");\n        const __tbl_hor = document.createElement(\"div\");\n        __tbl_hor.classList = \"flex_row\";\n        __tbl_hor.style = \"flex-wrap: nowrap; justify-content: flex-start;\";\n        const __axis_x_info = document.createElement(\"div\");\n        {\n            __axis_x_info.classList = \"flex_row\";\n            __axis_x_info.style = \"justify-content: space-between;\";\n\n\n            for (let __i = 0; __i < 2; ++__i) {\n                const __tmp = document.createElement(\"div\");\n                // Take the second dimension\n                try {\n                    __tmp.innerText = (__i == 0) ? \"0\" : __mem_dims[1];\n                } catch (__e) {\n                    __tmp.innerText = (__i == 0) ? \"Start\" : \"End\";\n                }\n                __axis_x_info.appendChild(__tmp);\n            }\n        }\n\n        const __axis_y_info = document.createElement(\"div\");\n        {\n            __axis_y_info.classList = \"flex_column\";\n            __axis_y_info.style = \"justify-content: space-between;\";\n\n\n            for (let __i = 0; __i < 2; ++__i) {\n                const __tmp = document.createElement(\"div\");\n                // Take the first dimension\n                try {\n                    __tmp.innerText = (__i == 0) ? \"0\" : __mem_dims[0];\n                } catch (__e) {\n                    __tmp.innerText = (__i == 0) ? \"Start\" : \"End\";\n                }\n                __axis_y_info.appendChild(__tmp);\n            }\n        }\n\n        const __tbl_vert = document.createElement(\"div\");\n        __tbl_vert.classList = \"flex_col\";\n        if (data != null) {\n            __tbl_vert.appendChild(__axis_x_info);\n            __tbl_hor.appendChild(__axis_y_info);\n        }\n        // Now create a table with the according cells for this\n        let __size = 10;\n        if (__mem_dims.some(x => x > 128)) __size = 5;\n\n        if (__mem_dims.length < 2) __mem_dims.push(1); // Force at least 2 dimensions (2nd dim size is trivial: 1)\n\n        console.log(\"access indices\", __access_indices);\n        console.log(\"ranges\", __ranges);\n\n        // This is very limited; future work can take place here\n        // The current implementation works only by fixing all but one range per dimension.\n        // This is done for 2 main reasons:\n        // 1) Performance. It is not possible to determine the access patterns in O(n) without either using an LSE\n        //        with range side conditions (which is hard to solve in \"naked\" JS). The only alternative is to actually\n        //        scan __all__ possible values, which is infeasible on a browser client.\n        // 2) Visual Cluttering. Seeing too much at once is not helpful. Implementing an easy-to-use UI solving this problem\n        //        is beyond the scope of the initial PoC.\n\n        // Obtain fixed ranges (all but smallest)\n        const __fixed_rngs = __ranges.map(x => x).sort((a, b) => a.depth - b.depth).slice(1).reverse();\n        // Get the variable range (smallest)\n        const __var_rng = __ranges[0];\n\n        const __rng_inputs = [];\n\n        let __create_func = () => null;\n\n        const __main = x => x.main != undefined ? x.main : x;\n        // Add inputs for every fixed range\n        {\n            const input_cont = document.createElement(\"div\");\n            let __defs = Object.keys(__additional_defines).map(x => \"let \" + x + \" = \" + __additional_defines[x]).join(\";\") + \";\";\n\n            const __global_slider = document.createElement(\"input\");\n            {\n                __global_slider.type = \"range\";\n                __global_slider.min = \"0\";\n                __global_slider.value = \"0\";\n                __global_slider.step = \"1\";\n\n                input_cont.appendChild(__global_slider);\n            }\n\n            let __total_rng_count = 1;\n            let __locked_range = false;\n\n            input_cont.classList = \"flex_column\";\n            for (const __r of __fixed_rngs) {\n                const _lbl = document.createElement(\"label\");\n                const _in = document.createElement(\"input\");\n                _in.type = \"number\";\n                _in.min = \"0\";\n                _in.step = \"1\";\n\n                _in.addEventListener(\"change\", _click => {\n                    // Trigger update\n\n                    // Move the slider position\n                    let __spos = 0;\n                    let __base = 1;\n                    for (const __r of __rng_inputs.map(x => x).reverse()) {\n                        const __s = parseInt(__r.max) - parseInt(__r.min) + 1;\n\n                        const __v = __r.value;\n\n                        __spos += parseInt(__v) * __base;\n                        __base *= parseInt(__s);\n                    }\n                    __global_slider.value = __spos;\n\n                    __create_func();\n                });\n                // Set limits\n                try {\n                    _in.min = eval(__defs + __main(__r.val.start));\n                } catch (e) {\n                    console.warn(\"Got error when resolving expression\");\n                }\n                try {\n                    _in.max = eval(__defs + __main(__r.val.end));\n                } catch (e) {\n                    console.warn(\"Got error when resolving expression\");\n                }\n                try {\n                    _in.value = eval(__defs + __main(__r.val.start));\n                } catch (e) {\n                    console.warn(\"Got error when resolving expression\");\n                }\n\n                // Add the starting value as an expression to defs\n                __defs += \"let \" + __r.var + \" = \" + __main(__r.val.start) + \";\";\n\n                _lbl.innerText = \"Range iterator \" + __r.var + \" over [\" + __main(__r.val.start) + \", \" + __main(__r.val.end) + \"] in steps of \" + __main(__r.val.step);\n                _in.setAttribute(\"data-rname\", __r.var);\n                _lbl.appendChild(_in);\n                __rng_inputs.push(_in);\n\n                input_cont.appendChild(_lbl);\n\n                if (__total_rng_count == 0) __total_rng_count = 1;\n\n                const __e_size = ((__x) => eval(__defs + \"(\" + __main(__x.val.end) + \" - \" + __main(__x.val.start) + \"+1) / \" + __main(__x.val.step)))(__r);\n                if (__e_size == 0 || __locked_range) {\n                    __locked_range = true;\n                } else {\n                    __total_rng_count *= __e_size;\n                }\n            }\n            console.log(\"__total_rng_count\", __total_rng_count);\n            {\n                __global_slider.max = __total_rng_count - 1; // Inclusive range\n\n                __global_slider.addEventListener(\"input\", __ev => {\n                    let __v = parseInt(__global_slider.value);\n\n                    for (const __r of __rng_inputs.map(x => x).reverse()) {\n                        const __s = parseInt(__r.max) - parseInt(__r.min) + 1;\n\n                        const __subval = __v % __s;\n\n                        __r.value = __subval;\n\n                        __v = Math.floor(__v / __s);\n                    }\n                });\n\n                const r = __var_rng;\n                const _lbl = document.createElement(\"label\");\n                const _in = document.createElement(\"span\");\n\n                __global_slider.addEventListener(\"input\", _ev => {\n                    __create_func();\n                });\n\n                _in.innerText = \"(whole range)\";\n                _lbl.innerText = \"Range iterator \" + r.var + \" over [\" + __main(r.val.start) + \", \" + __main(r.val.end) + \"] in steps of \" + __main(r.val.step);\n                _lbl.appendChild(_in);\n\n                input_cont.appendChild(_lbl);\n            }\n            __tbl_container.appendChild(input_cont);\n        }\n\n        __create_func = () => {\n            __tbl_vert.innerHTML = \"\";\n            __tbl_vert.appendChild(__axis_x_info);\n            const __all_fixed = {};\n            Object.assign(__all_fixed, __additional_defines);\n            // Get the fixed values\n            {\n                for (const i of __rng_inputs) {\n                    const rname = i.getAttribute(\"data-rname\");\n                    const val = i.value;\n\n                    __all_fixed[rname] = val;\n                }\n            }\n\n            const __defstring = Object.keys(__all_fixed).map(x => \"let \" + x + \" = \" + __all_fixed[x] + \";\").join(\"\");\n\n            const __ellision_thresh_y = 64;\n            const __ellision_thresh_x = 128;\n\n            const __mark_cells = {};\n\n            // Evaluate the range\n            {\n                const feval = (x) => {\n                    return eval(__defstring + x);\n                };\n                const __it = __var_rng.var;\n                const __r_s = __main(__var_rng.val.start);\n                const __r_e = __main(__var_rng.val.end);\n                const __r_step = __main(__var_rng.val.step);\n\n                // Remember: Inclusive ranges\n                for (let __x = feval(__r_s); __x <= feval(__r_e); __x += feval(__r_step)) {\n                    // Add this to the full evaluation\n                    let __a_i = __access_indices.map((x, i) => [x, i]).sort((a, b) => a[1] - b[1]).map(x => x[0]);\n\n\n                    __a_i = __a_i.map(__y => feval(\"let \" + __it + \" = \" + __x + \";\" + __y.var));\n\n                    const __tmp = __mark_cells[__a_i[1]];\n                    if (__tmp == undefined) {\n                        __mark_cells[__a_i[1]] = [];\n                    }\n                    __mark_cells[__a_i[1]].push(__a_i[0]);\n                }\n            }\n\n            for (let __dim_2 = 0; __dim_2 < __mem_dims[0]; ++__dim_2) {\n\n                // Check ellision\n                if (__mem_dims[0] > __ellision_thresh_y && __dim_2 > __ellision_thresh_y / 2 && __dim_2 < __mem_dims[0] - __ellision_thresh_y / 2) {\n                    // Elide\n                    if (__dim_2 - 1 == __ellision_thresh_y / 2) {\n                        // Add ellision info _once_\n                        const __row = document.createElement(\"div\");\n                        __row.classList = \"flex_row\";\n                        __row.style = \"justify-content: flex-start;flex-wrap: nowrap;\"\n                        __row.innerText = \"...\";\n                        __tbl_vert.appendChild(__row);\n                    }\n                    continue;\n                }\n                const __row = document.createElement(\"div\");\n                __row.classList = \"flex_row\";\n                __row.style = \"justify-content: flex-start;flex-wrap: nowrap;\"\n\n                for (let __i = 0; __i < __mem_dims[1]; ++__i) {\n                    // Check ellision\n                    if (__mem_dims[1] > __ellision_thresh_x && __i > __ellision_thresh_x / 2 && __i < __mem_dims[1] - __ellision_thresh_x / 2) {\n                        // Elide\n                        if (__i - 1 == __ellision_thresh_x / 2) {\n                            // Add ellision info _once_\n                            const __cell = document.createElement('div');\n                            __cell.style = \"line-height: 1px;\";\n                            //let __colorstr = \"background: white;\";\n                            //__cell.style = \"min-width: \" + __size + \"px; min-height: \" + __size + \"px;border: 1px solid black;\" + __colorstr;\n                            __cell.innerText = \"...\";\n                            __row.appendChild(__cell);\n                        }\n                        continue;\n                    }\n\n                    let __set_marking = false;\n                    {\n                        const __tmp = __mark_cells[__dim_2];\n                        if (__tmp != undefined) {\n                            if (__tmp.includes(__i)) __set_marking = true;\n                        }\n                    }\n\n                    const __cell = document.createElement('div');\n                    let __colorstr = \"background: white;\";\n                    if (__set_marking) {\n                        __colorstr = \"background: red;\";\n                    }\n\n                    __cell.style = \"min-width: \" + __size + \"px; min-height: \" + __size + \"px;border: 1px solid darkgray;\" + __colorstr;\n                    __row.appendChild(__cell);\n                }\n\n                __tbl_vert.appendChild(__row);\n            }\n            __tbl_hor.appendChild(__tbl_vert);\n        };\n        __tbl_container.appendChild(__tbl_hor);\n\n        __create_func();\n\n        return __tbl_container;\n    }\n\n    create_visual_range_representation(__starts, __ends, __steps, __tiles, __mayfail = true, __data = null) {\n        const __obj_to_arr = x => (x instanceof Array) ? x : [x];\n\n        __starts = __obj_to_arr(__starts);\n        __ends = __obj_to_arr(__ends);\n        __steps = __obj_to_arr(__steps);\n        __tiles = __obj_to_arr(__tiles);\n\n        // NOTE: This context is eval()'d. This means that all variables must be in the forbidden namespace (__*) or they might be erroneously evaluated.\n        const __symbols = {};\n\n        const __e_starts = [];\n        const __e_ends = [];\n        const __e_steps = [];\n        const __e_tiles = [];\n        const __e_sizes = [];\n\n        for (let __r_it = 0; __r_it < __starts.length; ++__r_it) {\n\n            const __start = __starts[__r_it];\n            const __end = __ends[__r_it];\n            const __step = __steps[__r_it];\n            const __tile = __tiles[__r_it];\n\n            let __e_start = null;\n            let __e_end = null;\n            let __e_step = null;\n            let __e_tile = null;\n\n            let __mem_dims = [];\n            while (true) {\n                let __failed = false;\n                const __symbol_setter = Object.entries(__symbols).map(x => \"let \" + x[0] + \"=\" + x[1] + \";\").join(\"\");\n                try {\n                    // Define a couple of dace-functions that are used here\n                    const Min = (...x) => Math.min(...x);\n                    const int_ceil = (a, b) => Math.ceil(a / b);\n\n                    __e_start = eval(__symbol_setter + __start);\n                    __e_end = eval(__symbol_setter + __end) + 1; // The DaCe ranges are inclusive - we want to exclusive here.\n                    __e_step = eval(__symbol_setter + __step);\n                    __e_tile = eval(__symbol_setter + __tile);\n\n                    if (__data != null) {\n                        const __shapedims = __data.attributes.shape.length;\n                        __mem_dims = [];\n                        for (let __s = 0; __s < __shapedims; ++__s) {\n                            __mem_dims.push(eval(__symbol_setter + __data.attributes.shape[__s]));\n                        }\n                    }\n                } catch (e) {\n                    if (e instanceof ReferenceError) {\n                        // Expected, let the user provide inputs\n                        if (__mayfail) {\n                            __failed = true;\n                            break;\n                        } else {\n                            // Prompt the user and retry\n                            const __sym_name = e.message.split(\" \")[0];\n                            const __ret = window.prompt(\"Enter a value for Symbol `\" + __sym_name + \"`\");\n                            if (__ret == null) throw e;\n                            __symbols[__sym_name] = parseInt(__ret);\n                            __failed = true;\n                        }\n                    } else {\n                        // Unexpected error, rethrow\n                        throw e;\n                    }\n                }\n                if (!__failed) {\n                    break;\n                }\n            }\n\n            const __e_size = __e_end - __e_start;\n\n            __e_starts.push(__e_start);\n            __e_ends.push(__e_end);\n            __e_steps.push(__e_step);\n            __e_tiles.push(__e_tile);\n            __e_sizes.push(__e_size);\n        }\n\n        const __tbl_container = document.createElement(\"div\");\n        const __tbl_hor = document.createElement(\"div\");\n        __tbl_hor.classList = \"flex_row\";\n        __tbl_hor.style = \"flex-wrap: nowrap;\";\n        const __axis_x_info = document.createElement(\"div\");\n        {\n            __axis_x_info.classList = \"flex_row\";\n            __axis_x_info.style = \"justify-content: space-between;\";\n\n\n            for (let __i = 0; __i < 2; ++__i) {\n                const __tmp = document.createElement(\"div\");\n                // Take the second dimension\n                try {\n                    __tmp.innerText = (__i == 0) ? \"0\" : __mem_dims[1];\n                } catch (__e) {\n                    __tmp.innerText = (__i == 0) ? \"Start\" : \"End\";\n                }\n                __axis_x_info.appendChild(__tmp);\n            }\n        }\n\n        const __axis_y_info = document.createElement(\"div\");\n        {\n            __axis_y_info.classList = \"flex_column\";\n            __axis_y_info.style = \"justify-content: space-between;\";\n\n\n            for (let __i = 0; __i < 2; ++__i) {\n                const __tmp = document.createElement(\"div\");\n                // Take the first dimension\n                try {\n                    __tmp.innerText = (__i == 0) ? \"0\" : __mem_dims[0];\n                } catch (__e) {\n                    __tmp.innerText = (__i == 0) ? \"Start\" : \"End\";\n                }\n                __axis_y_info.appendChild(__tmp);\n            }\n        }\n\n        if (__data != null) {\n            __tbl_container.appendChild(__axis_x_info);\n            __tbl_hor.appendChild(__axis_y_info);\n        }\n        // Now create a table with the according cells for this\n        // Since this is done on a per-dimension basis, the table only has to be 1D, so we use a flexbox for this (easier)\n        const __row = document.createElement(\"div\");\n        __row.classList = \"flex_row\";\n        __row.style = \"justify-content: flex-start;flex-wrap: nowrap;\"\n\n        let __size = 10;\n        const __e_size = __e_sizes[0]; // #TODO: Adapt for multi-dim ranges if those are requested\n        const __e_step = __e_steps[0];\n        const __e_tile = __e_tiles[0];\n\n        if (__e_size > 512) __size = 5;\n\n        for (let __i = 0; __i < __e_size; ++__i) {\n            const __cell = document.createElement('div');\n            let __colorstr = \"background: white;\";\n            if (Math.floor(__i / __e_step) % 2 == 0) {\n                if (__i % __e_step < __e_tile) {\n                    __colorstr = \"background: SpringGreen;\";\n                }\n            } else {\n                if (__i % __e_step < __e_tile) {\n                    __colorstr = \"background: Darkorange;\";\n                }\n            }\n            __cell.style = \"min-width: \" + __size + \"px; min-height: \" + __size + \"px;border: 1px solid black;\" + __colorstr;\n            __row.appendChild(__cell);\n        }\n\n        __tbl_hor.appendChild(__row);\n        __tbl_container.appendChild(__tbl_hor);\n        return __tbl_container;\n    }\n\n    getMatchingInput(transthis, x, node) {\n\n        const create_language_input = (value, onchange) => {\n            if (value == undefined) {\n                value = x.value;\n            }\n            if (onchange == undefined) {\n                onchange = (elem) => {\n                    transthis.propertyChanged(node, x.name, elem.value);\n                };\n            }\n            const language_types = this.getEnum('Language');\n            let qualified = value;\n            if (!language_types.includes(qualified)) {\n                qualified = \"Language.\" + qualified;\n            }\n            const elem = FormBuilder.createSelectInput(\"prop_\" + x.name, onchange, language_types, qualified);\n            return elem;\n        };\n\n        const __resolve_initials = (__initials, __syms) => {\n            \"use strict\";\n            delete window.i; // Whoever thought it was a good idea to define a global variable named 'i'...\n            // We have to operate in the forbidden namespace (__*)\n\n            // Filter out all constants first\n            __initials = __initials.filter(x => isNaN(x.var));\n\n            // Add a merger function\n            const __merger = (a, b) => {\n                const acpy = a.map(x => x);\n                for (const y of b) {\n                    if (acpy.filter(x => (x == y) || (x.var != undefined && (JSON.stringify(x.var) == JSON.stringify(y.var)))).length > 0) {\n                        continue;\n                    } else {\n                        acpy.push(y);\n                    }\n                }\n                return acpy;\n            };\n\n            let __needed_defs = [];\n            const __placeholder_defines = [];\n            let __user_input_needed = [];\n            while (true) {\n                let __retry = false;\n                let __placeholder_def_str = __placeholder_defines.map(x => \"let \" + x + \" = 1\").join(\";\");\n                // Inject the known functions as well\n                __placeholder_def_str += \";let Min = (...e) => Math.min(...e); let int_ceil = (a, b) => Math.ceil(a/b);\"\n                for (const __i of __initials) {\n                    // For every initial, find the first defining element (element with the same name that assigns an expression)\n                    try {\n                        const __test = eval(__placeholder_def_str + __i.var);\n                    } catch (e) {\n                        if (e instanceof ReferenceError) {\n                            const __sym_name = e.message.split(\" \")[0];\n                            const __defs = __syms.filter(x => x.var == __sym_name && x.val != null);\n                            if (__defs.length > 0) {\n                                // Found a matching definition\n                                __placeholder_defines.push(__sym_name);\n                                __needed_defs = __merger(__needed_defs, [__defs[0]]);\n\n                                let __j = 0;\n                                for (; __j < __syms.length; ++__j) {\n                                    if (JSON.stringify(__syms[__j]) == JSON.stringify(__defs[0])) {\n                                        break;\n                                    }\n                                }\n                                const __f = x => x.main != undefined ? x.main : x;\n\n                                // Recurse into range subelements (if applicable)\n                                if (__defs[0].val != null && __defs[0].val.start != undefined) {\n                                    // find the starting node\n\n                                    let __tmp = __resolve_initials([{\n                                        var: __f(__defs[0].val.start),\n                                        val: null\n                                    }], __syms.slice(__j));\n                                    __needed_defs = __merger(__needed_defs, __tmp[1]);\n                                    __user_input_needed = __merger(__user_input_needed, __tmp[2]);\n                                    __tmp = __resolve_initials([{\n                                        var: __f(__defs[0].val.end),\n                                        val: null\n                                    }], __syms.slice(__j));\n                                    __needed_defs = __merger(__needed_defs, __tmp[1]);\n                                    __user_input_needed = __merger(__user_input_needed, __tmp[2]);\n                                    __tmp = __resolve_initials([{\n                                        var: __f(__defs[0].val.step),\n                                        val: null\n                                    }], __syms.slice(__j));\n                                    __needed_defs = __merger(__needed_defs, __tmp[1]);\n                                    __user_input_needed = __merger(__user_input_needed, __tmp[2]);\n                                    __tmp = __resolve_initials([{\n                                        var: __f(__defs[0].val.tile),\n                                        val: null\n                                    }], __syms.slice(__j));\n                                    __needed_defs = __merger(__needed_defs, __tmp[1]);\n                                    __user_input_needed = __merger(__user_input_needed, __tmp[2]);\n                                } else {\n                                    // Recurse into the found value.\n                                    const __tmp = __resolve_initials([{\n                                        var: __f(__defs[0].val),\n                                        val: null\n                                    }], __syms.slice(__j));\n                                    console.log(\"rec\", __tmp);\n                                    // Add elements to lists\n                                    __needed_defs = __merger(__needed_defs, __tmp[1]);\n                                    __user_input_needed = __merger(__user_input_needed, __tmp[2]);\n                                }\n                            } else {\n                                // Need user input for this Symbol (defer actually requesting that info from the user)\n                                __user_input_needed.push(__sym_name);\n                                // Also promise to define the symbol later\n                                __placeholder_defines.push(__sym_name);\n                            }\n                            __retry = true;\n                            break;\n                        } else {\n                            // Rethrow unknown exceptions\n                            throw e;\n                        }\n                    }\n                    if (__retry) break;\n                }\n                if (__retry) continue;\n\n\n                break;\n            }\n            // Return a (cleaned) list of the required elements\n            return [__initials, __needed_defs, __user_input_needed];\n        };\n\n        const create_index_subset_input = (transthis, x, node) => {\n            // Similar to range, but actually binding values\n            // This therefore occurs in memlets inside Maps mostly\n            // (Except when accessing using constants)\n\n            // Because the indices are used to access data (arrays),\n            // there needs to be lookup by finding the parent nodes (potentially using connectors).\n            // A lookup may traverse to top-level and throw if the symbols are not resolved yet.\n\n            const cont = document.createElement(\"div\");\n\n            if (node.data === undefined)\n                return $(cont);\n\n\n            const indices = x.value.indices;\n\n            // Generate string from indices\n            let preview = '[';\n            for (const index of indices) {\n                preview += index + ', ';\n            }\n            preview = preview.slice(0, -2) + ']';\n\n            cont.innerText = preview + '  ';\n\n            const elem = document.createElement(\"button\");\n            elem.style.float = \"right\";\n            elem.innerText = \"Edit\";\n            cont.appendChild(elem);\n\n            elem.addEventListener(\"click\", (_click) => {\n                this.project().request(['sdfg_object'], resp => {\n                    const tmp = resp['sdfg_object'];\n                    let syms = [];\n                    for (const v of Object.values(tmp)) {\n                        const tsyms = SDFG_Parser.lookup_symbols(v, node.state_id, node.node_id, null);\n                        syms = [...syms, ...tsyms];\n                        console.log(\"syms\", syms);\n\n                        // Got the symbols, now resolve.\n\n                        // Resolve (ltr is inner-to-outer)\n                    }\n                    // Rationale here: Render the underlying data as a basis,\n                    // then use index and range information to find access patterns\n\n                    // Find the initial values\n                    const initials = [];\n                    for (const x of syms) {\n                        if (x.val != null) break;\n                        initials.push(x);\n                    }\n                    // initials contains the indices used. Resolve all ranges defining those\n\n                    const newelems = __resolve_initials(initials, syms);\n                    console.log(\"newelems\", newelems);\n\n                    let data = node.data().props.filter(x => x.name == \"data\")[0];\n\n                    let data_objs = [];\n                    for (const x of Object.values(tmp)) {\n                        data_objs.push(x.attributes._arrays[data.value]);\n                    }\n                    data_objs = data_objs.filter(x => x != undefined);\n                    if (data_objs.length > 0) {\n                        data = data_objs[0];\n                    }\n\n                    const popup_div = document.createElement('div');\n\n                    const popup_div_body = document.createElement('div');\n\n                    const value_input = document.createElement(\"input\");\n                    value_input.type = \"text\";\n                    value_input.value = JSON.stringify(x.value);\n\n                    const e = this.create_visual_access_representation(\n                        newelems, data\n                    );\n\n                    const apply_but = document.createElement(\"button\");\n                    apply_but.innerText = \"Apply changes\";\n                    apply_but.addEventListener(\"click\", _click => {\n                        transthis.propertyChanged(node, x.name, JSON.parse(value_input.value));\n                        w2popup.close();\n                    });\n                    popup_div_body.appendChild(value_input);\n\n                    popup_div_body.appendChild(e);\n                    popup_div.appendChild(popup_div_body);\n\n                    w2popup.open({\n                        title: \"Data access / Indices property\",\n                        body: popup_div,\n                        buttons: apply_but,\n                        width: 1280,\n                        height: 800,\n                    });\n                }, {});\n            });\n\n            return $(cont);\n        }\n\n        const create_range_input = (transthis, x, node) => {\n\n            // As ranges _usually_ operate on data, check if a property named \"data\" is in the same object.\n            // If it is, we can inform the design of visualizations with the shape of the data object (array)\n            // #TODO: Always update this when changed (in the current implementation, it is possible that stale values are read for different properties)\n            let data_obj = null;\n            if (node.data != undefined) {\n                const tmp = node.data().props.filter(x => x.name == \"data\");\n                if (tmp.length > 0) {\n                    // Found data (name only, will resolve when rendering is actually requested)\n                    data_obj = tmp[0];\n                }\n            }\n\n\n            const cont = document.createElement(\"div\");\n\n            const ranges = x.value.ranges;\n            const popup_div = document.createElement('div');\n\n            // Generate string from range\n            let preview = '[';\n            for (const range of ranges) {\n                preview += range.start + '..' + range.end;\n                if (range.step != 1) {\n                    preview += ':' + range.step;\n                    if (range.tile != 1)\n                        preview += ':' + range.tile;\n                } else if (range.tile != 1) {\n                    preview += '::' + range.tile;\n                }\n                preview += ', ';\n            }\n            preview = preview.slice(0, -2) + ']';\n\n            cont.innerText = preview + '  ';\n\n            const elem = document.createElement(\"button\");\n            elem.style.float = \"right\";\n            elem.innerText = \"Edit\";\n            cont.appendChild(elem);\n\n\n            const popup_div_body = document.createElement('div');\n\n\n            const range_elems = [];\n            for (const r of ranges) {\n                // Add a row for every range\n                const r_row = document.createElement('div');\n                r_row.classList = \"flex_row\";\n                r_row.style = \"flex-wrap: nowrap;\";\n                if (typeof (r.start) != 'string') r.start = r.start.main;\n                if (typeof (r.end) != 'string') r.end = r.end.main;\n                if (typeof (r.step) != 'string') r.step = r.step.main;\n                if (typeof (r.tile) != 'string') r.tile = r.tile.main;\n\n                {\n                    const input_refs = [];\n                    // Generate 4 text inputs and add them to the row\n                    for (let i = 0; i < 4; ++i) {\n                        // Generate the label first\n                        const lbl = document.createElement('label');\n                        const ti = document.createElement('input');\n                        ti.style = \"width:100px;\";\n                        ti.type = \"text\";\n                        switch (i) {\n                            case 0:\n                                ti.value = r.start;\n                                lbl.textContent = \"Start\";\n                                break;\n                            case 1:\n                                ti.value = r.end;\n                                lbl.textContent = \"End\";\n                                break;\n                            case 2:\n                                ti.value = r.step;\n                                lbl.textContent = \"Step\";\n                                break;\n                            case 3:\n                                ti.value = r.tile;\n                                lbl.textContent = \"Tile\";\n                                break;\n                        }\n                        input_refs.push(ti);\n                        lbl.appendChild(ti);\n                        r_row.appendChild(lbl);\n                    }\n                    range_elems.push(input_refs);\n                    const visbut = document.createElement('div');\n                    visbut.style = \"min-width: 200px; min-height: 1rem;flex-grow: 1;display: flex;\";\n                    visbut.addEventListener('click', () => {\n\n                        // Resolve the data name and set the object accordingly\n                        if (data_obj != null) {\n\n                            this.project().request(['sdfg_object'], sdfg_obj => {\n                                if (typeof sdfg_obj.sdfg_object === 'object')\n                                    sdfg_obj = sdfg_obj.sdfg_object;\n                                else\n                                    sdfg_obj = JSON.parse(sdfg_obj.sdfg_object);\n                                console.log(\"got sdfg object\", sdfg_obj);\n                                // Iterate over all SDFGs, checking arrays and returning matching data elements\n\n                                let data_objs = [];\n                                for (const x of Object.values(sdfg_obj)) {\n                                    data_objs.push(x.attributes._arrays[data_obj.value]);\n                                }\n                                data_objs = data_objs.filter(x => x != undefined);\n                                if (data_objs.length > 0) {\n                                    data_obj = data_objs[0];\n                                }\n\n                                const vis_elem = this.create_visual_range_representation(...input_refs.map(x => x.value), false, data_obj);\n                                visbut.innerHTML = \"\";\n                                visbut.appendChild(vis_elem);\n                            }, {});\n\n                        } else {\n                            const vis_elem = this.create_visual_range_representation(...input_refs.map(x => x.value), false, data_obj);\n                            visbut.innerHTML = \"\";\n                            visbut.appendChild(vis_elem);\n                        }\n\n                    });\n                    visbut.innerText = \"Click here for visual representation\";\n                    r_row.appendChild(visbut);\n                }\n\n\n                popup_div_body.appendChild(r_row);\n            }\n\n            popup_div.appendChild(popup_div_body);\n\n            const apply_but = document.createElement(\"button\");\n            apply_but.innerText = \"Apply\";\n            apply_but.addEventListener(\"click\", () => {\n                const ret = {\n                    ranges: [],\n                    type: x.value.type,\n                }\n                for (const re of range_elems) {\n                    ret.ranges.push({\n                        start: re[0].value,\n                        end: re[1].value,\n                        step: re[2].value,\n                        tile: re[3].value\n                    })\n                }\n                transthis.propertyChanged(node, x.name, ret);\n                w2popup.close();\n            });\n\n            elem.onclick = () => {\n                w2popup.open({\n                    title: \"Range property\",\n                    body: popup_div,\n                    buttons: apply_but,\n                    width: 1280,\n                    height: 800,\n                });\n            };\n            return $(cont);\n        };\n\n        // TODO: Handle enumeration types better\n        let elem = document.createElement('div');\n        if (x.metatype == \"bool\") {\n            let val = x.value;\n            if (typeof (val) == 'string') val = val == 'True';\n            elem = FormBuilder.createToggleSwitch(\"prop_\" + x.name, (elem) => {\n                transthis.propertyChanged(node, x.name, elem.checked);\n\n            }, val);\n        } else if (\n            x.metatype == \"str\" || x.metatype == \"float\" || x.metatype == \"LambdaProperty\" || x.metatype == \"Property\"\n        ) {\n            elem = FormBuilder.createTextInput(\"prop_\" + x.name, (elem) => {\n                transthis.propertyChanged(node, x.name, elem.value);\n            }, x.value);\n        } else if (\n            x.metatype == \"tuple\" || x.metatype == \"dict\" ||\n            x.metatype == \"list\" || x.metatype == \"set\"\n        ) {\n            elem = FormBuilder.createTextInput(\"prop_\" + x.name, (elem) => {\n                let tmp = elem.value;\n                try {\n                    tmp = JSON.parse(elem.value);\n                } catch (e) {\n                    tmp = elem.value;\n                }\n                transthis.propertyChanged(node, x.name, tmp);\n            }, JSON.stringify(x.value));\n        } else if (x.metatype == \"Range\") {\n            elem = create_range_input(transthis, x, node);\n        } else if (x.metatype == \"DataProperty\") {\n            // The data list has to be fetched from the SDFG.\n            // Therefore, there needs to be a placeholder until data is ready\n            elem = document.createElement(\"span\");\n            elem.innerText = x.value;\n\n            elem = $(elem);\n            const cb = d => {\n                // Only show data for the inner SDFG (it's possible to input an arbitrary string, still)\n                const sdfg = node.sdfg;\n                const arrays = sdfg.attributes._arrays;\n                const array_names = Object.keys(arrays);\n\n                const new_elem = FormBuilder.createComboboxInput(\"prop_\" + x.name, (elem) => {\n                    transthis.propertyChanged(node, x.name, elem.value);\n                }, array_names, x.value);\n\n                // Replace the placeholder\n                elem[0].parentNode.replaceChild(new_elem[0], elem[0]);\n            };\n            this.project().request(['sdfg_object'], cb, {\n                on_timeout: cb,\n                timeout: 300\n            });\n\n        } else if (x.metatype == \"LibraryImplementationProperty\") {\n            // The list of implementations has to be fetched from\n            // the server directly.\n            elem = document.createElement(\"span\");\n            elem.innerText = x.value;\n\n            elem = $(elem);\n            $.getJSON(\"/dace/api/v1.0/getLibImpl/\" + node.element.classpath, available_implementations => {\n                const cb = d => {\n                    const new_elem = FormBuilder.createComboboxInput(\"prop_\" + x.name, (elem) => {\n                        transthis.propertyChanged(node, x.name, elem.value);\n                    }, available_implementations, x.value);\n\n                    // Add Expand button to transform the node\n                    const button = FormBuilder.createButton(\"prop_\" + x.name + \"_expand\",\n                        (elem) => {\n\n                            // Expand library node\n                            REST_request(\"/dace/api/v1.0/expand/\", {\n                                sdfg: node.sdfg,\n                                nodeid: [node.sdfg.sdfg_list_id, node.element.parent_id, node.element.id]\n                            }, (xhr) => {\n                                if (xhr.readyState === 4 && xhr.status === 200) {\n                                    const resp = parse_sdfg(xhr.response);\n                                    if (resp.error !== undefined) {\n                                        // Propagate error\n                                        this.handleErrors(this, resp);\n                                    }\n\n                                    // Add to history\n                                    this.project().request([\"append-history\"], x => {\n                                    }, {\n                                        params: {\n                                            new_sdfg: resp.sdfg,\n                                            item_name: \"Expand \" + node.element.label\n                                        }\n                                    });\n                                }\n                            });\n                        }, \"Expand\");\n\n\n                    // Replace the placeholder\n                    elem[0].parentNode.replaceChild(new_elem[0], elem[0]);\n                    new_elem[0].parentNode.appendChild(button[0]);\n                };\n                this.project().request(['sdfg_object'], cb, {\n                    on_timeout: cb,\n                    timeout: 300\n                });\n            });\n        } else if (x.metatype == \"CodeProperty\" || x.metatype == \"CodeBlock\") {\n            let codeelem = null;\n            let langelem = null;\n            const onchange = (elem) => {\n                transthis.propertyChanged(node, x.name, {\n                    'string_data': codeelem[0].value,\n                    'language': langelem[0].value\n                });\n            };\n            if (x.value == null) {\n                x.value = {};\n                x.value.language = \"NoCode\";\n                x.value.string_data = \"\";\n            }\n            codeelem = FormBuilder.createLongTextInput(\"prop_\" + x.name, onchange, x.value.string_data);\n            elem.appendChild(codeelem[0]);\n            langelem = create_language_input(x.value.language, onchange);\n            elem.appendChild(langelem[0]);\n            elem.classList.add(\"flex_column\");\n\n            return elem;\n        } else if (x.metatype == \"int\") {\n            elem = FormBuilder.createIntInput(\"prop_\" + x.name, (elem) => {\n                transthis.propertyChanged(node, x.name, parseInt(elem.value));\n            }, x.value);\n        } else if (x.metatype == 'ScheduleType') {\n            const schedule_types = this.getEnum('ScheduleType');\n            let qualified = x.value;\n            if (!schedule_types.includes(qualified)) {\n                qualified = \"ScheduleType.\" + qualified;\n            }\n            elem = FormBuilder.createSelectInput(\"prop_\" + x.name, (elem) => {\n                transthis.propertyChanged(node, x.name, elem.value);\n            }, schedule_types, qualified);\n        } else if (x.metatype == 'AllocationLifetime') {\n            const types = this.getEnum('AllocationLifetime');\n            let qualified = x.value;\n            if (!types.includes(qualified)) {\n                qualified = \"AllocationLifetime.\" + qualified;\n            }\n            elem = FormBuilder.createSelectInput(\"prop_\" + x.name, (elem) => {\n                transthis.propertyChanged(node, x.name, elem.value);\n            }, types, qualified);\n        } else if (x.metatype == 'AccessType') {\n            const access_types = this.getEnum('AccessType');\n            let qualified = x.value;\n            if (!access_types.includes(qualified)) {\n                qualified = \"AccessType.\" + qualified;\n            }\n            elem = FormBuilder.createSelectInput(\"prop_\" + x.name, (elem) => {\n                transthis.propertyChanged(node, x.name, elem.value);\n            }, access_types, qualified);\n        } else if (x.metatype == 'Language') {\n            elem = create_language_input();\n        } else if (x.metatype == 'None') {\n            // Not sure why the user would want to see this\n            console.log(\"Property with type 'None' ignored\", x);\n            return elem;\n        } else if (x.metatype == 'object' && x.name == 'identity') {\n            // This is an internal property - ignore\n            return elem;\n        } else if (x.metatype == 'OrderedDiGraph') {\n            // #TODO: What should we do with this?\n            elem = FormBuilder.createTextInput(\"prop_\" + x.name, (elem) => {\n                transthis.propertyChanged(node, x.name, elem.value);\n            }, x.value);\n        } else if (x.metatype == 'DebugInfo') {\n            // Special case: The DebugInfo contains information where this element was defined\n            // (in the original source).\n            let info_obj = x.value;\n            if (typeof (info_obj) == 'string')\n                info_obj = JSON.parse(info_obj);\n            elem = FormBuilder.createCodeReference(\"prop_\" + x.name, (elem) => {\n                // Clicked => highlight the corresponding code\n                transthis.project().request(['highlight-code'], msg => {\n                }, {\n                    params: info_obj\n                });\n            }, info_obj);\n        } else if (x.metatype == 'ListProperty') {\n            // #TODO: Find a better type for this\n            elem = FormBuilder.createTextInput(\"prop_\" + x.name, (elem) => {\n                let tmp = elem.value;\n                try {\n                    tmp = JSON.parse(elem.value);\n                } catch (e) {\n                    tmp = elem.value;\n                }\n                transthis.propertyChanged(node, x.name, tmp);\n            }, JSON.stringify(x.value));\n        } else if (x.metatype == \"StorageType\") {\n            const storage_types = this.getEnum('StorageType');\n            let qualified = x.value;\n            if (!storage_types.includes(qualified)) {\n                qualified = \"StorageType.\" + qualified;\n            }\n            elem = FormBuilder.createSelectInput(\"prop_\" + x.name, (elem) => {\n                transthis.propertyChanged(node, x.name, elem.value);\n            }, storage_types, qualified);\n        } else if (x.metatype == \"InstrumentationType\") {\n            const storage_types = this.getEnum('InstrumentationType');\n            let qualified = x.value;\n            if (!storage_types.includes(qualified)) {\n                qualified = \"InstrumentationType.\" + qualified;\n            }\n            elem = FormBuilder.createSelectInput(\"prop_\" + x.name, (elem) => {\n                transthis.propertyChanged(node, x.name, elem.value);\n            }, storage_types, qualified);\n        } else if (x.metatype == \"typeclass\") {\n            // #TODO: Type combobox\n            elem = FormBuilder.createTextInput(\"prop_\" + x.name, (elem) => {\n                transthis.propertyChanged(node, x.name, elem.value);\n            }, x.value);\n        } else if (x.metatype == \"hosttype\") {\n            elem = FormBuilder.createHostInput(\"prop_\" + x.name, (elem) => {\n                transthis.propertyChanged(node, x.name, elem.value);\n            }, DIODE.getHostList(), x.value);\n        } else if (x.metatype == \"selectinput\") {\n            elem = FormBuilder.createSelectInput(\"prop_\" + x.name, (elem) => {\n                transthis.propertyChanged(node, x.name, elem.value);\n            }, x.options, x.value);\n        } else if (x.metatype == \"combobox\") {\n            elem = FormBuilder.createComboboxInput(\"prop_\" + x.name, (elem) => {\n                transthis.propertyChanged(node, x.name, elem.value);\n            }, x.options, x.value);\n        } else if (x.metatype == \"font\") {\n            console.warn(\"Ignoring property type \", x.metatype);\n            return elem;\n        } else if (x.metatype == \"SDFGReferenceProperty\") {\n            // Nothing to display\n            return elem;\n        } else if (x.metatype == \"SubsetProperty\") {\n            if (x.value == null) {\n                elem = FormBuilder.createTextInput(\"prop_\" + x.name, (elem) => {\n                    transthis.propertyChanged(node, x.name, JSON.parse(elem.value));\n                }, JSON.stringify(x.value));\n            } else if (x.value.type == \"subsets.Indices\" || x.value.type == \"Indices\") {\n                elem = create_index_subset_input(transthis, x, node);\n            } else {\n                elem = create_range_input(transthis, x, node);\n            }\n        } else if (x.metatype == \"SymbolicProperty\") {\n            elem = FormBuilder.createTextInput(\"prop_\" + x.name, (elem) => {\n                transthis.propertyChanged(node, x.name, JSON.parse(elem.value));\n            }, JSON.stringify(x.value));\n        } else {\n            console.log(\"Unimplemented property type: \", x);\n            alert(\"Unimplemented property type: \" + x.metatype);\n\n            return elem;\n        }\n        return elem[0];\n    }\n\n    renderPropertiesInWindow(transthis, node, params, options) {\n        const dobj = {\n            transthis: typeof (transthis) == 'string' ? transthis : transthis.created,\n            node: node,\n            params: params,\n            options: options\n        };\n        this.replaceOrCreate(['display-properties'], 'PropWinComponent', dobj,\n            () => {\n                const millis = this.getPseudorandom();\n                const config = {\n                    type: 'component',\n                    componentName: 'PropWinComponent',\n                    componentState: {\n                        created: millis,\n                        params: dobj\n                    }\n                };\n\n                this.addContentItem(config);\n            });\n    }\n\n    showStaleDataButton() {\n        this.project().request(['show_stale_data_button'], x => {\n        }, {});\n    }\n\n    removeStaleDataButton() {\n        this.project().request(['remove_stale_data_button'], x => {\n        }, {});\n    }\n\n    refreshSDFG() {\n        this.gatherProjectElementsAndCompile(diode, {}, { sdfg_over_code: true });\n    }\n\n    __impl_showStaleDataButton() {\n        /*\n            Show a hard-to-miss button hinting to recompile.\n        */\n\n        if (DIODE.recompileOnPropertyChange()) {\n            // Don't show a warning, just recompile directly\n            this.gatherProjectElementsAndCompile(this, {}, { sdfg_over_code: true });\n            return;\n        }\n        if (this._stale_data_button != null) {\n            return;\n        }\n        const stale_data_button = document.createElement(\"div\");\n        stale_data_button.classList = \"stale_data_button\";\n        stale_data_button.innerHTML = \"Stale project data. Click here or press <span class='key_combo'>Alt-R</span> to synchronize\";\n\n        stale_data_button.addEventListener('click', x => {\n            this.gatherProjectElementsAndCompile(diode, {}, { sdfg_over_code: true });\n        })\n\n        document.body.appendChild(stale_data_button);\n\n        this._stale_data_button = stale_data_button;\n    }\n\n    __impl_removeStaleDataButton() {\n        if (this._stale_data_button != null) {\n            const p = this._stale_data_button.parentNode;\n            p.removeChild(this._stale_data_button);\n            this._stale_data_button = null;\n        }\n    }\n\n\n    showIndeterminateLoading() {\n        this.project().request(['show_loading'], x => {\n        }, {});\n    }\n\n    hideIndeterminateLoading() {\n        this.project().request(['hide_loading'], x => {\n        }, {});\n    }\n\n    __impl_showIndeterminateLoading() {\n        $(\"#loading_indicator\").show();\n    }\n\n    __impl_hideIndeterminateLoading() {\n        $(\"#loading_indicator\").hide();\n    }\n\n    hideIndeterminateLoading() {\n        this.project().request(['hide_loading'], x => {\n        }, {});\n    }\n\n    static filterComponentTree(base, filterfunc = x => x) {\n        const ret = [];\n        for (const x of base.contentItems) {\n\n            ret.push(...this.filterComponentTree(x, filterfunc));\n        }\n\n        return ret.filter(filterfunc);\n    }\n\n    static filterComponentTreeByCname(base, componentName) {\n        const filterfunc = x => x.config.type == \"component\" && x.componentName == componentName;\n        return base.getItemsByFilter(filterfunc);\n    }\n\n    groupSDFGs() {\n        this.generic_group(x => x.config.type == \"component\" && x.componentName == \"SDFGComponent\");\n    }\n\n    groupCodeOuts() {\n        this.generic_group(x => x.config.type == \"component\" && x.componentName == \"CodeOutComponent\");\n    }\n\n    groupOptGraph() {\n        this.generic_group(x => x.config.type == \"component\" && x.componentName == \"OptGraphComponent\");\n    }\n\n    groupSDFGsAndCodeOutsTogether() {\n        let comps = this.goldenlayout.root.getItemsByFilter(x => x.config.type == \"component\" && x.componentName == 'SDFGComponent');\n\n        const names = []\n        for (const x of comps) {\n            names.push(x.config.componentState.sdfg_name);\n        }\n\n        for (const n of names) {\n            this.generic_group(x => x.config.type == \"component\" &&\n                (x.componentName == \"SDFGComponent\" || x.componentName == \"CodeOutComponent\") &&\n                x.config.componentState.sdfg_name == n);\n        }\n\n        // Get the SDFG elements again to set them active\n        comps = this.goldenlayout.root.getItemsByFilter(x => x.config.type == \"component\" && x.componentName == 'SDFGComponent');\n        comps.forEach(x => x.parent.setActiveContentItem(x));\n\n    }\n\n    groupLikeDIODE1() {\n        /*\n        |---------------------------------------------\n        | CodeIn  | Opt   |         SDFG             |\n        |         | Tree  |       Renderer           |\n        |---------------------------------------------\n        |         |          |                       |\n        | CodeOut | (Perf)   | Prop Renderer         |\n        |         |          |                       |\n        |         |          |                       |\n        ----------------------------------------------\n        */\n\n        this.goldenlayout.eventHub.emit(\"enter-programmatic-destroy\", \"\");\n\n        // Collect the components to add to the layout later\n        const code_ins = DIODE.filterComponentTreeByCname(this.goldenlayout.root, \"CodeInComponent\");\n        const opttrees = DIODE.filterComponentTreeByCname(this.goldenlayout.root, \"AvailableTransformationsComponent\");\n        const opthists = DIODE.filterComponentTreeByCname(this.goldenlayout.root, \"TransformationHistoryComponent\");\n        const sdfg_renderers = DIODE.filterComponentTreeByCname(this.goldenlayout.root, \"SDFGComponent\");\n        const code_outs = DIODE.filterComponentTreeByCname(this.goldenlayout.root, \"CodeOutComponent\");\n        const property_renderers = DIODE.filterComponentTreeByCname(this.goldenlayout.root, \"PropWinComponent\");\n\n        // Note that this only collects the _open_ elements and disregards closed or invalidated ones\n        // Base goldenlayout stretches everything to use the full space available, this makes stuff look bad in some constellations\n        // We compensate some easily replacable components here\n        if (property_renderers.length == 0) {\n            // Add an empty property window for spacing\n\n            const c = this.getPseudorandom();\n            property_renderers.push({\n                config: {\n                    type: 'component',\n                    componentName: \"PropWinComponent\",\n                    componentState: {\n                        created: c\n                    }\n                }\n            });\n        }\n\n        // Remove the contentItems already as a workaround for a goldenlayout bug(?) that calls destroy unpredictably\n        const to_remove = [code_ins, code_outs, opttrees, opthists, sdfg_renderers, property_renderers];\n        for (const y of to_remove) {\n            for (const x of y) {\n                if (x.componentName != undefined) {\n                    x.remove();\n                }\n                // Otherwise: Might be a raw config\n            }\n        }\n\n        // Remove existing content\n        const c = [...this.goldenlayout.root.contentItems];\n        for (const x of c) {\n            this.goldenlayout.root.removeChild(x);\n        }\n\n\n        // Create the stacks (such that elements are tabbed)\n        const code_in_stack = this.goldenlayout.createContentItem({\n            type: 'stack',\n            content: [/*...code_ins.map(x => x.config)*/]\n        });\n        const opttree_stack = this.goldenlayout.createContentItem({\n            type: 'stack',\n            content: [/*...opttrees.map(x => x.config)*/]\n        });\n        const sdfg_stack = this.goldenlayout.createContentItem({\n            type: 'stack',\n            content: [/*...sdfg_renderers.map(x => x.config)*/]\n        });\n        const code_out_stack = this.goldenlayout.createContentItem({\n            type: 'stack',\n            content: [/*...code_outs.map(x => x.config)*/]\n        });\n        const property_stack = this.goldenlayout.createContentItem({\n            type: 'stack',\n            content: [/*...property_renderers.map(x => x.config)*/]\n        });\n\n        const top_row = this.goldenlayout.createContentItem({\n            type: 'row',\n            content: [/*code_in_stack, opttree_stack, sdfg_stack*/]\n        });\n\n        const bottom_row = this.goldenlayout.createContentItem({\n            type: 'row',\n            content: [/*code_out_stack, property_stack*/]\n        });\n\n\n        const top_bottom = this.goldenlayout.createContentItem({\n            type: 'column',\n            content: [/*top_row, bottom_row*/]\n        });\n        // Now add the new layout construction\n        this.goldenlayout.root.addChild(top_bottom);\n\n        top_bottom.addChild(top_row);\n        top_bottom.addChild(bottom_row);\n\n\n        top_row.addChild(code_in_stack);\n        top_row.addChild(opttree_stack);\n        top_row.addChild(sdfg_stack);\n\n        bottom_row.addChild(code_out_stack)\n        bottom_row.addChild(property_stack);\n\n        sdfg_renderers.forEach(x => sdfg_stack.addChild(x.config));\n        property_renderers.forEach(x => property_stack.addChild(x.config));\n        code_outs.forEach(x => code_out_stack.addChild(x.config));\n        opttrees.forEach(x => opttree_stack.addChild(x.config));\n        opthists.forEach(x => opttree_stack.addChild(x.config));\n        code_ins.forEach(x => code_in_stack.addChild(x.config));\n\n        // Everything has been added, but maybe too much: There might be empty stacks.\n        // They should be removed to keep a \"clean\" appearance\n        for (const x of [opttree_stack, code_in_stack, sdfg_stack, property_stack]) {\n            if (x.contentItems.length == 0) {\n                x.remove();\n            }\n        }\n\n\n        this.goldenlayout.eventHub.emit(\"leave-programmatic-destroy\", \"\");\n    }\n\n    generic_group(predicate) {\n        /*\n            Groups the SDFGs into their own Stack\n\n        */\n        this.goldenlayout.eventHub.emit(\"enter-programmatic-destroy\", \"\");\n        const sdfg_components = this.goldenlayout.root.getItemsByFilter(predicate);\n\n        if (sdfg_components.length == 0) {\n            console.warn(\"Cannot group, no elements found\");\n        }\n        const new_container = this.goldenlayout.createContentItem({\n            type: 'stack',\n            contents: []\n        });\n\n        for (const x of sdfg_components) {\n            const config = x.config;\n            x.parent.removeChild(x);\n            new_container.addChild(config);\n        }\n\n        this.addContentItem(new_container);\n\n        this.goldenlayout.eventHub.emit(\"leave-programmatic-destroy\", \"\");\n    }\n\n\n    addKeyShortcut(key, func, alt = true, ctrl = false) {\n        const keys = [...key];\n        const c = {\n            'alt': alt,\n            'ctrl': ctrl,\n            'func': func,\n            'state': 0,\n            'expect': keys.slice(1)\n        };\n        if (this._shortcut_functions[keys[0]] === undefined) {\n            this._shortcut_functions[keys[0]] = [c];\n        } else {\n            this._shortcut_functions[keys[0]].push(c);\n        }\n    }\n\n    onKeyUp(ev) {\n        if (ev.altKey == false && ev.key == 'Alt') {\n            for (const cs of Object.values(this._shortcut_functions)) {\n                for (const c of cs) {\n                    c.state = 0;\n                }\n            }\n        }\n    }\n\n    onKeyDown(ev) {\n        for (const cs of Object.values(this._shortcut_functions)) {\n            for (const c of cs) {\n                if (ev.altKey == false) {\n                    c.state = 0;\n                    continue;\n                }\n                if (c.state > 0) {\n                    // Currently in a combo-state\n                    if (c.expect[c.state - 1] == ev.key) {\n                        c.state += 1;\n                        if (c.state > c.expect.length) {\n                            // Found multi-key combo, activate\n                            c.func();\n                            ev.stopPropagation();\n                            ev.preventDefault();\n\n                            // Clear the states\n                            this.onKeyUp({ altKey: false, key: 'Alt' });\n                            return;\n                        }\n                    }\n                }\n            }\n        }\n        const cs = this._shortcut_functions[ev.key];\n        if (cs === undefined) return;\n\n        let i = 0;\n        for (const c of cs) {\n            if (c.alt == ev.altKey && c.ctrl == ev.ctrlKey) {\n\n                if (c.expect.length > 0) {\n                    // Multi-key combo expected\n                    c.state += 1;\n                    console.log(\"dict value: \", this._shortcut_functions[ev.key][i]);\n                    ++i;\n                    continue;\n                }\n                c.func();\n\n                ev.stopPropagation();\n                ev.preventDefault();\n                // Clear the states\n                this.onKeyUp({ altKey: false, key: 'Alt' });\n            }\n            ++i;\n        }\n    }\n\n    createNewProject() {\n        this._current_project = new DIODE_Project(this);\n        this._current_project.clearTransformationHistory();\n        sessionStorage.clear();\n        window.sessionStorage.setItem(\"diode_project\", this._current_project._project_id);\n        this.setupEvents();\n    }\n\n    getProject() {\n        const proj_id = window.sessionStorage.getItem(\"diode_project\");\n        this._current_project = new DIODE_Project(this, proj_id);\n        if (proj_id == null || proj_id == undefined) {\n            // There was a new project ID assigned, which is stored again in the session storage\n            window.sessionStorage.setItem(\"diode_project\", this.getCurrentProject()._project_id);\n            this.setupEvents();\n        }\n    }\n\n    project() {\n        // Alias function to emulate context behavior\n        return this.getCurrentProject();\n    }\n\n    getCurrentProject() {\n        return this._current_project;\n    }\n\n    setLayout(gl) {\n        this.goldenlayout = gl;\n    }\n\n    settings() {\n        return this._settings;\n    }\n\n    getPseudorandom() {\n        const date = new Date();\n        const millis = date.getTime().toString() + Math.random().toFixed(10).toString() + this._creation_counter.toString();\n\n        ++this._creation_counter;\n\n        console.assert(millis !== undefined, \"Millis well-defined\");\n\n        return millis;\n    }\n\n    multiple_SDFGs_available(sdfgs) {\n\n        const sdfgs_obj = (typeof (sdfgs) == 'string') ? parse_sdfg(sdfgs) : sdfgs;\n\n        for (const x of Object.keys(sdfgs_obj.compounds)) {\n            // New sdfg\n            const value = sdfgs_obj.compounds[x];\n            this.SDFG_available(value, x);\n        }\n    }\n\n    SDFG_available(sdfg, name = \"sdfg\") {\n        // We create a new component and add it to the layout\n\n        // To provide some distinguation, milliseconds since epoch are used.\n        const millis = () => this.getPseudorandom();\n\n        sdfg.sdfg_name = name;\n\n        const create_sdfg_func = () => {\n            const new_sdfg_config = {\n                title: name,\n                type: 'component',\n                componentName: 'SDFGComponent',\n                componentState: { created: millis(), sdfg_data: sdfg, sdfg_name: name }\n            };\n            this.addContentItem(new_sdfg_config);\n        };\n        this.replaceOrCreate(['new-sdfg'], 'SDFGComponent', JSON.stringify(sdfg), create_sdfg_func);\n\n        const create_codeout_func = () => {\n            const new_codeout_config = {\n                title: \"Generated Code\",\n                type: 'component',\n                componentName: 'CodeOutComponent',\n                componentState: { created: millis(), code: sdfg, sdfg_name: name }\n            };\n            this.addContentItem(new_codeout_config);\n        }\n        if (sdfg.generated_code != undefined) {\n            console.log(\"requesting using ID\", this.project());\n            this.replaceOrCreate(['new-codeout'], 'CodeOutComponent', sdfg, create_codeout_func);\n        }\n    }\n\n    Error_available(error) {\n        const create_error_func = () => {\n            const new_error_config = {\n                title: \"Error\",\n                type: 'component',\n                componentName: 'ErrorComponent',\n                componentState: { error: error }\n            };\n            this.addContentItem(new_error_config);\n        };\n        this.replaceOrCreate(['new-error'], 'ErrorComponent', error, create_error_func);\n    }\n\n    OptGraph_available(optgraph, name = \"\") {\n\n        if (typeof optgraph != \"string\") {\n            optgraph = JSON.stringify(optgraph);\n        }\n\n        // To provide some distinction, milliseconds since epoch are used.\n        const millis = this.getPseudorandom();\n\n        const create_optgraph_func = () => {\n            const new_optgraph_config = {\n                type: \"column\",\n                content: [{\n                    title: name == \"\" ? \"Transformations\" : \"Transformations for `\" + name + \"`\",\n                    type: 'component',\n                    componentName: 'AvailableTransformationsComponent',\n                    componentState: { created: millis, for_sdfg: name, optgraph_data: optgraph }\n                }]\n            };\n            this.addContentItem(new_optgraph_config);\n        };\n        this.replaceOrCreate(['new-optgraph-' + name], 'AvailableTransformationsComponent',\n            optgraph, create_optgraph_func);\n\n        const create_history_func = () => {\n            const new_optgraph_config = {\n                type: \"column\",\n                content: [{\n                    title: \"History\",\n                    type: 'component',\n                    componentName: 'TransformationHistoryComponent',\n                    componentState: { created: millis, for_sdfg: name }\n                }]\n            };\n            this.addContentItem(new_optgraph_config);\n        };\n        this.replaceOrCreate(['new-history-' + name], 'TransformationHistoryComponent',\n            optgraph, create_history_func);\n\n    }\n\n    OptGraphs_available(optgraph) {\n        let o = optgraph;\n        if (typeof (o) == \"string\") {\n            o = JSON.parse(optgraph);\n        }\n\n        for (const x of Object.keys(o)) {\n            const elem = o[x];\n            this.OptGraph_available(elem, x);\n        }\n    }\n\n    gatherProjectElementsAndCompile(calling_context, direct_passing = {}, options = {},\n        on_success = undefined, on_failure = undefined) {\n        /*\n            This method collects all available elements that can be used for compilation.\n\n            direct_passing: Elements that do not have to be requested, but are available at call time\n                .code:          Input code\n                .sdfg_props:    SDFG properties deviating from default or changed\n                .optpath:       Optimization path to be applied\n\n            options\n                .run:           If set to true, the Program is run after compilation\n                .no_optgraph:   If set to true, the optgraph is not updated/created\n                .term_id        The terminal identifier (if output should be shown), required when run is `true`\n                .sdfg_over_code Use the existing SDFG-Serialization if available instead of recompiling from source\n                .collect_cb     If set, the collected elements are passed to this function\n                .dry_run        If `true`, no operation is passed to the server. This is useful when collecting elements for e.g. saving.\n        */\n\n        const code = direct_passing.code;\n        const sdfg_props = direct_passing.sdfg_props;\n        const optpath = direct_passing.optpath;\n\n        const reqlist = [];\n        if (code === undefined) {\n            if (options.sdfg_over_code) {\n                reqlist.push('sdfg_object');\n            }\n            reqlist.push('input_code');\n        }\n\n        if (optpath === undefined) reqlist.push('optpath');\n        /*if(optpath != undefined) {\n            optpath = undefined;\n            reqlist.push('optpath');\n        }*/\n\n\n        const on_collected = (values) => {\n            if (code != undefined) values['input_code'] = code;\n            if (sdfg_props != undefined) values['sdfg_props'] = sdfg_props;\n            if (optpath != undefined) values['optpath'] = optpath;\n\n            if (options.collect_cb != undefined)\n                options.collect_cb(values);\n\n            if (options.dry_run === true)\n                return;\n\n            let cis = values['sdfg_object'] != undefined;\n            let cval = values['input_code'];\n\n            // Assuming SDFG files start with {\n            if (!cis && cval[0] == '{') {\n                const sd = parse_sdfg(cval);\n                values['sdfg_object'] = {};\n                values['sdfg_object'][sd.attributes.name] = cval;\n\n                cis = true;\n            }\n\n            if (cis) {\n                cval = values['sdfg_object'];\n                if (typeof (cval) == 'string')\n                    cval = parse_sdfg(cval);\n            }\n\n            calling_context.project().request([\"clear-errors\"], () => {\n            });\n\n            if (options.run === true) {\n                const runopts = {};\n                if (options['perfmodes']) {\n                    runopts['perfmodes'] = options['perfmodes'];\n                }\n                runopts['repetitions'] = 5; // TODO(later): Allow users to configure number\n                runopts['code_is_sdfg'] = cis;\n                runopts['runnercode'] = values['input_code'];\n                this.compile_and_run(calling_context, options.term_id, cval, values['optpath'], values['sdfg_props'], runopts, on_success, on_failure);\n            } else {\n                let cb = (resp) => {\n                    this.replaceOrCreate(['extend-optgraph'], 'AvailableTransformationsComponent', resp, (_) => {\n                        this.OptGraphs_available(resp);\n                    });\n                };\n                if (options['no_optgraph'] === true) {\n                    cb = undefined;\n                }\n\n                this.compile(calling_context, cval, values['optpath'], values['sdfg_props'],\n                    {\n                        optpath_cb: cb,\n                        code_is_sdfg: cis,\n                    }, on_success, on_failure);\n\n            }\n        }\n\n        calling_context.project().request(reqlist, on_collected, { timeout: 500, on_timeout: on_collected });\n    }\n\n    compile(calling_context, code, optpath = undefined, sdfg_node_properties = undefined, options = {},\n        on_success = undefined, on_failure = undefined) {\n        /*\n            options:\n                .code_is_sdfg: If true, the code parameter is treated as a serialized SDFG\n                .runnercode: [opt] Provides the python code used to invoke the SDFG program if needed\n        */\n        let post_params = {};\n        if (options.code_is_sdfg === true) {\n            post_params = { \"sdfg\": stringify_sdfg(code) };\n\n            post_params['code'] = options.runnercode;\n        } else {\n            post_params = { \"code\": code };\n        }\n\n        if (optpath != undefined) {\n            post_params['optpath'] = optpath;\n        }\n        if (sdfg_node_properties != undefined) {\n            post_params['sdfg_props'] = sdfg_node_properties;\n        }\n        post_params['client_id'] = this.getClientID();\n        const version_string = \"1.0\";\n        REST_request(\"/dace/api/v\" + version_string + \"/compile/dace\", post_params, (xhr) => {\n            if (xhr.readyState === 4 && xhr.status === 200) {\n\n                const peek = parse_sdfg(xhr.response);\n                if (peek['error'] != undefined) {\n                    // There was at least one error - handle all of them\n                    this.handleErrors(calling_context, peek);\n                    if (on_failure !== undefined)\n                        on_failure();\n                } else {\n                    // Data is no longer stale\n                    this.removeStaleDataButton();\n\n                    const o = parse_sdfg(xhr.response);\n                    this.multiple_SDFGs_available(xhr.response);\n                    if (options.optpath_cb === undefined) {\n                        this.OptGraphs_available(o['compounds']);\n                    } else {\n                        options.optpath_cb(o['compounds']);\n                    }\n                    if (on_success !== undefined)\n                        on_success();\n                }\n            }\n        });\n    }\n\n    handleErrors(calling_context, object) {\n        let errors = object['error'];\n        if ('traceback' in object)\n            errors += '\\n\\n' + object.traceback;\n\n        this.Error_available(errors);\n\n        if (typeof (errors) == \"string\") {\n            console.warn(\"Error: \", errors);\n            //alert(JSON.stringify(errors));\n            return;\n        }\n        for (const error of errors) {\n\n            if (error.type === \"SyntaxError\") {\n                // This error is most likely caused exclusively by input code\n\n                calling_context.project().request(['new_error'], msg => {\n                },\n                    {\n                        params: error,\n                        timeout: 100,\n                    });\n            } else {\n                console.warn(\"Error: \", error);\n                //alert(JSON.stringify(error));\n            }\n        }\n    }\n\n    ui_compile_and_run(calling_context) {\n\n        const millis = this.getPseudorandom();\n\n        const terminal_identifier = \"terminal_\" + millis;\n\n        // create a new terminal\n        const terminal_config = {\n            title: \"Terminal\",\n            type: 'component',\n            componentName: 'TerminalComponent',\n            componentState: { created: millis }\n        };\n        this.addContentItem(terminal_config);\n\n\n        this.gatherProjectElementsAndCompile(this, {}, { run: true, term_id: terminal_identifier, sdfg_over_code: true });\n    }\n\n    load_perfdata() {\n        this.showIndeterminateLoading();\n        const client_id = this.getClientID();\n\n\n        const post_params = {\n            client_id: client_id\n        };\n        REST_request(\"/dace/api/v1.0/perfdata/get/\", post_params, (xhr) => {\n            if (xhr.readyState === 4 && xhr.status === 200) {\n                const pd = JSON.parse(xhr.response);\n                console.log(\"Got result\", pd);\n\n                const ondone = () => {\n                    this.hideIndeterminateLoading();\n                };\n\n                this.project().request(['draw-perfinfo'], x => {\n                    ondone();\n                }, {\n                    params: pd,\n                    on_timeout: ondone\n                });\n            }\n        });\n    }\n\n    show_exec_times() {\n        const config = {\n            type: 'component',\n            componentName: 'PerfTimesComponent',\n            componentState: {},\n            title: \"Execution times\",\n        };\n\n        this.addContentItem(config);\n    }\n\n    show_run_options(calling_context) {\n        const newconf = {\n            type: \"component\",\n            componentName: \"RunConfigComponent\",\n            title: \"Run Configuration\"\n        };\n\n        this.addContentItem(newconf);\n    }\n\n    show_inst_options(calling_context) {\n        const newconf = {\n            type: \"component\",\n            componentName: \"InstControlComponent\",\n            title: \"Instrumentation control\"\n        };\n\n        this.addContentItem(newconf);\n    }\n\n    show_roofline(calling_context) {\n        const newconf = {\n            type: \"component\",\n            componentName: \"RooflineComponent\",\n            title: \"Roofline\"\n        };\n\n        this.addContentItem(newconf);\n    }\n\n    compile_and_run(calling_context, terminal_identifier, code, optpath = undefined,\n        sdfg_node_properties = undefined, options = {}, on_success = undefined,\n        on_failure = undefined) {\n        /*\n            .runnercode: [opt] Code provided with SDFG to invoke the SDFG program. \n        */\n        let post_params = {};\n        if (options.code_is_sdfg === true) {\n            post_params = { \"sdfg\": stringify_sdfg(code) };\n            post_params['code'] = options.runnercode;\n        } else {\n            post_params = { \"code\": code };\n        }\n        if (optpath != undefined) {\n            post_params['optpath'] = optpath;\n        }\n        if (sdfg_node_properties != undefined) {\n            post_params['sdfg_props'] = sdfg_node_properties;\n        }\n        this.applyCurrentRunConfig().then((remaining_settings) => {\n            const client_id = this.getClientID();\n            post_params['client_id'] = client_id;\n            if (remaining_settings['Instrumentation'] == 'off') {\n                post_params['perfmodes'] = undefined;\n            } else if (remaining_settings['Instrumentation'] == 'minimal') {\n                post_params['perfmodes'] = [\"default\"];\n            } else if (remaining_settings['Instrumentation'] == 'full') {\n                post_params['perfmodes'] = [\"default\", \"vectorize\", \"memop\", \"cacheop\"];\n            } else {\n                alert(\"Error! Check console\");\n                console.error(\"Unknown instrumentation mode\", remaining_settings['Instrumentation']);\n                if (on_failure !== undefined) on_failure();\n                return;\n            }\n            //post_params['perfmodes'] = [\"default\", \"vectorize\", \"memop\", \"cacheop\"];\n            let not = remaining_settings['Number of threads'];\n            if (typeof (not) == \"string\") {\n                not = JSON.parse(not);\n            }\n            post_params['corecounts'] = not.map(x => parseInt(x));\n            post_params['repetitions'] = 5; // TODO(later): Allow users to configure number\n            //post_params['corecounts'] = [1,2,3,4];\n            const version_string = \"1.0\";\n            REST_request(\"/dace/api/v\" + version_string + \"/run/\", post_params, (xhr) => {\n                if (xhr.readyState === 4 && xhr.status === 200) {\n\n                    let tmp = xhr.response;\n                    if (typeof (tmp) == 'string') tmp = JSON.parse(tmp);\n                    if (tmp['error']) {\n                        // Normal, users should poll on a different channel now.\n                        this.display_current_execution_status(calling_context, terminal_identifier, client_id);\n                        if (on_failure !== undefined)\n                            on_failure();\n                    } else if (on_success !== undefined)\n                        on_success();\n                }\n            });\n        });\n    }\n\n    display_current_execution_status(calling_context, terminal_identifier, client_id, perf_mode = undefined) {\n        const post_params = {};\n        post_params['client_id'] = client_id;\n        post_params['perf_mode'] = perf_mode;\n        const version_string = \"1.0\";\n        REST_request(\"/dace/api/v\" + version_string + \"/run/status/\", post_params, (xhr) => {\n            if (xhr.readyState === 4 && xhr.status === 200) {\n                // Show success/error depending on the exit code\n                if (xhr.response.endsWith(\" 0\"))\n                    this.toast(\"Execution ended\", \"Run ended successfully\", 'info');\n                else\n                    this.toast(\"Execution ended\", \"Run failed\", 'error');\n\n                // Flush remaining outputs\n                const newdata = xhr.response.substr(xhr.seenBytes);\n                this.goldenlayout.eventHub.emit(terminal_identifier, newdata);\n                xhr.seenBytes = xhr.responseText.length;\n            }\n            if (xhr.readyState === 3) {\n                const newdata = xhr.response.substr(xhr.seenBytes);\n                this.goldenlayout.eventHub.emit(terminal_identifier, newdata);\n                xhr.seenBytes = xhr.responseText.length;\n            }\n        });\n    }\n\n    toast(title, text, type = 'info', timeout = 10000, icon = undefined, callback = undefined) {\n        const toast = VanillaToasts.create({\n            title: title,\n            text: text,\n            type: type, // #TODO: Maybe add check for exit codes as well? (to show success/error)\n            icon: icon,\n            timeout: timeout,\n            callback: callback\n        });\n\n        VanillaToasts.setTimeout(toast.id, timeout * 1.1);\n    }\n\n    optimize(calling_context, optpath) {\n        // The calling_context might be necessary when multiple, different programs are allowed\n\n        if (optpath === undefined) {\n            optpath = [];\n        }\n        const transthis = this;\n\n        const on_data_available = (code_data, sdfgprop_data, from_code) => {\n            let code = null;\n            if (from_code) {\n                code = code_data;\n            } else {\n                code = code_data;\n            }\n\n            let props = null;\n            if (sdfgprop_data != undefined)\n                props = sdfgprop_data.sdfg_props;\n            else\n                props = undefined;\n\n            const cb = (resp) => {\n                transthis.replaceOrCreate(['extend-optgraph'], 'AvailableTransformationsComponent', resp, (_) => {\n                    transthis.OptGraphs_available(resp);\n                });\n            };\n\n            transthis.compile(calling_context, code, optpath, props, {\n                optpath_cb: cb,\n                code_is_sdfg: !from_code\n            });\n\n        }\n\n\n        calling_context.project().request(['input_code', 'sdfg_object'], (data) => {\n\n            let from_code = true;\n            if (data['sdfg_object'] != undefined) {\n                from_code = false;\n                data = data['sdfg_object'];\n                data = JSON.parse(data);\n            } else {\n                data = data['input_code'];\n            }\n            on_data_available(data, undefined, from_code);\n\n        });\n    }\n\n    /*\n        Tries to talk to a pre-existing element to replace the contents.\n        If the addressed element does not exist, a new element is created.\n    */\n    replaceOrCreate(replace_request, window_name, replace_params, recreate_func) {\n        let open_windows = null;\n        if (this.goldenlayout.root)\n            open_windows = this.goldenlayout.root.getItemsByFilter(x => (x.config.type == \"component\" &&\n                x.componentName == window_name));\n\n        if (open_windows && open_windows.length > 0) {  // Replace\n            this.getCurrentProject().request(replace_request, (resp, tid) => {\n            },\n                {\n                    timeout: null,\n                    params: replace_params,\n                    timeout_id: null\n                });\n        } else {  // Create\n            recreate_func(replace_params);\n        }\n    }\n\n    /*\n        This function is used for debouncing, i.e. holding a task for a small amount of time\n        such that it can be replaced with a newer function call which would otherwise get queued.\n    */\n    debounce(group, func, timeout) {\n\n        if (this._debouncing === undefined) {\n            // The diode parent object was not created. The function cannot be debounced in this case.\n            return func;\n        }\n        const transthis = this;\n        const debounced = function () {\n            if (transthis._debouncing[group] !== undefined) {\n                clearTimeout(transthis._debouncing[group]);\n            }\n            transthis._debouncing[group] = setTimeout(func, timeout);\n        };\n\n        return debounced;\n    }\n\n    static editorTheme() {\n        const theme = localStorage.getItem('diode_ace_editor_theme');\n        if (theme === null) {\n            return \"github\";\n        }\n        return theme;\n    }\n\n    static themeString() {\n        return \"ace/theme/\" + DIODE.editorTheme();\n    }\n\n    static loadTheme() {\n        return $.getScript(\"external_lib/ace/theme-\" + DIODE.editorTheme() + \".js\");\n    }\n\n    static setTheme(name) {\n        localStorage.setItem('diode_ace_editor_theme', name);\n    }\n\n    static recompileOnPropertyChange() {\n        // Set a tendency towards 'false' \n        return localStorage.getItem('diode_recompile_on_prop_change') == \"true\";\n    }\n\n    static setRecompileOnPropertyChange(boolean_value) {\n        if (boolean_value) {\n            localStorage.setItem('diode_recompile_on_prop_change', \"true\");\n        } else {\n            localStorage.setItem('diode_recompile_on_prop_change', \"false\");\n        }\n    }\n\n    static setDebugDevMode(boolean_value) {\n        if (boolean_value) {\n            localStorage.setItem('diode_DebugDevMode', \"true\");\n        } else {\n            localStorage.setItem('diode_DebugDevMode', \"false\");\n        }\n    }\n\n    static debugDevMode() {\n        /*\n            The DebugDev mode determines if internal, not-crucial-for-user properties are shown.\n        */\n        const v = localStorage.getItem(\"diode_DebugDevMode\");\n        return v === \"true\";\n    }\n}\n","// Copyright 2019-2020 ETH Zurich and the DaCe authors. All rights reserved.\n\nexport class Appearance {\n\n    constructor(config) {\n        if (config === null) {\n            config = {};\n            config.style = Appearance.default();\n        }\n        if (typeof (config) == 'string')\n            config = JSON.parse(config);\n\n\n        this._change_callback = null;\n        this._config = config;\n        this.insertStylesheet(config.style);\n\n        this._constructor_values = {};\n        if (config.vals != undefined) {\n            this._constructor_values = config.vals;\n        }\n    }\n\n    static getClassProperties(cssclassname) {\n        const elem = document.createElement('div');\n        elem.classList = cssclassname;\n        elem.style = \"width: 0; height: 0;\";\n        document.body.appendChild(elem);\n\n        const style = JSON.parse(JSON.stringify(window.getComputedStyle(elem)));\n        document.body.removeChild(elem);\n\n        return style;\n    }\n\n\n    static fonts() {\n        return [\n            \"Georgia\", \"Palatino\", \"Times\",\n            \"Arial\", \"ArialBlack\", \"ComicSans\", \"Impact\", \"Lucida\", \"Tahoma\", \"Trebuchet\", \"Verdana\",\n            \"Courier\", \"LucidaConsole\"\n        ];\n    }\n\n    static font(shortname) {\n        switch (shortname) {\n            // Serif\n            case \"Georgia\": return 'Georgia, serif';\n            case \"Palatino\": return '\"Palatino Linotype\", \"Book Antiqua\", Palatino, serif';\n            case \"Times\": return '\"Times New Roman\", Times, serif';\n\n            // Sans-Serif\n            case \"Arial\": return \"Arial, Helvetica, sans-serif\";\n            case \"ArialBlack\": return '\"Arial Black\", Gadget, sans-serif';\n            case \"ComicSans\": return '\"Comic Sans MS\", cursive, sans-serif';\n            case \"Impact\": return 'Impact, Charcoal, sans-serif';\n            case \"Lucida\": return '\"Lucida Sans Unicode\", \"Lucida Grande\", sans-serif';\n            case \"Tahoma\": return 'Tahoma, Geneva, sans-serif';\n            case \"Trebuchet\": return '\"Trebuchet MS\", Helvetica, sans-serif';\n            case \"Verdana\": return 'Verdana, Geneva, sans-serif';\n\n            // Monospace\n            case \"Courier\": return '\"Courier New\", Courier, monospace';\n            case \"LucidaConsole\": return '\"Lucida Console\", Monaco, monospace';\n\n            default: throw \"Unknown font (not websafe?)\"\n        }\n    }\n\n    setOnChange(func) {\n        this._change_callback = func;\n    }\n\n    setChanged() {\n        if (this._change_callback != null) {\n            this._change_callback(this);\n        }\n    }\n\n    apply() {\n        this.insertStylesheet(this.getCSS());\n    }\n\n    insertStylesheet(stylestring) {\n\n        // This function does work in all browsers but IE (<= 8).\n        let stylesheet = document.getElementById(\"appearance-stylesheet\");\n        let update = true;\n        if (stylesheet == null || stylesheet == undefined) {\n            stylesheet = document.createElement('style');\n            update = false;\n            stylesheet.id = \"appearance-stylesheet\";\n            stylesheet.type = \"text/css\";\n        }\n\n        stylesheet.innerText = stylestring;\n\n        if (!update) {\n            document.head.appendChild(stylesheet);\n        }\n\n        this.setChanged();\n    }\n\n    setValue(css_type, css_value) {\n        this._constructor_values[css_type] = css_value;\n        return this;\n    }\n    setFont(shortname) {\n        const f = Appearance.font(shortname);\n        this._constructor_values['font-family'] = f;\n        return this;\n    }\n\n    toString() {\n        return JSON.stringify(this._config);\n    }\n\n    getCSS() {\n        let inner = \"\";\n\n        for (const x of Object.entries(this._constructor_values)) {\n            inner += x[0] + \": \" + x[1] + \";\";\n        }\n\n        let ret = \".diode_appearance { \";\n        ret += inner;\n        ret += \"}\";\n\n        // Since the lm_content overrides the background, we re-override the background\n        // Note that this is legal and works because local <style></style> always overrides imports from other files\n        ret += \".lm_content { \";\n        ret += inner;\n        ret += \"}\";\n        return ret;\n    }\n\n    toStorable() {\n        return {\n            style: this.getCSS(),\n            vals: this._constructor_values\n        };\n    }\n\n    setFromAceEditorTheme(theme_name) {\n        /*\n            Sets background and foreground according to the theme identifed by `theme_name`\n            Note: The css class selector used to determine current values is: '.ace-' + `theme_name`\n        */\n\n        const s = Appearance.getClassProperties(\"ace-\" + theme_name);\n\n        const bgc = s['background-color'];\n        const bg = s['background'];\n        if (bgc) this.setValue('background-color', bgc);\n        if (bg) this.setValue('background', bg + \" !important\");\n        this.setValue('color', s['color']);\n\n        this.insertStylesheet(this.getCSS());\n    }\n\n    static default() {\n        /*\n            Builds a default configuration\n        */\n        const cssstring = `\n        .diode_appearance {\n            font-family: ` + Appearance.font('Arial') + `\n        }\n        `;\n\n\n        return cssstring;\n    }\n\n}\n","/*\nCoordinates windows belonging to the same project.\n\n*/\nexport class DIODE_Project {\n    constructor(diode, project_id = undefined) {\n        this._diode = diode;\n        if (project_id === undefined || project_id === null) {\n            this._project_id = diode.getPseudorandom();\n        } else {\n            this._project_id = project_id;\n        }\n        this.setup();\n        this._callback = null;\n        this._rcvbuf = {};\n        this._waiter = {};\n\n        this._listeners = {};\n\n        this._closed_windows = [];\n\n        this._blob = null;\n    }\n\n    clearTransformationHistory() {\n        // Reset transformation history\n        sessionStorage.removeItem(\"transformation_snapshots\");\n    }\n\n    getTransformationSnapshots() {\n        let sdata = sessionStorage.getItem(\"transformation_snapshots\");\n        if (sdata == null) {\n            sdata = [];\n        } else\n            sdata = JSON.parse(sdata);\n\n        return sdata;\n    }\n\n    getTransformationHistory() {\n        const sdata = this.getTransformationSnapshots();\n        return sdata.map(x => x[0]);\n    }\n\n    discardTransformationsAfter(index) {\n        const sdata = this.getTransformationSnapshots();\n\n        // Cut the tail off and resave\n        sessionStorage.setItem(\"transformation_snapshots\", JSON.stringify(sdata.slice(0, index)));\n        // Send the update notification\n        this.request(['update-tfh'], x => x, {});\n    }\n\n    saveSnapshot(sdfgs, changing_transformation) {\n        /*\n            Saves the current snapshot, defined by sdfgs and the current (new) transformation.\n\n        */\n\n        const sdata = this.getTransformationSnapshots();\n        sdata.push([changing_transformation, sdfgs]);\n        sessionStorage.setItem(\"transformation_snapshots\", JSON.stringify(sdata));\n    }\n\n    reopenClosedWindow(name) {\n        const window = this.getConfigForClosedWindow(name, true);\n        this._diode.addContentItem(window);\n\n        // Emit the reopen event\n        this._diode.goldenlayout.eventHub.emit('window-reopened-' + name);\n    }\n\n    getConfigForClosedWindow(name, remove = true) {\n        const list = this.getClosedWindowsList();\n        const new_list = [];\n\n        const rets = [];\n\n        for (const x of list) {\n            const cname = x[0];\n            const state = x[1];\n\n            if (state.created === name) {\n                // Found the requested element\n\n                rets.push([cname, state]);\n\n                if (remove) {\n                    // Don't put into the new list\n                } else {\n                    new_list.push([cname, state]);\n                }\n            } else {\n                // Not found\n                new_list.push([cname, state]);\n            }\n        }\n\n        // Store back\n        this.setClosedWindowsList(new_list);\n\n        console.assert(rets.length === 1, \"Expected only 1 match!\");\n        const ret = rets[0];\n\n        // Build a config for this\n        const config = {\n            type: 'component',\n            componentName: ret[0],\n            componentState: ret[1]\n        };\n\n        return config;\n    }\n\n    setClosedWindowsList(new_list) {\n        this._closed_windows = new_list;\n        sessionStorage.setItem(this._project_id + \"-closed-window-list\", JSON.stringify(this._closed_windows));\n    }\n\n    clearClosedWindowsList() {\n        this._closed_windows = [];\n\n        sessionStorage.setItem(this._project_id + \"-closed-window-list\", JSON.stringify(this._closed_windows));\n    }\n\n    addToClosedWindowsList(componentName, state) {\n        this._closed_windows = this.getClosedWindowsList();\n        this._closed_windows.push([componentName, state]);\n\n        try {\n            sessionStorage.setItem(this._project_id + \"-closed-window-list\", JSON.stringify(this._closed_windows));\n        } catch (e) {\n            sessionStorage.clear();\n        }\n    }\n\n    getClosedWindowsList() {\n        let tmp = sessionStorage.getItem(this._project_id + \"-closed-window-list\");\n        if (typeof (tmp) === \"string\") {\n            tmp = JSON.parse(tmp);\n        }\n\n        if (tmp === null) {\n            return [];\n        }\n        return tmp;\n    }\n\n    eventString(suffix) {\n        console.assert(this._project_id != null, \"project id valid\");\n        return this._project_id + suffix;\n    }\n\n    startListening(event, id) {\n        const hub = this._diode.goldenlayout.eventHub;\n\n        const transthis = this;\n        const cb = (msg) => {\n            const tmp = transthis._rcvbuf[id][event];\n            if (tmp instanceof Array) {\n                transthis._rcvbuf[id][event].push(msg);\n            } else if (tmp instanceof Object) {\n                Object.assign(transthis._rcvbuf[id][event], msg);\n            } else {\n                transthis._rcvbuf[id][event] = msg;\n            }\n        };\n        const params = [this.eventString(event), cb, this];\n        hub.on(...params);\n\n        this._listeners[id].push(params);\n    }\n\n    stopListening(id) {\n        const hub = this._diode.goldenlayout.eventHub;\n        for (const x of this._listeners[id]) {\n            hub.unbind(...x);\n        }\n        delete this._listeners[id];\n    }\n\n\n    setup() {\n\n    }\n\n    static load(diode, project_name) {\n        const pdata = DIODE_Project.getProjectData(project_name);\n\n        const ret = new DIODE_Project(diode, pdata.project_id);\n\n\n        // For simplicity, we copy the saved config over the current config\n\n        // First, destroy the current layout\n        diode.goldenlayout.destroy();\n\n        // Then, we copy over the config\n        sessionStorage.setItem(\"savedState\", JSON.stringify(pdata.data));\n\n        // ... and the project id\n        sessionStorage.setItem(\"diode_project\", ret._project_id);\n\n        // ... and the transformation snapshots\n        sessionStorage.setItem(\"transformation_snapshots\", JSON.stringify(pdata.snapshots));\n\n        // Reload the page (This will create a new goldenlayout with the specified data)\n        window.location.reload();\n\n        return ret;\n    }\n\n    static getProjectData(project_name) {\n        const pdata = localStorage.getItem(\"project_\" + project_name);\n        if (pdata == null)\n            throw \"Project must exist\";\n\n        return JSON.parse(pdata);\n    }\n\n    static getSavedProjects() {\n        const tmp = localStorage.getItem(\"saved_projects\");\n        if (tmp == null)\n            return [];\n        return JSON.parse(tmp);\n    }\n\n    createblob(data) {\n        const blob = new Blob([data], {\n            type: 'text/plain'\n        });\n\n        // If we are replacing a previously generated file we need to\n        // manually revoke the object URL to avoid memory leaks.\n        if (this._blob !== null) {\n            window.URL.revokeObjectURL(this._blob);\n        }\n\n        this._blob = window.URL.createObjectURL(blob);\n\n        return this._blob;\n    }\n\n    save() {\n        // Save current open file as SDFG\n        this.request(['sdfg_object'], x => {\n            let sdfg = x.sdfg_object;\n            let filename = null;\n            if (typeof (sdfg) != 'string') {\n                filename = Object.keys(x.sdfg_object)[0];\n                sdfg = stringify_sdfg(Object.values(x.sdfg_object)[0]);\n            } else {\n                const sdfg_obj = parse_sdfg(sdfg);\n                filename = sdfg_obj.attributes.name;\n            }\n            filename += '.sdfg';\n\n            const link = document.createElement('a');\n            link.setAttribute('download', filename);\n            link.href = this.createblob(sdfg);\n            document.body.appendChild(link);\n            // wait for the link to be added to the document\n            window.requestAnimationFrame(() => {\n                const event = new MouseEvent('click');\n                link.dispatchEvent(event);\n                document.body.removeChild(link);\n            });\n        });\n    }\n\n    request(list, callback, options = {}) {\n        /*\n            options:\n                timeout: Number                 ms to wait until on_timeout is called\n                on_timeout: [opt] Function      Function called on timeout\n                params: [opt] object            Parameters to pass with the request\n        */\n        const tmp = new DIODE_Project(this._diode, this._project_id);\n        return tmp.__impl_request(list, callback, options);\n    }\n\n    __impl_request(list, callback, options = {}) {\n        /*\n            options:\n                timeout: Number                 ms to wait until on_timeout is called\n                on_timeout: [opt] Function      Function called on timeout\n                params: [opt] object            Parameters to pass with the request\n        */\n        this._callback = callback;\n        const params = options.params;\n        const reqid = \"id\" + this._diode.getPseudorandom();\n        // Clear potentially stale values\n        this._rcvbuf[reqid] = {};\n        this._listeners[reqid] = [];\n        for (const x of list) {\n            this.startListening(x, reqid);\n            this._diode.goldenlayout.eventHub.emit(this.eventString(\"-req-\" + x), params, this);\n        }\n\n        const transthis = this;\n        const interval_step = 100;\n        let timeout = options.timeout;\n\n        this._waiter[reqid] = setInterval(() => {\n            let missing = false;\n\n            for (const x of list) {\n                if (!(x in transthis._rcvbuf[reqid])) {\n                    missing = true;\n                    break;\n                }\n            }\n            if (!missing) {\n                clearInterval(transthis._waiter[reqid]);\n                transthis.stopListening(reqid);\n                transthis._waiter[reqid] = null;\n                const tmp = transthis._rcvbuf[reqid];\n                delete transthis._rcvbuf[reqid];\n                return transthis._callback(tmp, options.timeout_id);\n            } else if (timeout !== null) {\n                timeout -= interval_step;\n                if (timeout <= 0) {\n                    // Timed out - fail silently\n                    clearInterval(transthis._waiter[reqid]);\n                    transthis.stopListening(reqid);\n                    if (options.on_timeout != undefined) {\n                        options.on_timeout(transthis._rcvbuf[reqid]);\n                    }\n                    transthis._waiter[reqid] = null;\n                    delete transthis._rcvbuf[reqid];\n                }\n            }\n        }, interval_step);\n    }\n}\n","\nexport class DIODE_Settings {\n    constructor(denormalized = {}) {\n        this.settings_values = denormalized;\n        this.changed = {};\n    }\n\n    load() {\n        // Load the settings from localStorage\n        this.settings_values = window.localStorage.getItem(\"DIODE/Settings/confirmed\");\n        this.changed = window.localStorage.getItem(\"DIODE/Settings/changed\");\n    }\n\n    store() {\n        // Store the settings to localStorage\n        window.localStorage.setItem(\"DIODE/Settings/confirmed\", this.settings_values);\n        window.localStorage.setItem(\"DIODE/Settings/changed\", this.changed);\n    }\n\n    change(setting, value) {\n        this.changed[setting.join('/')] = value;\n    }\n\n    hasChanged() {\n        return this.changed != {};\n    }\n\n    changedValues() {\n        return this.changed;\n    }\n\n    clearChanged() {\n        this.changed = {};\n    }\n\n    values() {\n        return this.settings_values;\n    }\n\n}\n","// Copyright 2019-2020 ETH Zurich and the DaCe authors. All rights reserved.\n\nexport class TableCategory {\n\n    constructor(table, parent_row) {\n        this._table = table;\n        this._title_row = parent_row;\n        this._cat_rows = [];\n\n        this._title_row.classList.add(\"diode_property_header\");\n\n        this._title_row.addEventListener('click', ev => {\n            for (const x of this._cat_rows) {\n                if (x.style.display == \"none\") {\n                    x.style.display = null;\n                    this._title_row.classList.remove(\"collapsed\");\n                }\n                else {\n                    x.style.display = \"none\";\n                    this._title_row.classList.add(\"collapsed\");\n                }\n            }\n        });\n    }\n\n    addContentRow(row) {\n        this._cat_rows.push(row);\n    }\n\n}\n\n\nexport class Table {\n    constructor() {\n\n        this.init();\n    }\n\n    init() {\n        this._table = document.createElement('table');\n        this._thead = document.createElement('thead');\n        this._tbody = document.createElement('tbody');\n\n        this._table.appendChild(this._thead);\n        this._table.appendChild(this._tbody);\n\n        this._is_collapsed = false;\n    }\n\n    createIn(elem) {\n        elem.appendChild(this._table);\n    }\n\n    setHeaders(...columns) {\n        this._columns = columns;\n\n        this._thead.innerHTML = \"\";\n\n        const tr = document.createElement(\"tr\");\n        for (const x of this._columns) {\n            const th = document.createElement('th');\n            if (typeof (x) === 'string') {\n                th.innerText = x;\n            }\n            else {\n                th.appendChild(x);\n            }\n            tr.appendChild(th);\n        }\n        this._thead.appendChild(tr);\n        return tr;\n    }\n\n    addRow(...columns) {\n\n        const tmp = columns;\n\n        const tr = document.createElement(\"tr\");\n        for (const x of tmp) {\n            const td = document.createElement('td');\n            if (typeof (x) === 'string') {\n                td.innerText = x;\n            }\n            else {\n                td.appendChild(x);\n            }\n            tr.appendChild(td);\n        }\n\n        this._tbody.appendChild(tr);\n        return tr;\n    }\n\n    collapseVertically() {\n        this._table.style.display = \"none\";\n        this._is_collapsed = true;\n    }\n\n    expandVertically() {\n        this._table.style.display = null;\n        this._is_collapsed = false;\n    }\n\n    toggleVertically() {\n        if (this._is_collapsed) {\n            this.expandVertically();\n        }\n        else {\n            this.collapseVertically();\n        }\n    }\n\n    setCSSClass(classname) {\n        this._table.classList = classname;\n    }\n\n}\n","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","// Copyright 2019-2020 ETH Zurich and the DaCe authors. All rights reserved.\n\nexport class ValueTreeNode {\n\n    constructor(label, data = null) {\n        this._label = label;\n        this._prev = null;\n        this._data = data;\n        this._children = [];\n\n        this._on_activate = null;\n        this._representative = null;\n    }\n\n    label() { return this._label; }\n    setPathLabel(l) { this._path_label = l; }\n    pathLabel() { if (this._path_label === undefined) return this.label(); else return this._path_label; }\n    data() { return this._data; }\n    children() { return this._children; }\n    parent() { return this._prev; }\n\n    getChild(pred) {\n        for (const x of this.children()) {\n            if (pred(x)) return x;\n\n            const tmp = x.getChild(pred);\n            if (tmp != null) return tmp;\n        }\n        return null;\n    }\n\n    clearChildren() {\n        this._children = [];\n    }\n\n    head() {\n        let it = this;\n        while (it._prev != null) {\n            it = it._prev;\n        }\n        return it;\n    }\n\n    allLabelsInTree() {\n        return this.head().asPreOrderArray(x => x.pathLabel());\n    }\n\n    asPreOrderArray(f = x => x) {\n\n        const ret = [f(this)];\n\n        for (const x of this.children()) {\n            ret.push(...x.asPreOrderArray(f));\n        }\n\n        return ret;\n    }\n\n\n\n    path(map_func = undefined) {\n        let ret = [];\n        if (map_func === undefined) {\n            map_func = current => { return { 'name': current.pathLabel(), 'params': current.data() } };\n        }\n        let current = this;\n        while (current._prev != null) {\n            const e = map_func(current);\n            if (e.name != \" <virtual>\") {\n                // \" <virtual>\" (with the space) is a virtual identifier, i.e. do not include the node in the path\n                ret = [e, ...ret];\n            }\n            current = current._prev;\n        }\n\n        return ret;\n    }\n\n    addNode(label, data = null, options = {}) {\n        /*\n            options:\n                .LabelConflictSameLevel\n                    Function(new_node, labels) => new_node: \n                        Called before every new node is added to the list of children.\n                        Can be used to assign different names on conflict in the same\n                        group of children. (NOT globally!)\n                .LabelConflictGlobal\n                    Function(new_node, allNodeLabels) => new_node:\n                        Called before every new node is added to the list of children.\n                        Can be used to assign different names on conflict over all nodes.\n                        \n        */\n        let new_node = new ValueTreeNode(label, data);\n        new_node._prev = this;\n        if (options.LabelConflictSameLevel != undefined) {\n            new_node = options.LabelConflictSameLevel(new_node, this.children().map(x => x.label()));\n        }\n        if (options.LabelConflictGlobal != undefined) {\n            new_node = options.LabelConflictGlobal(new_node, this.allLabelsInTree());\n        }\n        new_node._prev = this; // Make sure that after potential reordering, the basic order is still enforced\n        this._children.push(new_node);\n        return new_node;\n    }\n\n    setHandler(type, handler) {\n        // type: 'activate'\n        // handler: function (this, level)\n        if (type == \"activate\") {\n            this._on_activate = handler;\n        }\n        else {\n            console.assert(false, \"type \" + type + \" is unknown\");\n        }\n    }\n\n    setRepresentative(obj) {\n        this._representative = obj;\n    }\n\n    representative() { return this._representative; }\n\n    activate(level) {\n        if (this._on_activate != null) {\n            this._on_activate(this, level);\n        }\n    }\n}\n\n/*\nClassic TreeView implementation\n*/\nexport class TreeView {\n    constructor(value_tree_node) {\n        this._tree = value_tree_node;\n        this._debouncing = null;\n    }\n\n    setDebouncing(obj) {\n        this._debouncing = obj;\n    }\n\n    /*\n        parent: Used for parent.append()\n        depth: Depth information - unused\n        node: Overriding the starting node. If undefined, this._tree is used\n    */\n    create_html_in(parent, depth = 0, node = undefined) {\n\n        const current = node === undefined ? this._tree : node;\n\n        const listitem = document.createElement(\"li\");\n        const listitemspan = document.createElement(\"span\");\n        listitemspan.innerText = current.label();\n        listitem.append(listitemspan);\n\n        const nextparent = document.createElement(\"ul\");\n        nextparent.classList.add(\"tree_view\");\n        nextparent.classList.add(\"collapsed_sublist\");\n\n        const onclickfunc = () => {\n            nextparent.classList.toggle(\"collapsed_sublist\");\n            current.activate(1);\n        };\n        const ondblclickfunc = () => {\n            current.activate(2);\n        };\n        let passed_click_func = onclickfunc;\n        let passed_dblclick_func = onclickfunc;\n\n        if (this._debouncing != null) {\n            passed_click_func = this._debouncing.debounce(\"treeview-click\", onclickfunc, 100);\n            passed_dblclick_func = this._debouncing.debounce(\"treeview-click\", ondblclickfunc, 10);\n        }\n        listitem.addEventListener(\"click\", passed_click_func);\n\n        listitem.addEventListener(\"mouseenter\", () => {\n            current.activate(0);\n        });\n        listitem.addEventListener(\"mouseleave\", () => {\n            current.activate(-1);\n        });\n\n        listitem.addEventListener(\"dblclick\", passed_dblclick_func);\n\n        current.setRepresentative(listitem);\n\n\n        nextparent.append(listitem);\n\n        const children = current.children();\n        if (children.length == 0) {\n            // current is a leaf node\n\n        }\n        else {\n            // current is the root of a non-trivial subtree\n            for (const n of children) {\n                this.create_html_in(nextparent, depth + 1, n);\n            }\n        }\n        parent.append(nextparent);\n    }\n\n}\n","import { DIODE_Project } from \"../diode_project\";\n\n\nexport class DIODE_Context {\n    constructor(diode, gl_container, state) {\n        this.diode = diode;\n        this.container = gl_container;\n        this.initial_state = state;\n\n        this.created = state.created;\n        if (this.created == undefined) {\n            this.created = this.diode.getPseudorandom();\n            this.saveToState({ created: this.created });\n        }\n        this._project = null;\n        if (state.project_id != undefined && state.project_id != null && state.project_id != \"null\") {\n            this._project = new DIODE_Project(this.diode, state.project_id);\n        }\n\n        this._event_listeners = [];\n        this._event_listeners_closed = []; // Listeners that are installed on closed windows (NOTE: These are NOT active on open windows)\n\n        this._no_user_destroy = false; // When true, all destroy()-events are assumed to be programmatic\n    }\n\n    project() {\n        console.assert(this._project != null, \"Project invalid\");\n        return this._project;\n    }\n\n    on(name, data, keep_alive_when_closed = false) {\n        const eh = this.diode.goldenlayout.eventHub;\n\n        const params = [name, data];\n        eh.on(...params);\n        this._event_listeners.push(params);\n\n        if (keep_alive_when_closed) {\n            // NOTE: The new function has to be created because the function cannot be identical\n            // (This is, because the handler is removed by (name, function) pairs)\n            this.closed_on(name, (x) => data(x));\n        }\n    }\n\n    // same as on(), but only active when the window is closed (in the closed windows list)\n    closed_on(name, data) {\n\n\n        const params = [name, data];\n        this._event_listeners_closed.push(params);\n    }\n\n    removeClosedWindowEvents() {\n        // This function has to be called when reopening from the closed windows list\n        // DO NOT call inside destroy()!\n        const eh = this.diode.goldenlayout.eventHub;\n        for (const x of this._event_listeners_closed) {\n            eh.unbind(...x);\n        }\n        this._event_listeners_closed = [];\n    }\n\n    destroy() {\n\n        console.log(\"destroying\", this);\n        // Unlink all event listeners\n        const eh = this.diode.goldenlayout.eventHub;\n        for (const x of this._event_listeners) {\n            eh.unbind(...x);\n        }\n        this._event_listeners = [];\n    }\n\n    close() {\n        /*\n            The difference to destroy: close() is called when the USER clicks close,\n            destroy will be called afterwards when the element is actually removed\n        */\n        // Add to closed-windows list\n        console.log(\"closing\", this);\n\n        this.project().addToClosedWindowsList(this.container._config.componentName, this.getState());\n\n        // Install the event listeners to listen when the window is closed\n        const eh = this.diode.goldenlayout.eventHub;\n        for (const params of this._event_listeners_closed) {\n            eh.on(...params);\n        }\n    }\n\n    setupEvents(project) {\n        if (this._project == null) {\n            this._project = project;\n        }\n\n        this.container.extendState({ 'project_id': this._project.eventString('') });\n\n        this.on('destroy-' + this.getState().created, msg => {\n            if (!this._no_user_destroy) {\n                // _might_ be a user destroy - call close\n                this.close();\n            }\n            this.destroy();\n        });\n\n        this.on('enter-programmatic-destroy', msg => {\n            this._no_user_destroy = true;\n            console.log(\"Entering programmatic reordering\", this);\n        });\n        this.on('leave-programmatic-destroy', msg => {\n            this._no_user_destroy = false;\n            console.log(\"Leaving programmatic reordering\", this);\n        });\n\n        this.closed_on('window-reopened-' + this.getState().created, x => {\n            this.removeClosedWindowEvents();\n        });\n    }\n\n    getState() {\n        return this.container.getState();\n    }\n\n    saveToState(dict_value) {\n        this.container.extendState(dict_value);\n    }\n\n    resetState(dict_value = {}) {\n        this.container.setState(dict_value);\n    }\n\n    saveToPersistentState(key, value) {\n        localStorage.setItem(key, value);\n    }\n\n    getPersistentState(key) {\n        return localStorage.getItem(key);\n    }\n}\n","import { REST_request } from \"../../main\";\nimport * as DiodeTables from \"../table\";\nimport { DIODE_Settings } from \"../diode_settings\";\nimport { TreeView, ValueTreeNode } from \"../treeview\";\nimport { DIODE_Context } from \"./context\";\nimport { DIODE } from \"../diode\";\nconst { $ } = globalThis;\n\nexport class DIODE_Context_Settings extends DIODE_Context {\n    constructor(diode, gl_container, state) {\n        super(diode, gl_container, state);\n    }\n\n    settings_change_callback(type, path, value) {\n\n        console.assert(value !== undefined, \"Undefined value\");\n\n        console.log(\"Setting changed\", path, value);\n        this.diode.settings().change(path, value);\n\n        this.set_settings();\n    }\n\n    link_togglable_onclick(element, toToggle) {\n        const toggleclassname = \"collapsed_container\";\n        element.on('click', () => {\n            if (toToggle.hasClass(toggleclassname)) {\n                toToggle.removeClass(toggleclassname);\n            } else {\n                toToggle.addClass(toggleclassname);\n            }\n        });\n    }\n\n    parse_settings2(settings, parent = undefined, path = []) {\n        let is_topmost = false;\n        if (parent === undefined) {\n            parent = new ValueTreeNode(\"Settings\", null);\n            is_topmost = true;\n        }\n\n        let dicts = [];\n        const values = [];\n\n\n        Object.entries(settings).forEach(\n            ([key, value]) => {\n                const meta = value.meta;\n                const val = value.value;\n\n                if (meta.type == 'dict') {\n                    dicts.push([key, value]);\n                } else {\n                    values.push([key, value]);\n                }\n            });\n\n        let settings_lookup = {};\n        // Create the elements that are not in subcategories (=dicts) here\n        const dt = new DiodeTables.Table();\n        {\n            let params = JSON.parse(JSON.stringify(values));\n            params = params.map(x => {\n                const key = x[0];\n                x = x[1];\n                const tmp = x.meta;\n                tmp.value = x.value;\n                tmp.name = tmp.title;\n                tmp.category = \"General\";\n                tmp.key = key;\n                return tmp;\n            });\n\n            let cur_dt = dt;\n\n            let dtc = null;\n            const categories = {};\n            for (const x of params) {\n\n                const cat = x.category;\n                if (categories[cat] == undefined) {\n                    categories[cat] = [];\n                }\n                categories[cat].push(x);\n            }\n            if (!DIODE.debugDevMode()) {\n                delete categories[\"(Debug)\"];\n            }\n            // INSERTED\n            const transthis = {\n                propertyChanged: (path, name, value) => {\n                    console.log(\"PropertyChanged\", path, name, value);\n                    this.settings_change_callback(undefined, path, value);\n                }\n            };\n            // !INSERTED\n            for (const z of Object.entries(categories)) {\n\n                // Sort within category\n                const cat_name = z[0];\n                const y = z[1].sort((a, b) => a.name.localeCompare(b.name));\n\n\n                // Add Category header\n                cur_dt = dt;\n                const sp = document.createElement('span');\n                sp.innerText = cat_name;\n                const tr = cur_dt.addRow(sp);\n                tr.childNodes[0].colSpan = \"2\";\n\n                dtc = new DiodeTables.TableCategory(cur_dt, tr);\n\n                for (const x of y) {\n\n                    settings_lookup[path] = x.value;\n\n                    const value_part = diode.getMatchingInput(transthis, x, [...path, x.key]);\n                    const cr = cur_dt.addRow(x.name, value_part);\n                    if (dtc != null) {\n                        dtc.addContentRow(cr);\n                    }\n                }\n            }\n            dt.setCSSClass(\"diode_property_table\");\n        }\n        // Link handlers\n        parent.setHandler(\"activate\", (node, level) => {\n            if (level == 1) {\n                const repr = node.representative();\n                // Clear all selections in this tree\n                node.head().asPreOrderArray(x => x.representative()).forEach(x => x.classList.remove(\"selected\"));\n                repr.classList.add(\"selected\");\n                const cont = $(\"#diode_settings_props_container\")[0];\n                cont.innerHTML = \"\";\n                dt.createIn(cont);\n            }\n        });\n\n        // Recurse into (sorted) dicts\n        dicts = dicts.sort((a, b) => a[1].meta.title.localeCompare(b[1].meta.title));\n\n        for (let d of dicts) {\n            const key = d[0];\n            d = d[1];\n            const setting_path = path.concat(key);\n            // Create the list element first\n            const newparent = parent.addNode(d.meta.title, null);\n            // The representative DOM node does not exist yet - add hints after half a second.\n            setTimeout(() => newparent.representative().title = d.meta.description, 500);\n\n            // Recurse\n            console.log(\"Setting path\", setting_path);\n            const tmp = this.parse_settings2(d.value, newparent, setting_path);\n            settings_lookup = { ...settings_lookup, ...tmp };\n        }\n\n        if (is_topmost) {\n            const _tree = new TreeView(parent);\n            _tree.create_html_in($(\"#diode_settings_container\")[0]);\n        }\n        return settings_lookup;\n    }\n\n    get_settings() {\n        const post_params = {\n            client_id: this.diode.getClientID()\n        };\n        REST_request(\"/dace/api/v1.0/preferences/get\", post_params, (xhr) => {\n            if (xhr.readyState === 4 && xhr.status === 200) {\n                const settings = this.parse_settings2(JSON.parse(xhr.response));\n\n                this.diode._settings = new DIODE_Settings(settings);\n                //this.diode._settings = null;\n            }\n        });\n    }\n\n    set_settings() {\n        if (!this.diode.settings().hasChanged()) {\n            // Do not update if nothing has changed\n            return;\n        }\n        // Find settings that changed and write them back\n        const changed_values = this.diode.settings().changedValues();\n        this.saveToState({\n            \"changed\": changed_values,\n            \"confirmed\": this.diode.settings().values()\n        });\n        // #TODO: Maybe only update when a \"save\"-Button is clicked?\n        const transthis = this;\n        const client_id = this.diode.getClientID();\n        const post_params = changed_values;\n        post_params['client_id'] = client_id;\n        // Debounce\n        const debounced = this.diode.debounce(\"settings-changed\", function () {\n\n            REST_request(\"/dace/api/v1.0/preferences/set\", post_params, (xhr) => {\n                if (xhr.readyState === 4 && xhr.status === 200) {\n                    transthis.diode.settings().clearChanged();\n                    this.diode.toast(\"Settings changed\", \"The changed settings were applied at remote server\", \"info\", 3000);\n                }\n            });\n        }, 1000);\n        debounced();\n    }\n}\n","import { REST_request, FormBuilder } from \"../../main\";\nimport { Appearance } from \"../diode_appearance\";\nimport { DIODE_Context } from \"./context\";\nimport { DIODE } from \"../diode\";\n\n\nexport class DIODE_Context_DIODESettings extends DIODE_Context {\n    constructor(diode, gl_container, state) {\n        super(diode, gl_container, state);\n\n        this._settings_container = null;\n\n        this._editor_themes = this.getThemes();\n    }\n\n    getThemes() {\n        REST_request('/dace/api/v1.0/diode/themes', undefined, xhr => {\n            if (xhr.readyState === 4 && xhr.status === 200) {\n                this._editor_themes = JSON.parse(xhr.response);\n                console.log(\"Got editor themes\", this._editor_themes);\n\n                this.create();\n            }\n        }, \"GET\");\n    }\n\n    themeNames() {\n        return this._editor_themes.map(x => x.substr(\"theme-\".length).slice(0, -3));\n    }\n\n    setContainer(elem) {\n        this._settings_container = elem;\n    }\n\n    create() {\n        // Editor theme\n        {\n            const cont = FormBuilder.createContainer(undefined);\n            const label = FormBuilder.createLabel(undefined, \"editor theme\", \"Sets the ace editor theme\");\n            const theme_names = this.themeNames();\n            const input = FormBuilder.createSelectInput(undefined, x => {\n                const val = x.value;\n\n                DIODE.setTheme(val);\n                DIODE.loadTheme().then(x => {\n                    this.diode._appearance.setFromAceEditorTheme(val);\n                }\n                );\n            }, theme_names, DIODE.editorTheme());\n\n            cont.append(label);\n            cont.append(input);\n\n            this._settings_container.append(cont);\n        }\n        // Auto-Compile\n        {\n            const cont = FormBuilder.createContainer(undefined);\n            const label = FormBuilder.createLabel(undefined, \"Compile on property change\", \"When false, the program is not recompiled after a property change\");\n\n            const input = FormBuilder.createToggleSwitch(undefined, x => {\n                const val = x.checked;\n                DIODE.setRecompileOnPropertyChange(val);\n            }, DIODE.recompileOnPropertyChange());\n\n            cont.append(label);\n            cont.append(input);\n\n            this._settings_container.append(cont);\n        }\n        // (Debug) mode\n        {\n            const cont = FormBuilder.createContainer(undefined);\n            const label = FormBuilder.createLabel(undefined, \"DaCe Debug mode\", \"When true, the program shows elements primarily useful for debugging and developing DaCe/DIODE.\");\n\n            const input = FormBuilder.createToggleSwitch(undefined, x => {\n                const val = x.checked;\n                DIODE.setDebugDevMode(val);\n            }, DIODE.debugDevMode());\n\n            cont.append(label);\n            cont.append(input);\n\n            this._settings_container.append(cont);\n        }\n        // UI font\n        {\n            const cont = FormBuilder.createContainer(undefined);\n            const label = FormBuilder.createLabel(undefined, \"UI Font\", \"Select the font used in the UI (does not affect code panes and SDFG renderers)\");\n\n            const current = Appearance.getClassProperties(\"diode_appearance\")['fontFamily'];\n\n            const input = FormBuilder.createSelectInput(undefined, x => {\n                const val = x.value;\n\n                this.diode._appearance.setFont(val);\n                this.diode._appearance.apply();\n            }, Appearance.fonts(), current);\n\n            cont.append(label);\n            cont.append(input);\n\n            this._settings_container.append(cont);\n        }\n    }\n\n}\n","import { DIODE_Context } from \"./context\";\n\n\nexport class DIODE_Context_CodeIn extends DIODE_Context {\n    constructor(diode, gl_container, state) {\n        super(diode, gl_container, state);\n        this.editor = null;\n        this._terminal_identifer = null;\n\n        this._markers = [];\n    }\n\n    setupEvents(project) {\n        super.setupEvents(project);\n\n        const transthis = this;\n\n        const eh = this.diode.goldenlayout.eventHub;\n        this.on(this._project.eventString('-req-input_code'), (msg) => {\n            // Echo with data\n            setTimeout(() => eh.emit(transthis._project.eventString('input_code'), this.getState()['code_content']), 1);\n            transthis.editor.clearSelection();\n        }, true);\n\n        this.on(this.project().eventString('-req-new_error'), msg => {\n            // Echo with data\n            setTimeout(() => eh.emit(transthis._project.eventString('new_error'), 'ok'), 1);\n            this.highlight_error(msg);\n        });\n\n        this.on(this.project().eventString('-req-highlight-code'), msg => {\n            setTimeout(() => eh.emit(transthis._project.eventString('highlight-code'), 'ok'), 1);\n            this.highlight_code(msg);\n        });\n\n        this.on(this.project().eventString('-req-set-inputcode'), msg => {\n            setTimeout(() => eh.emit(transthis._project.eventString('set-inputcode'), 'ok'), 1);\n\n            this.editor.setValue(msg);\n            this.editor.clearSelection();\n        });\n\n        this.on(this.project().eventString('-req-clear-errors'), msg => {\n            setTimeout(() => eh.emit(transthis._project.eventString('clear-errors'), 'ok'), 1);\n            this.clearErrors();\n        });\n\n    }\n\n    highlight_code(dbg_info) {\n        const s_c = dbg_info.start_col;\n        let e_c = dbg_info.end_col;\n        if (e_c <= s_c) {\n            // The source data is broken; work-around this limitation by setting the end-column has high as possible\n            e_c = 2000;\n        }\n        const markerrange = new ace.Range(dbg_info.start_line - 1, s_c, dbg_info.end_line - 1, e_c);\n        // Create a unique class to be able to select the marker later\n        const uc = \"chm_\" + this.diode.getPseudorandom();\n\n        const marker = this.editor.session.addMarker(\n            markerrange,\n            \"code_highlight \" + uc\n        );\n\n        this.editor.resize(true);\n        this.editor.scrollToLine(dbg_info.start_line, true, true, () => {\n        });\n        this.editor.gotoLine(dbg_info.start_line, 10, true);\n\n        setTimeout(() => {\n            this.editor.getSession().removeMarker(marker);\n        }, 5000);\n    }\n\n    clearErrors() {\n        for (const m of this._markers) {\n            this.editor.getSession().removeMarker(m);\n        }\n        this._markers = [];\n    }\n\n    highlight_error(error) {\n\n        if (error.type == \"SyntaxError\") {\n            let lineno = parseInt(error.line);\n            const offset = parseInt(error.offset);\n            const text = error.text;\n\n            lineno -= 1;\n\n            const lineval = this.editor.session.getLine(lineno);\n\n\n            const start = lineval.indexOf(text.substring(0, text.length - 1));\n\n            const markerrange = new ace.Range(lineno, start, lineno, start + text.length - 1);\n\n            // Create a unique class to be able to select the marker later\n            const uc = \"sem_\" + this.diode.getPseudorandom();\n\n            const marker = this.editor.session.addMarker(\n                markerrange,\n                \"syntax_error_highlight \" + uc\n            );\n\n            this._markers.push(marker);\n\n            // #TODO: Either find a way to display the error information directly as a tooltip (which ace does not seem to support trivially)\n            // #TODO: or add a dedicated error-view.\n        } else {\n            console.log(\"Untreated error type\", error);\n        }\n    }\n\n    terminal_identifier() {\n        return this._terminal_identifer;\n    }\n\n    compile(code) {\n        for (const m of this._markers) {\n            this.editor.getSession().removeMarker(m);\n        }\n        this._markers = [];\n        this.diode.compile(this, code);\n    }\n\n    setEditorReference(editor) {\n        this.editor = editor;\n\n        const elem = this.container.getElement()[0];\n        elem.addEventListener('resize', x => {\n            this.editor.resize();\n        });\n    }\n\n\n    compile_and_run(code) {\n\n        const millis = this.diode.getPseudorandom();\n\n        const terminal_identifier = \"terminal_\" + millis;\n\n        // create a new terminal\n        const terminal_config = {\n            title: \"Terminal\",\n            type: 'component',\n            componentName: 'TerminalComponent',\n            componentState: { created: millis }\n        };\n        this.diode.addContentItem(terminal_config);\n\n        console.log(\"Server emitting to \", terminal_identifier);\n\n        this._terminal_identifer = terminal_identifier;\n\n        this.diode.gatherProjectElementsAndCompile(this, {} /*{ 'code': code}*/, {\n            run: true,\n            term_id: terminal_identifier\n        });\n    }\n\n}\n","import { DIODE_Context } from \"./context\";\n\n\nexport class DIODE_Context_Terminal extends DIODE_Context {\n    constructor(diode, gl_container, state) {\n        super(diode, gl_container, state);\n    }\n\n    setEditorReference(editor) {\n        this.editor = editor;\n    }\n\n    append(output) {\n        const session = this.editor.getSession();\n        session.insert({\n            row: session.getLength(),\n            column: 0\n        }, output);\n\n        const curr_str = session.getValue();\n\n        // Extract performance information if available\n        const re = /~#~#([^\\n]+)/gm;\n        const matches = [...curr_str.matchAll(re)];\n        for (const m of matches) {\n            console.log(\"Got match\", m);\n            // We want to access the second element (index 1) because it contains the list\n            let perflist = m[1];\n            // Because this is a python list, it may contain \"'\" (single quotes), which is invalid json\n            perflist = perflist.replace(/\\'/g, '');\n            perflist = JSON.parse(perflist);\n            perflist.sort((a, b) => a - b);\n            const median_val = perflist[Math.floor(perflist.length / 2)];\n\n            console.log(\"Got median execution time\", median_val);\n            this.project().request(['new-time'], () => {\n            }, {\n                params: {\n                    time: median_val\n                }\n            });\n        }\n\n        this.container.extendState({\n            \"current_value\": curr_str\n        });\n        this.editor.clearSelection();\n    }\n\n}\n","import { DIODE_Context } from \"./context\";\n\n\nexport class DIODE_Context_CodeOut extends DIODE_Context {\n    constructor(diode, gl_container, state) {\n        super(diode, gl_container, state);\n\n        this.editor = null;\n    }\n\n    setupEvents(project) {\n        super.setupEvents(project);\n\n        const transthis = this;\n\n        const eh = this.diode.goldenlayout.eventHub;\n        this.on(this._project.eventString('-req-new-codeout'), (msg) => {\n\n            if (msg.sdfg_name != this.getState()['sdfg_name']) {\n                // Name mismatch; ignore\n                return;\n            }\n            // See DIODE Errata \"GoldenLayout:EventResponses\"\n            //eh.emit(transthis.project().eventString('new-codeout'), 'ok')\n            setTimeout(x => eh.emit(transthis.project().eventString('new-codeout'), 'ok'), 1);\n            const extracted = msg;\n            this.setCode(extracted);\n        });\n    }\n\n    cleanCode(codestr) {\n        // Removes '////DACE:'-comments in the output code\n        return codestr.replace(/\\s*\\/\\/\\/\\/\\_\\_DACE:[^\\n]*/gm, \"\");\n    }\n\n    setCode(extracted) {\n        const input = extracted;\n        if (typeof extracted === \"string\") {\n            extracted = JSON.parse(extracted);\n        }\n\n        if (typeof extracted.generated_code == \"string\") {\n            this.editor.setValue(this.cleanCode(extracted.generated_code));\n            this.editor.clearSelection();\n        } else {\n            // Probably an array type\n            this.editor.setValue(\"\");\n            this.editor.clearSelection();\n            for (const c of extracted.generated_code) {\n                let v = c;\n                if (extracted.generated_code.length > 1) {\n                    v = \"\\n\\n\\n\" + \"#########  NEXT CODE FILE ############\\n\\n\\n\" + v;\n                }\n                const session = this.editor.getSession();\n                session.insert({\n                    row: session.getLength(),\n                    column: 0\n                }, this.cleanCode(v));\n                this.editor.clearSelection();\n            }\n        }\n        this.saveToState({ 'code': input });\n    }\n\n    setEditorReference(editor) {\n        this.editor = editor;\n\n        const elem = this.container.getElement()[0];\n        elem.addEventListener('resize', x => {\n            this.editor.resize();\n        });\n    }\n}\n","// Copyright 2019-2021 ETH Zurich and the DaCe authors. All rights reserved.\n\nconst { $ } = globalThis;\n\nexport class ContextMenu {\n    /*\n        Implementation for a custom context menu\n    */\n    constructor(html_content = null) {\n\n        this._html_content = html_content;\n        this._click_close_handlers = [];\n\n        this._ = setTimeout(() => {\n            this._click_close_handlers = [\n                ['click', x => {\n                    this.destroy();\n                }],\n                ['contextmenu', x => {\n                    this.destroy();\n                }]\n\n            ];\n\n            for (let x of this._click_close_handlers) {\n                window.addEventListener(...x);\n            }\n        }, 30);\n\n        this._options = [];\n        this._cmenu_elem = null;\n    }\n\n    width() {\n        return this._cmenu_elem.offsetWidth;\n    }\n\n    visible() { return this._cmenu_elem != null; }\n\n    addOption(name, onselect, onhover = null) {\n        this._options.push({\n            name: name,\n            func: onselect,\n            onhover: onhover\n        });\n    }\n\n    addCheckableOption(name, checked, onselect, onhover = null) {\n        this._options.push({\n            name: name,\n            checkbox: true,\n            checked: checked,\n            func: onselect,\n            onhover: onhover\n        });\n    }\n\n    destroy() {\n        if (!this._cmenu_elem)\n            return;\n        // Clear everything\n\n        // Remove the context menu\n\n        document.body.removeChild(this._cmenu_elem);\n\n        for (let x of this._click_close_handlers) {\n            window.removeEventListener(...x);\n        }\n\n        this._cmenu_elem = null;\n    }\n\n    show(x, y) {\n        /*\n            Shows the context menu originating at point (x,y)\n        */\n\n        let cmenu_div = document.createElement('div');\n        cmenu_div.id = \"contextmenu\";\n        $(cmenu_div).css('left', x + \"px\");\n        $(cmenu_div).css('top', y + \"px\");\n        cmenu_div.classList.add(\"context_menu\");\n\n\n        if (this._html_content == null) {\n            // Set default context menu\n\n            for (let x of this._options) {\n\n                let elem = document.createElement('div');\n                elem.addEventListener('click', x.func);\n                elem.classList.add(\"context_menu_option\");\n\n                if (x.checkbox) {\n                    let markelem = document.createElement('span');\n                    markelem.classList = x.checked ? 'checkmark_checked' : 'checkmark';\n                    elem.appendChild(markelem);\n                    elem.innerHTML += x.name;\n                    elem.addEventListener('click', elem => {\n                        x.checked = !x.checked;\n                        x.func(elem, x.checked);\n                    });\n                } else {\n                    elem.innerText = x.name;\n                    elem.addEventListener('click', x.func);\n                }\n                cmenu_div.appendChild(elem);\n            }\n        }\n        else {\n            cmenu_div.innerHTML = this._html_content;\n        }\n\n        this._cmenu_elem = cmenu_div;\n        document.body.appendChild(cmenu_div);\n    }\n}\n","import { SDFG_PropUtil } from \"../../utils/sdfg/sdfg_parser\";\nimport { find_exit_for_entry } from \"../../utils/sdfg/find_exit_for_entry\";\nimport { parse_sdfg } from \"../../utils/sdfg/json_serializer\";\nimport { ContextMenu } from \"../../utils/context_menu\";\nimport { DIODE_Context } from \"./context\";\n\n\nexport class DIODE_Context_SDFG extends DIODE_Context {\n    constructor(diode, gl_container, state) {\n        super(diode, gl_container, state);\n\n        this._message_handler = x => alert(x);\n\n        this.renderer_pane = null;\n\n        this._analysis_values = {};\n\n        console.log(\"state\", state);\n    }\n\n    saveToState(dict_value) {\n        const renamed_dict = {};\n        const json_list = ['sdfg_data', 'sdfg'];\n        for (const x of Object.entries(dict_value)) {\n            renamed_dict[x[0]] = (json_list.includes(x[0]) && typeof (x[1]) != 'string') ? JSON.stringify(x[1]) : x[1];\n        }\n        super.saveToState(renamed_dict);\n\n        console.assert(this.getState().sdfg == undefined);\n    }\n\n    resetState(dict_value) {\n        const renamed_dict = {};\n        const json_list = ['sdfg_data', 'sdfg'];\n        for (const x of Object.entries(dict_value)) {\n            renamed_dict[x[0]] = (json_list.includes(x[0]) && typeof (x[1]) != 'string') ? JSON.stringify(x[1]) : x[1];\n        }\n        super.resetState(renamed_dict);\n        console.assert(this.getState().sdfg == undefined);\n    }\n\n    getState() {\n        const _state = super.getState();\n        const _transformed_state = {};\n        const json_list = ['sdfg_data', 'sdfg'];\n        for (const x of Object.entries(_state)) {\n            _transformed_state[x[0]] = (typeof (x[1]) == 'string' && json_list.includes(x[0])) ? JSON.parse(x[1]) : x[1];\n        }\n        return _transformed_state;\n    }\n\n    setupEvents(project) {\n        super.setupEvents(project);\n\n        const transthis = this;\n\n        const eh = this.diode.goldenlayout.eventHub;\n        this.on(this._project.eventString('-req-new-sdfg'), (msg) => {\n\n            if (typeof (msg) == 'string')\n                msg = parse_sdfg(msg);\n            if (msg.sdfg_name === this.getState()['sdfg_name']) {\n                // Ok\n            } else {\n                // Names don't match - don't replace this one then.\n                // #TODO: This means that renamed SDFGs will not work as expected.\n                return;\n            }\n            setTimeout(() => eh.emit(this.project().eventString('new-sdfg'), 'ok'), 1);\n            this.create_renderer_pane(msg, true);\n        });\n\n        // #TODO: When multiple sdfgs are present, the event name\n        // should include a hash of the target context\n        this.on(this._project.eventString('-req-sdfg-msg'), msg => {\n\n            let ret = this.message_handler_filter(msg);\n            if (ret === undefined) {\n                ret = 'ok';\n            }\n            setTimeout(() => eh.emit(transthis._project.eventString('sdfg-msg'), ret), 1);\n        });\n\n        this.on(this._project.eventString('-req-sdfg_props'), msg => {\n            // Echo with data\n            if (msg != undefined) {\n                this.discardInvalidated(msg);\n            }\n            const resp = this.getChangedSDFGPropertiesFromState();\n            const named = {};\n            named[this.getState()['sdfg_name']] = resp;\n            setTimeout(() => eh.emit(transthis._project.eventString('sdfg_props'), named), 1);\n        }, true);\n\n        this.on(this.project().eventString('-req-property-changed-' + this.getState().created), (msg) => {\n            // Emit ok directly (to avoid caller timing out)\n            setTimeout(() => eh.emit(this.project().eventString(\"property-changed-\" + this.getState().created), \"ok\"), 1);\n\n            if (msg.type == \"symbol-properties\") {\n                this.symbolPropertyChanged(msg.element, msg.name, msg.value);\n            }\n            else\n                this.propertyChanged(msg.element, msg.name, msg.value);\n\n        }, true);\n\n        this.on(this.project().eventString('-req-delete-data-symbol-' + this.getState().created), (msg) => {\n            setTimeout(() => eh.emit(this.project().eventString(\"delete-data-symbol-\" + this.getState().created), \"ok\"), 1);\n\n            this.removeDataSymbol(msg);\n        });\n\n        this.on(this.project().eventString('-req-add-data-symbol-' + this.getState().created), (msg) => {\n            setTimeout(() => eh.emit(this.project().eventString(\"add-data-symbol-\" + this.getState().created), \"ok\"), 1);\n\n            this.addDataSymbol(msg.type, msg.name);\n        });\n\n        this.on(this.project().eventString('-req-draw-perfinfo'), (msg) => {\n            setTimeout(() => eh.emit(transthis._project.eventString('draw-perfinfo'), \"ok\"), 1);\n            this._analysis_values = msg.map(x => ({\n                forProgram: x[0],\n                AnalysisName: x[1],\n                runopts: x[2],\n                forUnifiedID: x[3],\n                forSuperSection: x[4],\n                forSection: x[5],\n                data: JSON.parse(x[6]),\n            }));\n            this.renderer_pane.drawAllPerfInfo();\n        });\n\n        this.on(this.project().eventString('-req-sdfg_object'), msg => {\n            // Return the entire serialized SDFG\n            const _state = this.getSDFGDataFromState();\n            const sdfg = _state.type == 'SDFG' ? _state : _state.sdfg;\n            const named = {};\n            named[this.getState()['sdfg_name']] = sdfg;\n            //named = JSON.stringify(named);\n            setTimeout(() => eh.emit(this.project().eventString(\"sdfg_object\"), named), 1);\n        }, true);\n    }\n\n    removeDataSymbol(aname) {\n\n        const o = this.getSDFGDataFromState();\n        const sdfg = o['sdfg'];\n\n        let found = false;\n        for (const x of Object.keys(sdfg.attributes._arrays)) {\n            if (x == aname) {\n                // Matching name\n                delete sdfg.attributes._arrays[x];\n                found = true;\n                break;\n            }\n        }\n        if (!found)\n            console.error(\"Did not find symbol \" + name + \" in SDFG, this is a fatal error\");\n\n        const old = this.getState();\n        if (old.type == \"SDFG\")\n            console.error(\"Defensive programming no longer allowed; change input\");\n\n        else\n            old.sdfg_data.sdfg = sdfg;\n\n        this.resetState(old);\n\n        this.diode.refreshSDFG();\n    }\n\n    addDataSymbol(type, aname) {\n\n        if (aname == \"\") {\n            alert(\"Invalid symbol name. Enter a symbol name in the input field\");\n            return;\n        }\n\n        // Create a dummy element, then allow changing later\n        let typestr = \"\";\n        if (type == \"Scalar\")\n            typestr = \"Scalar\";\n        else if (type == \"Array\")\n            typestr = \"Array\";\n        const data = {\n            type: typestr,\n            attributes: {\n                dtype: \"int32\",\n            }\n        };\n\n        const o = this.getSDFGDataFromState();\n        const sdfg = o['sdfg'];\n\n        let found = false;\n        for (const x of Object.keys(sdfg.attributes._arrays)) {\n            if (x == aname) {\n                // Matching name\n                found = true;\n                break;\n            }\n        }\n        if (found) {\n            this.diode.toast(\"Cannot add symbol\", \"A symbol with name \" + aname + \" does already exist.\", \"error\", 3000);\n            return;\n        }\n\n        sdfg.attributes._arrays[aname] = data;\n        const old = this.getState();\n        if (old.type == \"SDFG\")\n            console.error(\"Defensive programming no longer allowed; change input\");\n\n        else\n            old.sdfg_data.sdfg = sdfg;\n\n        this.resetState(old);\n\n\n        this.diode.refreshSDFG();\n    }\n\n    analysisProvider(aname, nodeinfo) {\n\n        let unified_id = null;\n        if (nodeinfo != null) {\n            unified_id = (parseInt(nodeinfo.stateid) << 16) | parseInt(nodeinfo.nodeid);\n        }\n        console.log(\"analysisProvider\", aname, nodeinfo);\n        if (aname == \"getstates\") {\n\n            const states = this._analysis_values.map(x => (x.forUnifiedID >> 16) & 0xFFFF);\n            return states;\n        } else if (aname == \"getnodes\") {\n            const nodes = this._analysis_values.map(x => (x.forUnifiedID) & 0xFFFF);\n            return nodes;\n        } else if (aname == \"all_vec_analyses\") {\n            const vec_analyses = this._analysis_values.filter(x => x.AnalysisName == 'VectorizationAnalysis');\n            const fltrd_vec_analyses = vec_analyses.filter(x => x.forUnifiedID == unified_id);\n            return fltrd_vec_analyses;\n        } else if (aname == 'CriticalPathAnalysis') {\n            const cpa = this._analysis_values.filter(x => x.AnalysisName == 'CriticalPathAnalysis');\n            const filtered = cpa.filter(x => x.forUnifiedID == unified_id);\n            return filtered;\n        } else if (aname == 'ParallelizationAnalysis') {\n            const pa = this._analysis_values.filter(x => x.AnalysisName == 'ThreadAnalysis');\n            const filtered = pa.filter(x => x.forUnifiedID == unified_id);\n            return filtered;\n        } else if (aname == 'MemoryAnalysis') {\n            const ma = this._analysis_values.filter(x => x.AnalysisName == 'MemoryAnalysis');\n            const filtered = ma.filter(x => x.forUnifiedID == unified_id);\n            return filtered;\n        } else if (aname == 'MemOpAnalysis') {\n            const moa = this._analysis_values.filter(x => x.AnalysisName == 'MemoryOpAnalysis');\n            const filtered = moa.filter(x => x.forUnifiedID == unified_id);\n            return filtered;\n        } else if (aname == 'CacheOpAnalysis') {\n            const coa = this._analysis_values.filter(x => x.AnalysisName == 'CacheOpAnalysis');\n            const filtered = coa.filter(x => x.forUnifiedID == unified_id);\n            return filtered;\n        } else if (aname == \"defaultRun\") {\n            // This pseudo-element returns a filter function that returns only elements from the \"default\" run configuration\n            // #TODO: Make the default run configurable.\n            // For now, the default run is the run with the most committed cores\n            //return x => x.filter(y => y.runopts == '# ;export OMP_NUM_THREADS=4; Running in multirun config');\n            return x => {\n                const tmp = x.map(y => {\n                    const r = [];\n                    y.runopts.replace(/OMP_NUM_THREADS=(\\d+)/gm, (m, p) => r.push(p));\n                    return r;\n                });\n                const max_num = Math.max(...tmp.map(x => parseInt(x)));\n                return x.filter(z => z.runopts == '# ;export OMP_NUM_THREADS=' + max_num + '; Running in multirun config');\n            };\n        } else {\n            throw \"#TODO\";\n        }\n    }\n\n    message_handler_filter(msg) {\n        /*\n            This function is a compatibility layer\n        */\n        msg = JSON.parse(msg);\n        if (msg.sdfg_name != this.getState()['sdfg_name']) {\n            return;\n        }\n        if (msg.type == 'clear-highlights') {\n            if (this.highlighted_elements)\n                this.highlighted_elements.forEach(e => {\n                    if (e)\n                        e.highlighted = false;\n                });\n            this.highlighted_elements = [];\n            this.renderer_pane.draw_async();\n        }\n        if (msg.type == 'highlight-elements') {\n            // Clear previously highlighted elements\n            if (this.highlighted_elements)\n                this.highlighted_elements.forEach(e => {\n                    if (e)\n                        e.highlighted = false;\n                });\n            this.highlighted_elements = [];\n\n            // The input contains a list of multiple elements\n            for (const x of msg.elements) {\n                const sdfg_id = x[0], sid = x[1], nid = x[2];\n                let elem = null;\n                let graph = null;\n                if (sdfg_id >= 0)\n                    graph = this.renderer_pane.sdfg_list[sdfg_id];\n\n                else\n                    graph = this.renderer_pane.graph;\n\n                // If graph is hidden, skip\n                if (graph === undefined)\n                    continue;\n\n                if (sid == -1)\n                    elem = graph.node(nid);\n                else {\n                    const state = graph.node(sid);\n                    // If state is hidden, skip\n                    if (state === undefined)\n                        continue;\n                    elem = state.data.graph.node(nid);\n                }\n                if (elem !== undefined)\n                    this.highlighted_elements.push(elem);\n            }\n            this.highlighted_elements.forEach(e => {\n                if (e)\n                    e.highlighted = true;\n            });\n            this.renderer_pane.draw_async();\n        } else {\n            // Default behavior is passing through (must be an object, not JSON-string)\n            //this._message_handler(msg);\n        }\n    }\n\n    // Returns a goldenlayout component if exists, or null if doesn't\n    has_component(comp_name, parent = null) {\n        // If parent component not provided, use root window\n        if (!parent)\n            parent = this.diode.goldenlayout.root;\n        if ('componentName' in parent && parent.componentName === comp_name)\n            return parent;\n        if ('contentItems' in parent) {\n            for (const ci of parent.contentItems) {\n                const result = this.has_component(comp_name, ci);\n                if (result)\n                    return result;\n            }\n        }\n        return null;\n    }\n\n    render_free_variables(force_open) {\n        let sdfg_dat = this.getSDFGDataFromState();\n        if (sdfg_dat.type != \"SDFG\")\n            sdfg_dat = sdfg_dat.sdfg;\n        this.diode.replaceOrCreate(['render-free-vars'], 'PropWinComponent', {\n            data: sdfg_dat,\n            calling_context: this.created\n        },\n            () => {\n                console.log(\"Calling recreation function\");\n                const config = {\n                    type: 'component',\n                    componentName: 'PropWinComponent',\n                    componentState: {}\n                };\n\n                this.diode.addContentItem(config);\n                setTimeout(() => this.render_free_variables(force_open), 1);\n            });\n    }\n\n    merge_properties(node_a, aprefix, node_b, bprefix) {\n        /*  Merges node_a and node_b into a single node, such that the rendered properties are identical\n            when selecting either node_a or node_b.\n        */\n        const en_attrs = SDFG_PropUtil.getAttributeNames(node_a);\n        const ex_attrs = SDFG_PropUtil.getAttributeNames(node_b);\n\n        const new_attrs = {};\n\n        for (const na of en_attrs) {\n            const meta = SDFG_PropUtil.getMetaFor(node_a, na);\n            if (meta.indirected) {\n                // Most likely shared. Don't change.\n                new_attrs['_meta_' + na] = meta;\n                new_attrs[na] = node_a.attributes[na];\n            } else {\n                // Private. Add, but force-set a new Category (in this case, MapEntry)\n                const mcpy = JSON.parse(JSON.stringify(meta));\n                mcpy['category'] = node_a.type + \" - \" + mcpy['category'];\n                new_attrs['_meta_' + aprefix + na] = mcpy;\n                new_attrs[aprefix + na] = node_a.attributes[na];\n            }\n\n        }\n        // Same for ex_attrs, but don't add if shared\n        for (const xa of ex_attrs) {\n            const meta = SDFG_PropUtil.getMetaFor(node_b, xa);\n            if (!meta.indirected) {\n                const mcpy = JSON.parse(JSON.stringify(meta));\n                mcpy['category'] = node_b.type + \" - \" + mcpy['category'];\n                mcpy['_noderef'] = node_b.node_id;\n                new_attrs['_meta_' + bprefix + xa] = mcpy;\n                new_attrs[bprefix + xa] = node_b.attributes[xa];\n            }\n        }\n        // Copy the first node for good measure\n        // TODO: Inhibits property update for map/array\n        const ecpy = JSON.parse(JSON.stringify(node_a));\n        ecpy.attributes = new_attrs;\n        return ecpy;\n    }\n\n    getSDFGPropertiesFromState() {\n        const o = this.getSDFGDataFromState();\n        const props = o['sdfg_props'];\n\n        return props;\n    }\n\n    getSDFGDataFromState() {\n        const _state = this.getState();\n        let o = null;\n        if (_state.sdfg != undefined) {\n            o = _state;\n        } else {\n            o = _state['sdfg_data'];\n        }\n        if ((typeof o) == 'string') {\n            o = JSON.parse(o);\n        }\n        while (typeof o.sdfg == 'string') {\n            o.sdfg = parse_sdfg(o.sdfg);\n        }\n        return o;\n    }\n\n    renderProperties(node) {\n        /*\n            node: object, duck-typed\n                \n        */\n        const params = node.data;\n        const transthis = this;\n\n        // Render in the (single, global) property window\n        this.diode.renderPropertiesInWindow(transthis, node, params);\n    }\n\n    getSDFGElementReference(node_id, state_id) {\n        if (node_id != null && node_id.constructor == Object) {\n            return this.getEdgeReference(node_id, state_id);\n        } else {\n            return this.getNodeReference(node_id, state_id);\n        }\n    }\n\n    getEdgeReference(node_id, state_id) {\n        const o = this.getSDFGDataFromState();\n        const sdfg = o['sdfg'];\n\n        if (state_id == undefined) {\n            // Look for sdfg-level edges\n            for (const e of sdfg.edges) {\n                if (e.src == node_id.src && e.dst == node_id.dst) {\n                    return [e.attributes.data, sdfg];\n                }\n            }\n        }\n\n        for (const x of sdfg.nodes) {\n            if (x.id == state_id) {\n                for (const e of x.edges) {\n\n                    if (e.src == node_id.src && e.dst == node_id.dst) {\n                        return [e.attributes.data, sdfg];\n                    }\n                }\n\n                break;\n            }\n        }\n    }\n\n    getNodeReference(node_id, state_id) {\n        const o = this.getSDFGDataFromState();\n        const sdfg = o['sdfg'];\n\n        for (const x of sdfg.nodes) {\n            if (x.id == state_id) {\n\n                if (node_id == null)\n                    return [x, sdfg];\n                for (const n of x.nodes) {\n\n                    if (n.id == node_id) {\n                        return [n, sdfg];\n                    }\n                }\n\n                break;\n            }\n        }\n    }\n\n\n    symbolPropertyChanged(node, name, value) {\n        /*\n            A data symbol was changed.\n        */\n        console.log(\"symbolPropertyChanged\", name, value);\n\n        // Search arrays first\n        const o = this.getSDFGDataFromState();\n        const sdfg = o['sdfg'];\n\n        let found = false;\n        const d = node.data();\n        for (const x of Object.keys(sdfg.attributes._arrays)) {\n            if (x == d[0]) {\n                // Matching name\n                sdfg.attributes._arrays[x].attributes[name] = value;\n                found = true;\n                break;\n            }\n        }\n        if (!found)\n            console.error(\"Did not find symbol \" + name + \" in SDFG, this is a fatal error\");\n\n        const old = this.getState();\n        if (old.type == \"SDFG\")\n            console.error(\"Defensive programming no longer allowed; change input\");\n\n        else\n            old.sdfg_data.sdfg = sdfg;\n\n        this.resetState(old);\n\n        this.diode.refreshSDFG();\n    }\n\n    propertyChanged(node, name, value) {\n        /*\n            When a node-property is changed, the changed data is written back\n            into the state.\n        */\n        const nref = node.element;\n\n        nref.attributes[name] = value;\n\n        const sdfg = this.renderer_pane.sdfg;\n        let old = this.getState();\n        if (old.type == \"SDFG\")\n            old = sdfg;\n\n        else\n            old.sdfg_data.sdfg = sdfg;\n\n        this.resetState(old);\n\n        this.diode.refreshSDFG();\n    }\n\n\n    create_renderer_pane(sdfg_data = undefined, update = false) {\n        if (sdfg_data == undefined) {\n            sdfg_data = this.getState()[\"sdfg_data\"];\n        }\n        let tmp = sdfg_data;\n        if ((typeof tmp) === 'string') {\n            tmp = parse_sdfg(sdfg_data);\n        } else {\n            if ('sdfg' in sdfg_data)\n                tmp = sdfg_data;\n\n            else\n                tmp = { sdfg: sdfg_data };\n        }\n\n        {\n            // Load the properties from json instead of loading the old properties\n            // This means deleting any property delivered\n            // This is just so we don't accidentally use the old format\n            console.assert(tmp.sdfg_props === undefined);\n\n        }\n\n        {\n            // Reset the state to avoid artifacts\n            const s = this.getState();\n            console.assert(s.sdfg_data != undefined);\n            delete s.sdfg_data;\n            this.resetState(s);\n        }\n        this.saveToState({\n            \"sdfg_data\": tmp\n        });\n\n        if (this.renderer_pane !== null)\n            this.renderer_pane.set_sdfg(tmp.sdfg);\n        else {\n            const sdfv = new SDFGRenderer(tmp.sdfg, this.container.getElement()[0],\n                (et, e, c, el, r, sle, ed) => this.on_renderer_mouse_event(et, e, c, el, r, sle, ed),\n                null, false, 'white');\n            this.renderer_pane = sdfv;\n        }\n\n        // Display data descriptors by default (in parallel to the creation of the renderer)\n        this.render_free_variables(true);\n    }\n\n    on_renderer_mouse_event(evtype, event, canvas_coords, elements, renderer, selected_elements, ends_drag) {\n        let state_only = false;\n        const clicked_states = elements.states;\n        const clicked_nodes = elements.nodes;\n        const clicked_edges = elements.edges;\n        const clicked_interstate_edges = elements.isedges;\n        const clicked_connectors = elements.connectors;\n        let total_elements = clicked_states.length + clicked_nodes.length + clicked_edges.length +\n            clicked_interstate_edges.length + clicked_connectors.length;\n        let foreground_elem = null;\n        if (selected_elements.length > 0)\n            foreground_elem = selected_elements[0];\n\n        else\n            total_elements = 0;\n\n\n        // Clear context menu\n        if (evtype === 'click' || evtype === 'doubleclick' || evtype === 'mousedown' || evtype === 'contextmenu' ||\n            evtype === 'wheel') {\n            if (this.contextmenu) {\n                this.contextmenu.destroy();\n                this.contextmenu = null;\n            }\n        }\n\n        // Check if anything was clicked at all\n        if (total_elements == 0 && evtype === 'click') {\n            // Clear highlighted elements\n            if (this.highlighted_elements)\n                this.highlighted_elements.forEach(e => {\n                    if (e)\n                        e.stroke_color = null;\n                });\n\n            // Nothing was selected\n            this.render_free_variables(false);\n            return true;\n        }\n        if (total_elements == 0 && evtype === 'contextmenu') {\n            const cmenu = new ContextMenu();\n            cmenu.addOption(\"SDFG Properties\", x => {\n                this.render_free_variables(true);\n            });\n            cmenu.show(event.x, event.y);\n            this.contextmenu = cmenu;\n            return false;\n        }\n\n        if ((clicked_nodes.length + clicked_edges.length + clicked_interstate_edges.length) === 0) {\n            // A state was selected\n            if (clicked_states.length > 0)\n                state_only = true;\n        }\n\n        let state_id = null, node_id = null;\n        if (clicked_states.length > 0)\n            state_id = clicked_states[0].id;\n        if (clicked_interstate_edges.length > 0)\n            node_id = clicked_interstate_edges[0].id;\n\n        if (clicked_nodes.length > 0)\n            node_id = clicked_nodes[0].id;\n        else if (clicked_edges.length > 0)\n            node_id = clicked_edges[0].id;\n\n\n        if (evtype === \"contextmenu\") {\n            // Context menu was requested\n            const spos = { x: event.x, y: event.y };\n            const sdfg_name = renderer.sdfg.attributes.name;\n\n            const cmenu = new ContextMenu();\n\n            ///////////////////////////////////////////////////////////\n            // Collapse/Expand\n            const sdfg = (foreground_elem ? foreground_elem.sdfg : null);\n            let sdfg_elem = null;\n            if (foreground_elem instanceof State)\n                sdfg_elem = foreground_elem.data.state;\n            else if (foreground_elem instanceof SDFGNode) {\n                sdfg_elem = foreground_elem.data.node;\n\n                // If a scope exit node, use entry instead\n                if (sdfg_elem.type.endsWith(\"Exit\"))\n                    sdfg_elem = sdfg.nodes[foreground_elem.parent_id].nodes[sdfg_elem.scope_entry];\n            }\n            else\n                sdfg_elem = null;\n\n            // Toggle collapsed state\n            if (sdfg_elem && 'is_collapsed' in sdfg_elem.attributes) {\n                cmenu.addOption((sdfg_elem.attributes.is_collapsed) ? 'Expand' : 'Collapse',\n                    x => {\n                        sdfg_elem.attributes.is_collapsed = !sdfg_elem.attributes.is_collapsed;\n                        this.renderer_pane.relayout();\n                        this.renderer_pane.draw_async();\n                    });\n            }\n            ///////////////////////////////////////////////////////////\n            cmenu.addOption(\"Show transformations\", x => {\n                console.log(\"'Show transformations' was clicked\");\n\n                this.project().request(['highlight-transformations-' + sdfg_name], x => {\n                }, {\n                    params: {\n                        state_id: state_id,\n                        node_id: node_id\n                    }\n                });\n            });\n            cmenu.addOption(\"Apply transformation \\u25B6\", x => {\n                console.log(\"'Apply transformation' was clicked\");\n\n                // Find available transformations for this node\n                this.project().request(['get-transformations-' + sdfg_name], x => {\n                    console.log(\"get-transformations response: \", x);\n\n                    const tmp = Object.values(x)[0];\n\n                    // Create a sub-menu at the correct position\n                    const submenu = new ContextMenu();\n\n                    for (const y of tmp) {\n                        submenu.addOption(y.opt_name, x => {\n                            this.project().request(['apply-transformation-' + sdfg_name], x => {\n                            },\n                                {\n                                    params: y.id_name\n                                });\n                        });\n                    }\n\n                    submenu.show(spos.x + cmenu.width(), spos.y);\n                }, {\n                    params: {\n                        state_id: state_id,\n                        node_id: node_id\n                    }\n                });\n\n\n                // Don't close the current context menu from this event\n                x.preventDefault();\n                x.stopPropagation();\n            });\n            cmenu.addOption(\"Show Source Code\", x => {\n                console.log(\"go to source code\");\n            });\n            cmenu.addOption(\"Show Generated Code\", x => {\n                console.log(\"go to generated code\");\n            });\n            cmenu.addOption(\"Properties\", x => {\n                console.log(\"Force-open property pane\");\n            });\n\n            cmenu.show(spos.x, spos.y);\n            this.contextmenu = cmenu;\n\n            return false;\n        }\n\n        if (evtype !== \"click\")\n            return false;\n\n        // Clear highlighted elements\n        if (this.highlighted_elements)\n            this.highlighted_elements.forEach(e => {\n                if (e)\n                    e.stroke_color = null;\n            });\n        // Mark this element red\n        this.highlighted_elements = selected_elements;\n\n        // Render properties asynchronously\n        setTimeout(() => {\n            // Get and render the properties from now on\n            console.log(\"sdfg\", foreground_elem.sdfg);\n\n            let dst_nodeid = null;\n            if (foreground_elem instanceof Edge && foreground_elem.parent_id !== null) {\n                const edge = foreground_elem.sdfg.nodes[state_id].edges[foreground_elem.id];\n                dst_nodeid = edge.dst;\n            }\n\n            const render_props = element_list => {\n                const properties = [];\n                element_list.forEach(element => {\n                    // Collect all properties and metadata for each element\n                    const attr = element.attributes;\n                    const akeys = Object.keys(attr).filter(x => !x.startsWith(\"_meta_\"));\n\n                    for (const k of akeys) {\n                        const value = attr[k];\n                        const meta = attr[\"_meta_\" + k];\n                        if (meta == undefined)\n                            continue;\n\n                        const pdata = JSON.parse(JSON.stringify(meta));\n                        pdata.value = value;\n                        pdata.name = k;\n\n                        properties.push({\n                            property: pdata, element: element, sdfg: foreground_elem.sdfg,\n                            category: element.type + ' - ' + pdata.category\n                        });\n                    }\n                });\n                this.renderProperties({\n                    data: properties\n                });\n            };\n\n            if (foreground_elem instanceof Edge)\n                render_props([foreground_elem.data]);\n            else if (foreground_elem instanceof SDFGNode) {\n                const n = foreground_elem.data.node;\n                // Set state ID, if exists\n                n.parent_id = foreground_elem.parent_id;\n                const state = foreground_elem.sdfg.nodes[foreground_elem.parent_id];\n                // Special case treatment for scoping nodes (i.e. Maps, Consumes, ...)\n                if (n.type.endsWith(\"Entry\")) {\n                    // Find the matching exit node\n                    const exit_node = find_exit_for_entry(state.nodes, n);\n\n                    // Highlight both entry and exit nodes\n                    const graph = renderer.sdfg_list[foreground_elem.sdfg.sdfg_list_id];\n                    const gstate = graph.node(foreground_elem.parent_id);\n                    const rnode = gstate.data.graph.node(exit_node.id);\n                    this.highlighted_elements.push(rnode);\n\n                    render_props([n, exit_node]);\n                } else if (n.type.endsWith(\"Exit\")) {\n                    // Find the matching entry node and continue with that\n                    const entry_id = parseInt(n.scope_entry);\n                    const entry_node = state.nodes[entry_id];\n\n                    // Highlight both entry and exit nodes\n                    const graph = renderer.sdfg_list[foreground_elem.sdfg.sdfg_list_id];\n                    const gstate = graph.node(foreground_elem.parent_id);\n                    const rnode = gstate.data.graph.node(entry_node.id);\n                    this.highlighted_elements.push(rnode);\n\n                    render_props([entry_node, n]);\n                } else if (n.type === \"AccessNode\") {\n                    // Find matching data descriptor and show that as well\n                    const ndesc = foreground_elem.sdfg.attributes._arrays[n.attributes.data];\n                    render_props([n, ndesc]);\n                }\n                else\n                    render_props([n]);\n            } else if (foreground_elem instanceof State)\n                render_props([foreground_elem.data.state]);\n\n            this.highlighted_elements.forEach(e => {\n                if (e)\n                    e.stroke_color = \"red\";\n            });\n            renderer.draw_async();\n        }, 0);\n\n        // Timeout handler draws asynchronously\n        return false;\n    }\n}\n","// Copyright 2019-2020 ETH Zurich and the DaCe authors. All rights reserved.\n\nexport function find_exit_for_entry(nodes, entry_node) {\n    for (const n of nodes) {\n        if (n.type.endsWith(\"Exit\") && parseInt(n.scope_entry) == entry_node.id) {\n            return n;\n        }\n    }\n    console.warn(\"Did not find corresponding exit\");\n    return null;\n}\n","import { REST_request } from \"../../main\";\nimport { parse_sdfg } from \"../../utils/sdfg/json_serializer\";\nimport * as DiodeTables from \"../table.js\";\nimport { DIODE_Context } from \"./context\";\nconst { $ } = globalThis;\n\nexport class DIODE_Context_PropWindow extends DIODE_Context {\n    constructor(diode, gl_container, state) {\n        super(diode, gl_container, state);\n\n        this._html_container = null;\n\n        this.container.setTitle(\"Properties\");\n    }\n\n    setupEvents(project) {\n        super.setupEvents(project);\n\n        const eh = this.diode.goldenlayout.eventHub;\n        this.on(this.project().eventString('-req-display-properties'), (msg) => {\n            setTimeout(() => eh.emit(this.project().eventString(\"display-properties\"), 'ok'), 1);\n            this.getHTMLContainer().innerHTML = \"\";\n            let p = msg.params;\n            if (typeof (p) == 'string')\n                p = JSON.parse(p);\n            this.diode.renderProperties(msg.transthis, msg.node, p, this.getHTMLContainer(), msg.options);\n        });\n\n        this.on(this.project().eventString('-req-render-free-vars'), msg => {\n            setTimeout(() => eh.emit(this.project().eventString(\"render-free-vars\"), 'ok'), 1);\n            this.renderDataSymbols(msg.calling_context, msg.data);\n        });\n    }\n\n\n    renderDataSymbolProperties(caller_id, symbol) {\n        /*\n            caller_id: .created of calling context (SDFG Context, mainly)\n            symbol: [sym_name, {\n                    .attributes: <attr_obj>\n                    .type: <type name>\n                }]\n        */\n        const reduced_node = {};\n        reduced_node.data = () => symbol;\n        this.diode.renderPropertiesInWindow(caller_id, reduced_node, symbol[1].attributes, {\n            backaction: () => {\n                // #TODO: Implement a quick way of getting back from here\n            },\n            type: \"symbol-properties\"\n        });\n    }\n\n    removeDataSymbol(calling_context, data_name) {\n        this.project().request([\"delete-data-symbol-\" + calling_context], x => {\n        }, {\n            params: data_name\n        });\n    }\n\n    addDataSymbol(calling_context, data_type, data_name) {\n        this.project().request([\"add-data-symbol-\" + calling_context], x => {\n        }, {\n            params: {\n                name: data_name,\n                type: data_type\n            }\n        });\n    }\n\n    renderDataSymbols(calling_context, data) {\n        // #TODO: This creates the default state (as in same as render_free_symbols() in the old DIODE)\n        if (data == null) {\n            console.warn(\"Data has not been set - creating empty window\");\n            return;\n        }\n        const free_symbol_table = new DiodeTables.Table();\n        free_symbol_table.setHeaders(\"Symbol\", \"Type\", \"Dimensions\", \"Controls\");\n\n        // Go over the undefined symbols first, then over the arrays (SDFG::arrays)\n        const all_symbols = [...Object.keys(data.attributes.symbols), \"SwitchToArrays\", ...Object.entries(data.attributes._arrays)];\n\n        const caller_id = calling_context;\n        console.assert(caller_id != undefined && typeof (caller_id) == 'string');\n\n        for (const x of all_symbols) {\n\n            if (x == \"SwitchToArrays\") {\n                // Add a delimiter\n                const col = free_symbol_table.addRow(\"Arrays\");\n                col.childNodes.forEach(x => {\n                    x.colSpan = 4;\n                    x.style = \"text-align:center;\";\n                });\n                continue;\n            }\n            if (x[0] == \"null\" || x[1] == null || typeof x === 'string' || x instanceof String)\n                continue;\n            const edit_but = document.createElement('button');\n            edit_but.addEventListener('click', _x => {\n                this.renderDataSymbolProperties(caller_id, x);\n            });\n            edit_but.innerText = \"Edit\";\n            const del_but = document.createElement('button');\n            del_but.addEventListener('click', _x => {\n                this.removeDataSymbol(caller_id, x[0]);\n            });\n            del_but.innerText = \"Delete\";\n            const but_container = document.createElement('div');\n            but_container.appendChild(edit_but);\n            but_container.appendChild(del_but);\n            free_symbol_table.addRow(x[0], x[1].type, x[1].attributes.dtype + \"[\" + x[1].attributes.shape + \"]\", but_container);\n        }\n\n        free_symbol_table.addRow(\"Add data symbols\").childNodes.forEach(x => {\n            x.colSpan = 4;\n            x.style = \"text-align:center;\";\n        });\n        {\n            const input_name = document.createElement(\"input\");\n            input_name.type = \"text\";\n            input_name.placeholder = \"Symbol name\";\n            const add_scalar = document.createElement(\"button\");\n            add_scalar.innerText = \"Add Scalar\";\n            add_scalar.addEventListener(\"click\", () => {\n                this.addDataSymbol(caller_id, \"Scalar\", input_name.value);\n            });\n            const add_array = document.createElement(\"button\");\n            add_array.addEventListener(\"click\", () => {\n                this.addDataSymbol(caller_id, \"Array\", input_name.value);\n            });\n            add_array.innerText = \"Add Array\";\n\n            const but_container = document.createElement(\"div\");\n            but_container.appendChild(add_scalar);\n            but_container.appendChild(add_array);\n\n            free_symbol_table.addRow(input_name, but_container).childNodes.forEach(x => {\n                x.colSpan = 2;\n                x.style = \"text-align:center;\";\n            });\n\n            const libnode_container = document.createElement(\"div\");\n            const expand_all = document.createElement(\"button\");\n            expand_all.addEventListener(\"click\", () => {\n                // Expand all library nodes\n                REST_request(\"/dace/api/v1.0/expand/\", {\n                    sdfg: data,\n                }, (xhr) => {\n                    if (xhr.readyState === 4 && xhr.status === 200) {\n                        const resp = parse_sdfg(xhr.response);\n                        if (resp.error !== undefined) {\n                            // Propagate error\n                            this.diode.handleErrors(this, resp);\n                        }\n\n                        // Add to history\n                        this.project().request([\"append-history\"], x => {\n                        }, {\n                            params: {\n                                new_sdfg: resp.sdfg,\n                                item_name: \"Expand library nodes\"\n                            }\n                        });\n                    }\n                });\n            });\n            expand_all.innerText = \"Expand all library nodes\";\n            libnode_container.appendChild(expand_all);\n            free_symbol_table.addRow(libnode_container);\n        }\n\n        this.getHTMLContainer().innerHTML = \"\";\n\n        free_symbol_table.setCSSClass('free_symbol_table');\n        free_symbol_table.createIn(this.getHTMLContainer());\n    }\n\n    getHTMLContainer() {\n        const parent = $(this.container.getElement()).children(\".sdfgpropdiv\");\n        return parent[0];\n    }\n\n    createFromState() {\n        const p = this.getHTMLContainer();\n        p.setAttribute(\"data-hint\", '{\"type\": \"DIODE\", \"name\": \"Property_Window\"}');\n        const state = this.getState();\n        if (state.params != undefined && state.params.params != null) {\n            const p = state.params;\n            this.diode.renderProperties(p.transthis, p.node, JSON.parse(p.params), this.getHTMLContainer());\n        }\n    }\n\n}\n","import { REST_request } from \"../../main.js\";\nimport { DIODE_Context } from \"./context\";\nconst { $ } = globalThis;\n\nexport class DIODE_Context_Runqueue extends DIODE_Context {\n    constructor(diode, gl_container, state) {\n        super(diode, gl_container, state);\n\n    }\n\n    setupEvents(project) {\n        super.setupEvents(project);\n\n        const transthis = this;\n\n        const eh = this.diode.goldenlayout.eventHub;\n\n        this._autorefresher = null;\n\n    }\n\n    destroy() {\n        clearInterval(this._autorefresher);\n        super.destroy();\n    }\n\n    refreshUI(data) {\n\n        if (typeof (data) == 'string') {\n            data = JSON.parse(data);\n        }\n\n        if (data.elements == undefined) {\n            data.elements = [];\n        }\n        const base_element = $(this.container.getElement())[0];\n        base_element.innerHTML = \"\";\n        const container = document.createElement(\"div\");\n        $(container).css(\"overflow\", \"auto\");\n        $(container).width(\"100%\");\n        $(container).height(\"100%\");\n        const table = document.createElement(\"table\");\n\n        // Build the header\n        const header = document.createElement(\"thead\");\n        const header_row = document.createElement(\"tr\");\n        const header_titles = ['position', 'clientID', 'state', 'options'];\n        header_titles.map(x => {\n            const h = document.createElement(\"th\");\n            h.innerText = x;\n            return h;\n        }).forEach(x => header_row.appendChild(x));\n\n        header.appendChild(header_row);\n        table.appendChild(header);\n\n        const tbody = document.createElement(\"tbody\");\n        for (const x of data.elements) {\n\n            let optparse = x.options;\n            if (typeof (optparse) == 'string') {\n            } else if (optparse == undefined) {\n                if (x.output != undefined && x.type == \"orphan\") {\n                    optparse = document.createElement(\"button\");\n                    optparse.onclick = click => {\n                        this.diode.addContentItem({\n                            'type': 'component',\n                            'componentName': 'TerminalComponent',\n                            'componentState': {\n                                current_value: x.output\n                            },\n                            'title': 'Output'\n                        });\n                    };\n                    optparse.innerText = \"Output\";\n                }\n            } else {\n                if (optparse.type == undefined) {\n                    optparse = optparse.perfopts;\n                }\n                optparse = optparse.mode + \", coresets \" + optparse.core_counts;\n            }\n            const values = [\n                x['index'],\n                x['client_id'],\n                x['state'],\n                optparse\n            ];\n            const row = document.createElement(\"tr\");\n            values.map(y => {\n                const c = document.createElement(\"td\");\n                if (typeof (y) == 'string' || typeof (y) == 'number')\n                    c.innerText = y;\n                else {\n                    c.appendChild(y);\n                }\n                return c;\n            }).forEach(y => row.appendChild(y));\n            tbody.appendChild(row);\n        }\n\n        table.appendChild(tbody);\n\n\n        container.appendChild(table);\n        base_element.appendChild(container);\n        $(table).DataTable();\n    }\n\n    create() {\n        this._autorefresher = setInterval(x => {\n            this.getCurrentQueue();\n        }, 2000);\n        $(this.container.getElement()).css(\"overflow\", \"auto\");\n        this.refreshUI({});\n    }\n\n    getCurrentQueue() {\n\n        const post_params = {};\n        REST_request(\"/dace/api/v1.0/dispatcher/list/\", post_params, xhr => {\n            if (xhr.readyState === 4 && xhr.status === 200) {\n                // Got response\n                this.refreshUI(xhr.response);\n            }\n        });\n    }\n\n}\n","import { DIODE_Context } from \"./context\";\nimport { DIODE_Project } from \"../diode_project\";\nconst { $ } = globalThis;\n\nexport class DIODE_Context_StartPage extends DIODE_Context {\n    constructor(diode, gl_container, state) {\n        super(diode, gl_container, state);\n    }\n\n    create() {\n        let plus = `<svg width=\"50\" height=\"50\" version=\"1.1\" viewBox=\"0 0 13.2 13.2\" xmlns=\"http://www.w3.org/2000/svg\"><g transform=\"translate(0 -284)\"><g fill=\"none\" stroke=\"#008000\" stroke-width=\"2.65\"><path d=\"m6.61 285v10.6\"/><path d=\"m1.32 290h10.6\"/></g></g></svg>`;\n        plus = \"data:image/svg+xml;base64,\" + btoa(plus);\n\n        this.container.setTitle(\"Start Page\");\n\n\n        const parent = $(this.container.getElement())[0];\n\n        const header = document.createElement('h1');\n        header.id = \"startpage_header\";\n        header.innerText = \"DIODE\";\n        parent.appendChild(header);\n\n        const startpage_container = document.createElement('div');\n        startpage_container.id = 'startpage_container';\n        startpage_container.classList = \"flex_row\";\n        startpage_container.style = \"width: 100%;height:100%;\";\n\n        const startpage_recent = document.createElement('div');\n        startpage_recent.id = 'startpage_recent';\n        {\n            const file_title = document.createElement('div');\n            file_title.innerText = \"New\";\n            file_title.classList = \"startpage_title\";\n            startpage_recent.appendChild(file_title);\n\n            startpage_recent.appendChild(this.createStartpageListElement(\"Create a new Project\", null, null, plus, x => {\n                this.container.close();\n\n                // Force creation of a new \"project\" instance (since we are explicitly creating a new project)\n                // (NOTE: Functionality moved to \"newFile\")\n                //this.diode.createNewProject();\n                this.diode.openUploader(\"code-python\");\n            }));\n\n\n            const recent_title = document.createElement('div');\n            recent_title.innerText = \"Recent\";\n            recent_title.classList = \"startpage_title\";\n            startpage_recent.appendChild(recent_title);\n        }\n        const startpage_resources = document.createElement('div');\n        startpage_resources.id = 'additional_resources';\n        {\n            const resource_title = document.createElement('div');\n            resource_title.innerText = \"Resources\";\n            resource_title.classList = \"startpage_title\";\n            startpage_resources.appendChild(resource_title);\n        }\n\n\n        // Load elements from list\n        {\n            const projects = DIODE_Project.getSavedProjects();\n            for (const p of projects) {\n                console.log(\"p\", p);\n\n                const pdata = DIODE_Project.getProjectData(p);\n\n                startpage_recent.appendChild(this.createStartpageListElement(p, pdata.last_saved, pdata.description, undefined, x => {\n                    DIODE_Project.load(this.diode, p);\n                }));\n            }\n\n        }\n\n        let dace_logo = `\n        <svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\" xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\" id=\"svg13\" height=\"60.891094\" width=\"57.565113\" version=\"1.0\" viewBox=\"0 0 143.91279 152.22773\" inkscape:version=\"0.92.3 (2405546, 2018-03-11)\">\n          \n          <metadata id=\"metadata17\">\n            \n          </metadata>\n          <defs id=\"defs3\">\n            <pattern y=\"0\" x=\"0\" height=\"6\" width=\"6\" patternUnits=\"userSpaceOnUse\" id=\"EMFhbasepattern\"/>\n          </defs>\n          <path id=\"path5\" d=\"m 0,0 h 71.95639 c 39.75591,0 71.95639,34.079345 71.95639,76.11387 0,42.05451 -32.20048,76.11387 -71.95639,76.11387 H 0 Z\" style=\"fill:#0070c0;fill-opacity:1;fill-rule:evenodd;stroke:none\"/>\n          <path id=\"path7\" d=\"M 76.913385,27.183525 115.29013,75.154451 76.913385,123.12538 Z\" style=\"fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:none\"/>\n          <path id=\"path9\" d=\"M 28.622652,27.183525 66.999394,50.049666 V 100.27923 L 28.622652,123.12538 Z\" style=\"fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:none\"/>\n          <path id=\"path11\" d=\"m 67.079345,75.234403 h 9.93398\" style=\"fill:none;stroke:#ffffff;stroke-width:3.99757719px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:8;stroke-dasharray:none;stroke-opacity:1\"/>\n        </svg>`;\n\n        dace_logo = \"data:image/svg+xml;base64,\" + btoa(dace_logo);\n\n        startpage_resources.appendChild(this.createStartpageListElement(\"Visit DaCe on GitHub\", null, null, \"external_lib/GitHub-Mark.png\", x => {\n            window.open(\"https://github.com/spcl/dace\", \"_blank\");\n        }));\n        startpage_resources.appendChild(this.createStartpageListElement(\"Visit project page\", null, null, dace_logo, x => {\n            window.open(\"https://spcl.inf.ethz.ch/Research/DAPP/\", \"_blank\");\n        }));\n\n\n        startpage_container.appendChild(startpage_recent);\n        startpage_container.appendChild(startpage_resources);\n\n        parent.appendChild(startpage_container);\n    }\n\n    createStartpageListElement(name, time, info, image = undefined, onclick = x => x) {\n\n        const diode_image = `<svg width=\"50\" height=\"50\" version=\"1.1\" viewBox=\"0 0 13.229 13.229\" xmlns=\"http://www.w3.org/2000/svg\"><g transform=\"translate(0 -283.77)\" fill=\"none\" stroke=\"#000\" stroke-linecap=\"round\" stroke-width=\".68792\"><path d=\"m3.3994 287.29v6.9099l6.5603-3.7876-6.5644-3.7899z\" stroke-linejoin=\"round\"/><g><path d=\"m3.3191 290.39h-2.6127\"/><path d=\"m12.624 290.41h-2.6647v-3.3585\"/><path d=\"m9.9597 290.41v2.9962\"/></g></g></svg>`;\n        if (image == undefined) {\n            image = \"data:image/svg+xml;base64,\" + btoa(diode_image);\n        }\n        const elem = document.createElement(\"div\");\n        elem.classList = \"startpage_list_element\";\n\n        const cols = document.createElement('div');\n        {\n            cols.classList = \"flex_row\";\n            // Col 1: Image\n            const img = document.createElement('img');\n            img.src = image;\n            img.width = \"50\";\n            img.height = \"50\";\n            cols.appendChild(img);\n\n            // Col 2: Row\n            const col2 = document.createElement('div');\n            {\n                col2.classList = \"flex_column\";\n                // This row includes project name and details\n                const proj_name = document.createElement('span');\n                proj_name.innerText = name;\n                const proj_detail = document.createElement('span');\n                proj_detail.innerText = info;\n\n                col2.appendChild(proj_name);\n                if (info != null)\n                    col2.appendChild(proj_detail);\n                else {\n                    // We have space to use - use a bigger font\n                    proj_name.style.fontSize = \"1.2rem\";\n\n\n                    col2.style.justifyContent = \"center\";\n                }\n            }\n            cols.appendChild(col2);\n\n            const col3 = document.createElement('div');\n            {\n                col3.classList = \"flex_column\";\n                // This row includes project date\n                const proj_date = document.createElement('span');\n                proj_date.innerText = time;\n                const proj_unused = document.createElement('span');\n\n                if (proj_date != null) {\n                    col3.appendChild(proj_date);\n                    col3.appendChild(proj_unused);\n                }\n            }\n            cols.appendChild(col3);\n        }\n        elem.appendChild(cols);\n\n        elem.addEventListener('click', onclick);\n\n        return elem;\n    }\n}\n","import { DIODE_Context } from \"./context\";\nconst { $ } = globalThis;\n\nexport class DIODE_Context_TransformationHistory extends DIODE_Context {\n    constructor(diode, gl_container, state) {\n        super(diode, gl_container, state);\n\n    }\n\n    setupEvents(project) {\n        super.setupEvents(project);\n\n        const eh = this.diode.goldenlayout.eventHub;\n\n        this.on(this.project().eventString('-req-update-tfh'), msg => {\n\n            // Load from project\n            const hist = this.project().getTransformationHistory();\n            this.create(hist);\n            setTimeout(() => eh.emit(this.project().eventString('update-tfh'), 'ok'), 1);\n        });\n    }\n\n    create(hist = []) {\n        let parent_element = this.container.getElement();\n        $(parent_element).css('overflow', 'auto');\n        $(parent_element)[0].setAttribute(\"data-hint\", '{\"type\": \"DIODE_Element\", \"name\": \"TransformationHistory\"}');\n\n        parent_element = $(parent_element)[0];\n\n        parent_element.innerHTML = '';\n\n        const history_base_div = document.createElement(\"div\");\n        history_base_div.classList = \"transformation_history_base\";\n\n        const history_scoll_div = document.createElement(\"div\");\n        history_scoll_div.classList = \"transformation_history_list\";\n\n        this._history_scroll_div = history_scoll_div;\n\n        history_base_div.appendChild(history_scoll_div);\n\n        parent_element.innerHTML = \"\";\n        parent_element.appendChild(history_base_div);\n\n        let i = 0;\n        for (const x of hist) {\n            this.addElementToHistory(x, i);\n            ++i;\n        }\n    }\n\n    addElementToHistory(simple_node, index) {\n        const hsd = this._history_scroll_div;\n\n        const elem = document.createElement(\"div\");\n        elem.classList = \"transformation_history_list_element\";\n\n        const title = document.createElement(\"div\");\n        title.classList = \"transformation_history_list_element_title\";\n        title.innerText = Object.values(simple_node)[0][0].name;\n\n        const ctrl = document.createElement(\"div\");\n        ctrl.classList = \"flex_row transformation_history_list_element_control\";\n\n        {\n            const revert = document.createElement(\"div\");\n            revert.classList = \"revert-button\";\n            revert.title = \"revert\";\n            revert.innerHTML = \"<i class='material-icons'>undo</i>\";\n            $(revert).hover(() => {\n                elem.classList.add(\"revert-hovered\");\n            }, () => {\n                elem.classList.remove(\"revert-hovered\");\n            });\n\n            revert.addEventListener('click', _x => {\n                // Reset to the associated checkpoint\n                const tsh = this.project().getTransformationSnapshots()[index];\n                this.diode.multiple_SDFGs_available({ compounds: tsh[1] });\n\n                // Remove the descending checkpoints\n                this.project().discardTransformationsAfter(index);\n\n                if (true) {\n                    this.diode.gatherProjectElementsAndCompile(this, {}, {\n                        sdfg_over_code: true,\n                    });\n                }\n            });\n\n            ctrl.appendChild(revert);\n        }\n\n        elem.appendChild(title);\n        elem.appendChild(ctrl);\n        hsd.appendChild(elem);\n\n    }\n}\n","import { stringify_sdfg } from \"../../utils/sdfg/json_serializer\";\nimport { DIODE_Context } from \"./context\";\nconst { $ } = globalThis;\n\nexport class DIODE_Context_AvailableTransformations extends DIODE_Context {\n    constructor(diode, gl_container, state) {\n        super(diode, gl_container, state);\n\n        this._tree_view = null;\n        this._current_root = null;\n\n        // Allow overflow\n        const parent_element = this.container.getElement();\n        $(parent_element).css('overflow', 'auto');\n\n        this.operation_running = false;\n    }\n\n    setupEvents(project) {\n        super.setupEvents(project);\n\n        const transthis = this;\n\n        const eh = this.diode.goldenlayout.eventHub;\n        this.on(this._project.eventString('-req-extend-optgraph'), (msg) => {\n\n            const o = msg;\n            if (typeof (o) == \"string\") {\n                JSON.parse(msg);\n            }\n            const sel = o[this.getState()['for_sdfg']];\n            if (sel === undefined) {\n                return;\n            }\n            setTimeout(() => eh.emit(transthis._project.eventString('extend-optgraph'), 'ok'), 1);\n\n            this.create(sel);\n        });\n\n        this.on(this._project.eventString('-req-optpath'), msg => {\n            const named = {};\n            named[this.getState()['for_sdfg']] = [];\n            setTimeout(() => eh.emit(transthis._project.eventString('optpath'), named), 1);\n        });\n\n        const sname = this.getState()['for_sdfg'];\n        this.on(this._project.eventString('-req-new-optgraph-' + sname), msg => {\n            // In any case, inform the requester that the request will be treated\n            const o = JSON.parse(msg);\n            const sel = o.matching_opts;\n            if (sel === undefined) {\n                //eh.emit(transthis._project.eventString('new-optgraph-' + sname), 'not ok');\n                return;\n            }\n            setTimeout(() => eh.emit(transthis._project.eventString('new-optgraph-' + sname), 'ok'), 1);\n\n            this.create(o);\n        });\n\n        this.on(this.project().eventString('-req-highlight-transformations-' + sname), msg => {\n\n            this.getTransformations(msg).forEach(x => this.highlightTransformation(x));\n\n        });\n\n        this.on(this.project().eventString('-req-get-transformations-' + sname), msg => {\n\n            const transforms = this.getTransformations(msg);\n\n            setTimeout(() => eh.emit(transthis._project.eventString('get-transformations-' + sname), transforms), 1);\n        });\n\n        this.on(this.project().eventString('-req-apply-transformation-' + sname), msg => {\n\n            const children = this.getState()['optstruct'];\n            for (const c of Object.values(children)) {\n                for (const d of c) {\n\n                    if (d === undefined)\n                        continue;\n                    if (d.id_name == msg) {\n                        // Call directly.\n                        // (The click handler invokes the simple transformation)\n                        d.representative.dispatchEvent(new Event('click'));\n                    }\n                }\n            }\n        });\n\n        this.on(this.project().eventString('-req-locate-transformation-' + sname), msg => {\n            this.locateTransformation(...JSON.parse(msg));\n        });\n\n        this.on(this.project().eventString('-req-apply-adv-transformation-' + sname), msg => {\n\n            const x = JSON.parse(msg);\n            this.applyTransformation(...x);\n        });\n        this.on(this.project().eventString('-req-append-history'), msg => {\n            this.appendHistoryItem(msg.new_sdfg, msg.item_name);\n        });\n\n        this.on(this.project().eventString('-req-property-changed-' + this.getState().created), (msg) => {\n            this.propertyChanged(msg.element, msg.name, msg.value);\n            setTimeout(() => eh.emit(this.project().eventString(\"property-changed-\" + this.getState().created), \"ok\"), 1);\n        });\n    }\n\n    getTransformations(affecting) {\n        const ret = [];\n        const selstring = \"s\" + affecting.state_id + \"_\" + affecting.node_id;\n        const children = this.getState()['optstruct'];\n        for (const c of Object.values(children)) {\n            for (const d of c) {\n\n                if (d === undefined)\n                    continue;\n                const affects = d.affects;\n\n                if (affects.includes(selstring)) {\n                    ret.push(d);\n                }\n            }\n        }\n        return ret;\n    }\n\n    highlightTransformation(node) {\n        const repr = node.representative;\n        let s = repr.parentNode;\n        while (s) {\n            s.classList.remove(\"at_collapse\");\n            s = s.previousElementSibling;\n        }\n\n        $(repr).css('color', 'red');\n        setTimeout(x => {\n            $(repr).css('color', '');\n        }, 5000);\n    }\n\n    propertyChanged(node, name, value) {\n        return this.propertyChanged2(node, name, value);\n    }\n\n    propertyChanged2(node, name, value) {\n        node.element[name] = value;\n    }\n\n    renderProperties(node, pos, apply_params) {\n        /*\n            node: The TreeNode for which to draw the properties.\n        */\n        const params = node.opt_params;\n\n        const transthis = this;\n\n        const reduced_node = {};\n        reduced_node.data = () => node.opt_params;\n        this.diode.renderPropertiesInWindow(transthis, reduced_node, params, {\n            type: \"transformation\",\n            sdfg_name: this.getState()['for_sdfg'],\n            opt_name: node.opt_name,\n            pos: pos,\n            apply_params: apply_params,\n        });\n    }\n\n\n    sendHighlightRequest(idstring_list) {\n        this._project.request(['sdfg-msg'], resp => {\n        }, {\n            params: JSON.stringify({\n                type: 'highlight-elements',\n                sdfg_name: this.getState()['for_sdfg'],\n                elements: idstring_list\n            }),\n            timeout: 1000\n        });\n    }\n\n    sendClearHighlightRequest() {\n        this._project.request(['sdfg-msg'], resp => {\n        }, {\n            params: JSON.stringify({\n                sdfg_name: this.getState()['for_sdfg'],\n                type: 'clear-highlights',\n            }),\n            timeout: 1000\n        });\n    }\n\n    addNodes(og) {\n\n        const full = {};\n        // Load the available data\n        for (const x of og) {\n            if (full[x.opt_name] === undefined) {\n                full[x.opt_name] = [];\n            }\n            full[x.opt_name].push(x);\n        }\n        const arrayed = [];\n        for (const x of Object.entries(full)) {\n            const k = x[0];\n            const v = x[1];\n            arrayed.push([k, v]);\n        }\n        const sorted = arrayed.sort((a, b) => a[0].localeCompare(b[0]));\n        for (const z of sorted) {\n            const y = z[0];\n            const x = z[1];\n\n            let i = 0;\n            let container_node = undefined;\n            if (x.length > 1) {\n\n                container_node = document.createElement('div');\n                container_node.classList = \"flex_column\";\n\n                const c_title = document.createElement('div');\n                {\n                    const c_title_span = document.createElement(\"span\");\n                    c_title_span.innerText = y;\n                    c_title.classList = \"at_group_header\";\n                    c_title.appendChild(c_title_span);\n\n                    c_title.addEventListener('click', x => {\n                        c_title.classList.toggle(\"at_collapse\");\n                    });\n                }\n\n                container_node.appendChild(c_title);\n\n                this._transformation_list.appendChild(container_node);\n            }\n            for (const n of x) {\n                this.addNode(n, i, container_node);\n                ++i;\n            }\n        }\n        const _s = this.getState();\n        _s.optstruct = full;\n        this.saveToState(_s);\n    }\n\n    locateTransformation(opt_name, opt_pos, affects) {\n        console.log(\"locateTransformation\", arguments);\n\n        this.sendHighlightRequest(affects);\n\n        const _state = this.getState();\n        const _repr = _state.optstruct[opt_name][opt_pos].representative;\n        $(_repr).css(\"background\", \"green\");\n\n        setTimeout(() => {\n            this.sendClearHighlightRequest();\n            $(_repr).css(\"background\", '');\n        }, 1000);\n    }\n\n    applyTransformation(x, pos, _title) {\n        if (this.operation_running)\n            return;\n        this.operation_running = true;\n        const _state = this.getState();\n        const optstruct = _state['optstruct'];\n        const named = {};\n        const cpy = JSON.parse(JSON.stringify(optstruct[x.opt_name][pos]));\n        named[this.getState()['for_sdfg']] = [{\n            name: _title,\n            params: {\n                props: cpy['opt_params']\n            }\n        }];\n\n        const tmp = (x) => {\n            // Compile after the transformation has been saved\n            this.diode.gatherProjectElementsAndCompile(this, {\n                optpath: named\n            }, {\n                sdfg_over_code: true\n            }, () => {\n                this.project().saveSnapshot(x['sdfg_object'], named);\n\n                this.project().request(['update-tfh'], x => {\n                    this.operation_running = false;\n                }, {\n                    on_timeout: () => {\n                        this.operation_running = false;\n                    }\n                });\n            }, () => {\n                // On failure\n                this.operation_running = false;\n            });\n        };\n\n        this.project().request(['sdfg_object'], x => {\n            console.log(\"Got snapshot\", x);\n            if (typeof (x.sdfg_object) == 'string')\n                x.sdfg_object = JSON.parse(x.sdfg_object);\n\n            setTimeout(tmp, 10, x);\n        }, {});\n    }\n\n    appendHistoryItem(new_sdfg, item_name) {\n        if (this.operation_running)\n            return;\n        this.operation_running = true;\n        const named = {};\n        named[this.getState()['for_sdfg']] = [{\n            name: item_name,\n            params: {}\n        }];\n\n        const tmp = () => {\n            // Update SDFG\n            this.diode.gatherProjectElementsAndCompile(this, {\n                code: stringify_sdfg(new_sdfg)\n            }, {});\n        };\n\n        this.project().request(['sdfg_object'], x => {\n            console.log(\"Got snapshot\", x);\n            if (typeof (x.sdfg_object) == 'string')\n                x.sdfg_object = JSON.parse(x.sdfg_object);\n\n            this.project().saveSnapshot(x['sdfg_object'], named);\n\n            this.project().request(['update-tfh'], x => {\n                this.operation_running = false;\n            }, {\n                on_timeout: () => {\n                    this.operation_running = false;\n                }\n            });\n\n            setTimeout(tmp, 10);\n        }, {});\n    }\n\n    addNode(x, pos = 0, parent_override = undefined) {\n\n        let _title = x.opt_name;\n\n        // Add a suffix\n        if (pos != 0) {\n            _title += \"$\" + pos;\n        }\n        x.id_name = _title;\n\n        const at_list = (parent_override === undefined) ?\n            this._transformation_list : parent_override;\n\n        // Create the element\n        const list_elem = document.createElement(\"div\");\n        list_elem.classList = \"flex_row at_element\";\n\n        // Add a title-div\n        const title = document.createElement(\"div\");\n        title.innerText = _title;\n\n        title.addEventListener('mouseenter', _x => {\n            this.sendHighlightRequest(x.affects);\n        });\n        title.addEventListener('mouseleave', _x => {\n            this.sendClearHighlightRequest();\n        });\n\n        title.addEventListener('click', _x => {\n\n            this.applyTransformation(x, pos, _title);\n        });\n\n        title.setAttribute('data-hint', '{\"type\": \"transformation\", \"name\": \"' + x.opt_name + '\"}');\n        x.representative = title;\n\n        // Add a control-div\n        const ctrl = document.createElement(\"div\");\n        // Advanced button\n        {\n            const adv_button = document.createElement('b');\n            adv_button.classList = \"\";\n            adv_button.innerText = '...';\n\n            adv_button.addEventListener('click', _x => {\n                // Clicking this reveals the transformation properties\n                this.renderProperties(x, pos, [x, pos, _title]);\n            });\n\n            ctrl.appendChild(adv_button);\n        }\n        // Help button\n        /*\n        {\n            let help_button = document.createElement('i');\n            help_button.classList = \"\";\n            help_button.innerText = '?';\n            help_button.setAttribute(\"data-hint\", '{\"type\": \"transformation\", \"name\": \"' + x.opt_name + '\"}');\n            help_button.addEventListener(\"click\", _ev => this.diode.hint(_ev));\n            ctrl.appendChild(help_button);\n        }*/\n        list_elem.appendChild(title);\n        list_elem.appendChild(ctrl);\n\n\n        at_list.appendChild(list_elem);\n    }\n\n    create(newstate = undefined) {\n        if (newstate != undefined) {\n\n            const _state = this.getState();\n            Object.assign(_state, newstate);\n            this.resetState(_state);\n        }\n        let _state = this.getState();\n        if (typeof (_state) == 'string') {\n            _state = JSON.parse(_state);\n        }\n        let matching_opts = undefined;\n        if (_state.matching_opts != undefined) {\n            matching_opts = _state.matching_opts;\n        } else if (_state.optgraph_data != undefined) {\n            const _data = JSON.parse(_state.optgraph_data);\n            matching_opts = _data.matching_opts;\n        }\n        const parent = (this.container.getElement())[0];\n        parent.innerHTML = '';\n\n        const at_div = document.createElement('div');\n        at_div.classList = \"at_container\";\n        const at_list = document.createElement('div');\n\n        this._transformation_list = at_list;\n\n        at_div.appendChild(at_list);\n\n        parent.appendChild(at_div);\n\n        if (matching_opts != undefined) {\n            this.addNodes(matching_opts);\n        }\n    }\n}\n","import { DIODE_Context } from \"./context\";\n\n\nexport class DIODE_Context_Error extends DIODE_Context {\n    constructor(diode, gl_container, state) {\n        super(diode, gl_container, state);\n\n        this.editor = null;\n    }\n\n    setupEvents(project) {\n        super.setupEvents(project);\n\n        const transthis = this;\n\n        const eh = this.diode.goldenlayout.eventHub;\n        this.on(this._project.eventString('-req-new-error'), (msg) => {\n\n            setTimeout(x => eh.emit(transthis.project().eventString('new-error'), 'ok'), 1);\n            const extracted = msg;\n            this.setError(extracted);\n        });\n    }\n\n    setError(error) {\n        console.log(\"error\", error);\n\n        let error_string = \"\";\n        if (typeof (error) == \"string\")\n            this.editor.setValue(error);\n        else if (Array.isArray(error)) {\n            for (const e of error) {\n                if (e.msg != undefined) {\n                    error_string += e.msg;\n                }\n                console.log(\"Error element\", e);\n            }\n            this.editor.setValue(error_string);\n        }\n        this.saveToState({ 'error': error });\n    }\n\n    setEditorReference(editor) {\n        this.editor = editor;\n\n        const elem = this.container.getElement()[0];\n        elem.addEventListener('resize', x => {\n            this.editor.resize();\n        });\n    }\n}\n","import { DIODE_Context } from \"./context\";\n\n\nexport class DIODE_Context_RunConfig extends DIODE_Context {\n    constructor(diode, gl_container, state) {\n        super(diode, gl_container, state);\n\n        this._settings_container = null;\n\n    }\n\n    create() {\n        const parent = this.container.getElement()[0];\n\n        const runopts_container = document.createElement(\"div\");\n\n        const runopts_general_container = document.createElement(\"div\");\n\n        let values = {\n            \"Configuration name\": \"\",\n            \"Host\": \"localhost\",\n            \"Use SSH\": true,\n            \"SSH Key\": this.diode.pubSSH(),\n            \"SSH Key override\": \"\",\n            \"Instrumentation\": \"off\",\n            \"Number of threads\": \"[0]\"\n        };\n\n        let params = [];\n        const node = null;\n        let transthis = null;\n\n        // Build the callback object\n        transthis = {\n            propertyChanged: (node, name, value) => {\n                if (name == \"Configuration name\") {\n                    if (this.diode.getRunConfigs().map(x => x['Configuration name']).includes(value)) {\n                        // Load values and reset inputs\n                        const copy = this.diode.getRunConfigs(value);\n                        for (const x of Object.keys(copy)) {\n                            const v = copy[x];\n                            const ps = params.find(y => y.name == x);\n                            ps.value = v;\n                        }\n                        values = copy;\n                        runopts_general_container.innerHTML = \"\";\n                        this.diode.renderProperties(transthis, node, params, runopts_general_container, {});\n                        return;\n                    }\n                }\n                values[name] = value;\n            }\n        };\n        /*\n        element structure:\n        {\n            name: <name>\n            desc: <description> (as tooltip)\n            category: <Category name>\n            type: <Type used to render>\n            value: <Value to store>\n        }\n        */\n        {\n            params = [{\n                name: \"Configuration name\",\n                type: \"combobox\",\n                value: values['Configuration name'],\n                options: this.diode.getRunConfigs().map(x => x['Configuration name']),\n                desc: \"Name of this configuration\",\n            }, {\n                name: \"Host\",\n                type: \"hosttype\",\n                value: values['Host'],\n                desc: \"Host executing the programs\",\n            },\n            ]; // Array of elements\n\n\n            // Add category (common to all elements)\n            params.forEach(x => x.category = \"General\");\n\n            const remoteparams = [{\n                name: \"Use SSH\",\n                type: \"bool\",\n                value: values['Use SSH'],\n                desc: \"Use SSH. Mandatory for remote hosts, optional for localhost.\",\n            }, {\n                name: \"SSH Key\",\n                type: \"str\",\n                value: values['SSH Key'],\n                desc: \"Public SSH key (id_rsa.pub) to add to remote authorized_keys. This key must not be password-protected!\",\n            }, {\n                name: \"SSH Key override\",\n                type: \"str\",\n                value: values['SSH Key override'],\n                desc: \"Override the identity key file (ssh option -i) with this value if your password-free key is not id_rsa\"\n            }\n            ];\n\n            // Add category (common to all elements)\n            remoteparams.forEach(x => x.category = \"Remote\");\n\n            const instrumentationparams = [{\n                name: \"Instrumentation\",\n                type: \"selectinput\",\n                value: values['Instrumentation'],\n                options: ['off', 'minimal', 'full'],\n                desc: \"Set instrumentation mode (CPU only)\",\n            },\n            {\n                name: \"Number of threads\",\n                type: \"list\",\n                value: values['Number of threads'],\n                desc: \"Sets the number of OpenMP threads.\" +\n                    \"If multiple numbers are specified, the program is executed once for every number of threads specified. Specify 0 to use system default\"\n            },\n\n            ];\n\n            // Add category (common to all elements)\n            instrumentationparams.forEach(x => x.category = \"Profiling\");\n\n\n            // Merge params\n            params = [...params, ...remoteparams, ...instrumentationparams];\n\n            const node = {\n                data: () => params\n            };\n\n            // Build the settings\n            this.diode.renderProperties(transthis, node, params, runopts_general_container, {});\n        }\n\n\n        runopts_container.appendChild(runopts_general_container);\n\n\n        parent.appendChild(runopts_container);\n\n        const apply_button = document.createElement(\"button\");\n        apply_button.innerText = \"Save\";\n        apply_button.addEventListener('click', _x => {\n            this.diode.addToRunConfigs(values);\n        });\n        parent.appendChild(apply_button);\n    }\n\n\n}\n","import { DIODE_Context } from \"./context\";\n\n\nexport class DIODE_Context_PerfTimes extends DIODE_Context {\n    constructor(diode, gl_container, state) {\n        super(diode, gl_container, state);\n        this._chart = null;\n    }\n\n    setupEvents(project) {\n        super.setupEvents(project);\n\n        const eh = this.diode.goldenlayout.eventHub;\n        const transthis = this;\n\n        this.on(this.project().eventString('-req-new-time'), (msg) => {\n            setTimeout(x => eh.emit(transthis.project().eventString('new-time'), 'ok'), 1);\n            this.addTime(msg.time);\n        });\n    }\n\n    create() {\n        const elem = this.container.getElement()[0];\n        elem.innerHTML = \"\";\n\n        // Create the graph\n        const canvas = document.createElement(\"canvas\");\n        elem.appendChild(canvas);\n\n        const oldstate = this.getState();\n        if (oldstate.runtimes === undefined) {\n            oldstate.runtimes = [];\n        }\n\n        console.log(\"Execution times loaded\", oldstate.runtimes);\n\n        const labels = [];\n        for (let i = 0; i < oldstate.runtimes.length; ++i) {\n            labels.push(i);\n        }\n\n        this._chart = new Chart(canvas.getContext(\"2d\"), {\n            type: 'bar',\n\n            data: {\n                labels: labels,\n                datasets: [{\n                    label: 'Exec. times in s',\n                    backgroundColor: \"blue\",\n                    data: oldstate.runtimes.map(x => x)\n                }]\n            },\n            options: {\n                responsive: true,\n                scales: {\n                    yAxes: [{\n                        display: true,\n                        ticks: {\n                            beginAtZero: true\n                        }\n                    }],\n                    xAxes: [{\n                        display: true,\n                        ticks: {\n                            autoSkip: true\n                        }\n                    }]\n                },\n                legend: {\n                    //display: false,\n                    position: 'top',\n                },\n                title: {\n                    display: true,\n                    text: 'Execution times'\n                }\n            }\n        });\n        this._chart.update();\n    }\n\n    addTime(runtime) {\n        const oldstate = this.getState();\n        if (oldstate.runtimes === undefined) {\n            oldstate.runtimes = [];\n        }\n        oldstate.runtimes.push(runtime);\n        this.resetState(oldstate);\n\n        this.create();\n    }\n\n}\n","import { REST_request } from \"../../main.js\";\nimport { DIODE_Context } from \"./context\";\n\n\nexport class DIODE_Context_InstrumentationControl extends DIODE_Context {\n    /*\n        This context shows status and controls for the current instrumentation run.\n        It is an interface and does not store data other than that needed to provide popouts.\n        In particular, it does not display instrumentation results (this is done in the SDFG component).\n    */\n    constructor(diode, gl_container, state) {\n        super(diode, gl_container, state);\n\n    }\n\n    setupEvents(project) {\n        super.setupEvents(project);\n\n        let started = false;\n\n        // Start updating interval\n        this._update_timeout = setInterval(() => {\n            REST_request(\"/dace/api/v1.0/dispatcher/list/\", {}, xhr => {\n                if (xhr.readyState === 4 && xhr.status === 200) {\n                    // Got response\n                    let done = true;\n                    const resp = JSON.parse(xhr.response);\n                    const elems = resp.elements;\n                    for (const e of elems) {\n                        const o = e.options;\n                        if (typeof (o) == 'string') {\n                            console.log(\"o is \", o);\n                            if (o == \"endgroup\") {\n                                // At least started, not done yet\n                                done = false;\n                                started = true;\n                            }\n                        }\n                    }\n\n                    if (started && done) {\n                        started = false;\n                        this.diode.load_perfdata();\n                    }\n                }\n\n            });\n        }, 2000);\n    }\n\n    close() {\n        clearInterval(this._update_timeout);\n        this._update_timeout = null;\n        super.close();\n    }\n\n    destroy() {\n        super.destroy();\n    }\n\n    create() {\n        const parent = this.container.getElement()[0];\n\n        parent.innerHTML = \"<h2>Instrumentation control</h2><p>Do not close this window while instrumented programs are running</p>\";\n\n        // Functionality provided in this context\n        // - Download perfdata database\n        // - Delete remote perfdata database (e.g. to run a new / different program)\n        // - Wait for tasks to be done (to auto-update performance information)\n        const download_but = document.createElement(\"a\");\n        download_but.innerText = \"Download perfdata database\";\n        download_but.href = base_url + \"/dace/api/v1.0/perfdata/download/\" + this.diode.getClientID() + \"/\";\n        download_but.download = \"perfdata.sqlite3\";\n\n        const download_can_but = document.createElement(\"a\");\n        download_can_but.innerText = \"Download CAN\";\n        download_can_but.href = base_url + \"/dace/api/v1.0/can/download/\" + this.diode.getClientID() + \"/\";\n        download_can_but.download = \"current.sqlite3\";\n\n        const delete_but = document.createElement(\"button\");\n        delete_but.innerText = \"Delete remote database\";\n        delete_but.addEventListener(\"click\", () => {\n            REST_request(\"/dace/api/v1.0/perfdata/reset/\", {\n                client_id: this.diode.getClientID()\n            }, x => {\n            });\n        });\n\n        const delete_can_but = document.createElement(\"button\");\n        delete_can_but.innerText = \"Delete remote CAN\";\n        delete_can_but.addEventListener(\"click\", () => {\n            REST_request(\"/dace/api/v1.0/can/reset/\", {\n                client_id: this.diode.getClientID()\n            }, x => {\n            });\n        });\n\n        const render_but = document.createElement(\"button\");\n        render_but.innerText = \"Display instrumentation results\";\n        render_but.addEventListener(\"click\", () => {\n            this.diode.load_perfdata();\n        });\n\n        const roofline_but = document.createElement(\"button\");\n        roofline_but.innerText = \"Show roofline\";\n        roofline_but.addEventListener(\"click\", () => {\n            this.diode.show_roofline();\n        });\n\n        const celem = document.createElement(\"div\");\n        celem.classList = \"flex_column\";\n\n        celem.appendChild(download_but);\n        celem.appendChild(download_can_but);\n        celem.appendChild(delete_but);\n        celem.appendChild(delete_can_but);\n        celem.appendChild(render_but);\n        celem.appendChild(roofline_but);\n\n        parent.appendChild(celem);\n    }\n\n}\n","import {ObjectHelper} from \"../datahelper.js\";\n\n\nvar roofline_socket = 0;\n\n\nfunction drawMarkersY(ctx, margin, options) {\n\n    let width = () => ctx.canvas.width;\n    let height = () => ctx.canvas.height;\n\n    let steps = options.steps;\n    let step_value_func = options.step_value_func;\n\n    let axis_len_x = height() - margin.top - margin.bottom;\n\n    let pix_step = axis_len_x / steps;\n\n\n    let start = {\n        x: margin.left,\n        y: height() - margin.bottom\n    };\n\n    let marker_height = 10;\n    ctx.save();\n    for(let i = 1; i < steps; ++i) {\n\n        let cur_val = step_value_func(i);\n        let pos = start.y - i * pix_step;\n\n        // Markers\n        ctx.beginPath();\n        ctx.strokeStyle = \"black\";\n        ctx.lineWidth = 2;\n        ctx.setLineDash([]);\n        ctx.moveTo(start.x - marker_height / 2.0, pos);\n        ctx.lineTo(start.x + marker_height / 2.0, pos);\n        ctx.stroke();\n\n\n        // Gridlines\n        ctx.beginPath();\n        ctx.strokeStyle = \"gray\";\n        ctx.setLineDash([5, 15]);\n        ctx.lineWidth = 1;\n        ctx.moveTo(margin.left, pos);\n        ctx.lineTo(width() - margin.right, pos);\n        ctx.stroke();\n\n        // Draw value indices\n        ctx.beginPath();\n        ctx.strokeStyle = \"black\";\n        ctx.setLineDash([]);\n        ctx.lineWidth = 1;\n        ctx.font = \"30px Arial\";\n        ctx.textAlign = \"right\";\n        ctx.textBaseline = \"middle\";\n\n\n        if(cur_val < 1) {\n            cur_val = ObjectHelper.valueToSensibleString(cur_val, \"fraction\");\n        }\n        ctx.fillText(cur_val.toString(), start.x - marker_height / 2.0, pos);\n\n    }\n    \n    let ypos = (height() - margin.bottom - margin.top) / 2.0 - margin.top;\n    // Draw axis title\n    ctx.beginPath();\n    ctx.strokeStyle = \"black\";\n    ctx.setLineDash([]);\n    ctx.lineWidth = 1;\n    ctx.font = \"40px Arial\";\n    ctx.textAlign = \"center\";\n    ctx.textBaseline = \"middle\";\n    ctx.translate(margin.left, 0);\n    ctx.rotate(Math.PI / -2.0);\n    ctx.fillText(\"Performance [FLOP/c]\", -height() / 2.0, -margin.left / 2);\n    ctx.translate(-margin.left, 0);\n\n    ctx.restore();\n}\n\nfunction drawMarkersX(ctx, margin, options) {\n\n    let width = () => ctx.canvas.width;\n    let height = () => ctx.canvas.height;\n\n    let steps = options.steps;\n    let step_value_func = options.step_value_func;\n\n    let axis_len_x = width() - margin.left - margin.right;\n\n    let pix_step = axis_len_x / steps;\n\n\n    let start = {\n        x: margin.left,\n        y: height() - margin.bottom\n    };\n\n    let marker_height = 10;\n    ctx.save();\n    for(let i = 1; i < steps; ++i) {\n\n        let cur_val = step_value_func(i);\n        let pos = start.x + i * pix_step;\n\n        // Markers\n        ctx.beginPath();\n        ctx.strokeStyle = \"black\";\n        ctx.lineWidth = 2;\n        ctx.setLineDash([]);\n        ctx.moveTo(pos, start.y - marker_height / 2.0);\n        ctx.lineTo(pos, start.y + marker_height / 2.0);\n        ctx.stroke();\n\n\n        // Gridlines\n        ctx.beginPath();\n        ctx.strokeStyle = \"gray\";\n        ctx.setLineDash([5, 15]);\n        ctx.lineWidth = 1;\n        ctx.moveTo(pos, margin.top);\n        ctx.lineTo(pos, height() - margin.bottom);\n        ctx.stroke();\n\n        // Draw value indices\n        ctx.beginPath();\n        ctx.strokeStyle = \"black\";\n        ctx.setLineDash([]);\n        ctx.lineWidth = 1;\n        ctx.font = \"30px Arial\";\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"top\";\n\n        if(cur_val < 1) {\n            cur_val = ObjectHelper.valueToSensibleString(cur_val, \"fraction\");\n        }\n\n        ctx.fillText(cur_val.toString(), pos, start.y + marker_height / 2.0);\n    }\n    // Draw axis title\n    ctx.beginPath();\n    ctx.strokeStyle = \"black\";\n    ctx.setLineDash([]);\n    ctx.lineWidth = 1;\n    ctx.font = \"40px Arial\";\n    ctx.textAlign = \"center\";\n    ctx.textBaseline = \"top\";\n    ctx.fillText(\"Operational intensity [FLOP/byte]\", margin.left + (width() - margin.left - margin.right) / 2.0, height() - margin.bottom / 2.0);\n\n    ctx.restore();\n}\n\nfunction fillLine(ctx, margin, yoptions, gflops, mode=\"hard\") {\n    // For animations only\n    let end_scale = 1.0;\n    let start_scale = 1.0;\n\n    // Width function\n    let width = () => ctx.canvas.width;\n    let height = () => ctx.canvas.height;\n\n    // Draw the peak GFLOP/c line\n    ctx.save();\n\n    if(mode===\"soft\") {\n        ctx.setLineDash([15, 15]);\n    }\n    else {\n        ctx.setLineDash([]);\n    }\n    ctx.beginPath();\n    ctx.strokeStyle = \"black\";\n    ctx.lineWidth = 3;\n\n    let axis_len_y = height() - margin.top - margin.bottom;\n    let pix_step = axis_len_y / yoptions.steps;\n\n    let logval = yoptions.inv_step_value_func(gflops);\n    let y = height() - margin.bottom - pix_step * logval;\n\n    ctx.moveTo(margin.left, y);\n    ctx.lineTo(width() - margin.right, y);\n    ctx.stroke();\n\n    ctx.beginPath();\n\n    ctx.font = \"25px Arial\";\n    ctx.fillStyle = \"black\";\n\n    ctx.textAlign = \"right\";\n    ctx.textBaseline = \"bottom\";\n    ctx.fillText(gflops.toString() + \" FLOP/c\", width() - margin.right, y);\n\n    ctx.restore();\n}\n\nfunction options_max_val(options) {\n    return options.step_value_func((options.steps - 0) * options.value_per_step);\n}\n\nfunction options_min_val(options) {\n    return options.step_value_func(0);\n}\n\nfunction getYPixel(ctx, yoptions, margin, value) {\n    let height = () => ctx.canvas.height;\n    let axis_len_y = height() - margin.top - margin.bottom;\n    let pix_step_y = axis_len_y / yoptions.steps;\n\n    let val = yoptions.inv_step_value_func(value);\n    let y = height() - margin.bottom - pix_step_y * val;\n\n    return y;\n}\n\nfunction getXPixel(ctx, xoptions, margin, value) {\n    let width = () => ctx.canvas.width;\n    let axis_len_x = width() - margin.left - margin.right;\n    let pix_step_x = axis_len_x / xoptions.steps;\n\n    let val = xoptions.inv_step_value_func(value);\n    let x = margin.left + pix_step_x * val;\n\n    return x;\n}\n\nfunction fillBandwidthBound(ctx, margin, xoptions, yoptions, bytes_per_cycle) {\n    // For animations only\n    let end_scale = 1.0;\n    let start_scale = 1.0;\n\n    // Width function\n    let width = () => ctx.canvas.width;\n    let height = () => ctx.canvas.height;\n\n    ctx.save();\n\n    ctx.strokeStyle = \"black\";\n    ctx.lineWidth = 3;\n\n    let axis_len_y = height() - margin.top - margin.bottom;\n    let pix_step_y = axis_len_y / yoptions.steps;\n\n    let axis_len_x = width() - margin.left - margin.right;\n    let pix_step_x = axis_len_x / xoptions.steps;\n\n    let maxyval = options_max_val(yoptions);\n    let maxxval = options_max_val(xoptions);\n\n    // y = x + q\n    let yval = bytes_per_cycle * maxxval;\n    let xval = maxxval;\n\n    yval = Math.min(yval, maxyval);\n    xval = Math.min(yval / bytes_per_cycle, maxxval);\n\n    // Find the positions for yval and xval and draw lines to there.\n    let logvaly_start = yoptions.inv_step_value_func(options_min_val(xoptions) * bytes_per_cycle);\n    let y_start = height() - margin.bottom - pix_step_y * logvaly_start;\n\n    let logvaly = yoptions.inv_step_value_func(yval);\n    let y = height() - margin.bottom - pix_step_y * logvaly;\n\n    let logvalx = xoptions.inv_step_value_func(xval);\n    let x = margin.left + pix_step_x * logvalx;\n\n    // Move to zero\n    ctx.moveTo(margin.left, y_start);\n\n    ctx.lineTo(x, y);\n    ctx.stroke();\n\n\n    ctx.translate(x, -y + margin.top + margin.bottom);\n    let angle = Math.atan2(y - y_start, x - margin.left);\n    ctx.rotate(angle);\n    ctx.font = \"25px Arial\";\n    ctx.fillStyle = \"black\";\n\n    ctx.textAlign = \"right\";\n    ctx.textBaseline = \"bottom\";\n    ctx.fillText(bytes_per_cycle.toString() + \" B/c\", 0, 0);\n\n\n    ctx.restore();\n}\n\nvar dotdata = [];\nvar flopbounds = [];\nvar bandwidthbounds = [];\n\n\nfunction draw_full(ctx, painter)  {\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    painter.drawAxes();\n\n    painter.drawComputeBounds();\n    painter.drawBandwidthBounds();\n\n    painter.connectDots();\n\n    painter.drawDots();\n\n};\n\nfunction drawDot(ctx, xoptions, yoptions, margin, flop_per_cyc, flop_per_byte, size = 5) {\n    ctx.save();\n\n    let x = getXPixel(ctx, xoptions, margin, flop_per_byte);\n    let y = getYPixel(ctx, yoptions, margin, flop_per_cyc);\n\n    let off = size;\n\n    ctx.fillStyle = \"red\";\n    ctx.fillRect(x - off, y - off, off * 2, off * 2);\n\n    ctx.restore();\n}\n\nfunction setDot(ctx, xoptions, yoptions, margin, flop_per_cyc, flop_per_byte, id) {\n    let x = getXPixel(ctx, xoptions, margin, flop_per_byte);\n    let y = getYPixel(ctx, yoptions, margin, flop_per_cyc);\n    dotdata.push({x: x, y: y, floppercyc: flop_per_cyc, flopperbyte: flop_per_byte, highlight: false, id: id});\n}\n\n\nfunction drawInfoBox(ctx, x, y, sidelen, id=undefined) {\n    \n    let triangle_size = 20;\n    let boxleft = x - sidelen;\n    let boxright = x + sidelen;\n    let boxbottom = y - triangle_size;\n    let boxtop = boxbottom - sidelen;\n\n    ctx.save();\n    ctx.fillStyle = \"cyan\";\n    ctx.moveTo(x, y);\n    \n    ctx.beginPath();\n\n    ctx.lineTo(x - triangle_size, boxbottom);\n    ctx.lineTo(boxleft, boxbottom);\n    ctx.lineTo(boxleft, boxtop);\n    ctx.lineTo(boxright, boxtop);\n    ctx.lineTo(boxright, boxbottom);\n    ctx.lineTo(x + triangle_size, boxbottom);\n    ctx.lineTo(x, y);\n\n    ctx.closePath();\n    ctx.stroke();\n    ctx.fill();\n\n    ctx.fillStyle = \"black\";\n    ctx.font = \"40px Arial\";\n    ctx.textBaseline = \"top\";\n    if(id !== undefined) {\n        ctx.fillText(\"id: \" + id, boxleft + triangle_size, boxtop + triangle_size);\n    }\n    ctx.restore();\n}\n\n\n\nclass RooflinePainter {\n\n    constructor(ctx, margin, xopts, yopts) {\n        this.ctx = ctx;\n        this.margin = margin;\n        this.xoptions = xopts;\n        this.yoptions = yopts;\n    }\n\n    drawAxes() {\n\n        let ctx = this.ctx;\n        let margin = this.margin;\n\n        let width = () => ctx.canvas.width;\n        let height = () => ctx.canvas.height;\n\n        // Draw the y-Axis\n        ctx.strokeStyle = \"black\";\n        ctx.lineWidth = 2;\n        ctx.beginPath();\n        ctx.moveTo(margin().left, height() - margin().bottom);\n        ctx.lineTo(margin().left, margin().top);\n        ctx.stroke();\n        ctx.closePath();\n\n        // Draw the x-Axis\n        ctx.beginPath();\n        ctx.moveTo(margin().left, height() - margin().bottom);\n        ctx.lineTo(width() - margin().right, height() - margin().bottom);\n        ctx.stroke();\n        ctx.closePath();\n\n        drawMarkersX(ctx, margin(), this.xoptions);\n        drawMarkersY(ctx, margin(), this.yoptions);\n    }\n\n    drawDots() {\n        let highlights = [];\n        for(let elem of dotdata) {\n            drawDot(this.ctx, this.xoptions, this.yoptions, this.margin(), elem.floppercyc, elem.flopperbyte, elem.highlight ? 10 : 5);\n            if(elem.highlight) {\n                highlights.push(elem);\n            }\n        }\n\n        for(let elem of highlights) {\n            elem.x = getXPixel(this.ctx, this.xoptions, this.margin(), elem.flopperbyte);\n            elem.y = getYPixel(this.ctx, this.yoptions, this.margin(), elem.floppercyc);\n            drawInfoBox(this.ctx, elem.x, elem.y, 200, elem.id);\n        }\n    }\n\n    drawComputeBounds() {\n        let i = 0;\n        for(let elem of flopbounds) {\n            if(i == 0) {\n                fillLine(this.ctx, this.margin(), this.yoptions, elem, \"hard\");\n            }\n            else {\n                fillLine(this.ctx, this.margin(), this.yoptions, elem, \"soft\");\n            }\n            ++i;\n        }\n    }\n\n    drawBandwidthBounds() {\n        for(let elem of bandwidthbounds) {\n            fillBandwidthBound(this.ctx, this.margin(), this.xoptions, this.yoptions, elem);\n        }\n    }\n\n    connectDots() {\n        let dot_x = undefined;\n        let dot_y = undefined;\n        this.ctx.beginPath();\n        for(let dot of dotdata) {\n            let x = dot.x;\n            let y = dot.y;\n            let first = dot_x === undefined;\n            if(first) {\n                this.ctx.moveTo(x, y);\n            }\n            else {\n                this.ctx.lineTo(x, y);\n                this.ctx.stroke();\n            }\n            dot_x = x;\n            dot_y = y;\n            \n        }\n    }\n}\n\n\n\nfunction main(canvas=undefined, message_source=undefined) {\n\n    if(canvas == undefined) canvas = document.getElementById(\"myCanvas\");\n    let ctx = canvas.getContext(\"2d\");\n\n    \n\n    let width = () => ctx.canvas.width;\n    let height = () => ctx.canvas.height;\n\n    let margin = () => { return {\n            top: 100,\n            bottom: 100,\n            left: 200,\n            right: 100\n        };\n    };\n\n    let xoptions = {\n        steps: 20,\n        value_per_step: 1,\n        step_value_func: (step) => {\n            return Math.pow(2.0, -6.0 + step);\n        },\n        inv_step_value_func: (step) => {\n            return 6.0 + Math.log2(step);\n        }\n    };\n    let yoptions = {\n        steps: 15,\n        value_per_step: 1,\n        step_value_func: (step) => {\n            return Math.pow(2.0, -8.0 + step);\n        },\n        inv_step_value_func: (step) => {\n            return 8.0 + Math.log2(step);\n        }\n    };\n\n    let painter = new RooflinePainter(ctx, margin, xoptions, yoptions);\n\n    canvas.addEventListener(\"mousemove\", (event) => {\n        let rect = canvas.getBoundingClientRect();\n        let x = (event.clientX - rect.left) / (rect.right - rect.left) * canvas.width;\n        let y = (event.clientY - rect.top) / (rect.bottom - rect.top) * canvas.height;\n\n        let tol = 15;\n        let pow2 = x => x*x;\n        \n        for(let elem of dotdata)\n        {\n            elem.x = getXPixel(ctx, xoptions, margin(), elem.flopperbyte);\n            elem.y = getYPixel(ctx, yoptions, margin(), elem.floppercyc);\n            if(pow2(elem.x - x) + pow2(elem.y - y) <= pow2(tol))\n            {\n                elem.highlight = true;\n            }\n            else\n                elem.highlight = false;\n        }\n\n        draw_full(ctx, painter);\n    });\n\n    /*\n    Clicking should cause the program with the given id to be highlighted. For that, a message has to be sent to the \"host\".\n    */\n    canvas.addEventListener(\"click\", (event) => {\n        let rect = canvas.getBoundingClientRect();\n        let x = (event.clientX - rect.left) / (rect.right - rect.left) * canvas.width;\n        let y = (event.clientY - rect.top) / (rect.bottom - rect.top) * canvas.height;\n\n        let tol = 15;\n        let pow2 = x => x*x;\n        \n        for(let elem of dotdata)\n        {\n            if(pow2(elem.x - x) + pow2(elem.y - y) <= pow2(tol))\n            {\n                roofline_socket.send(JSON.stringify({\"msg_type\": \"roofline\", \"command\": \"select-program\", \"programID\": elem.id}));\n                return; // Dots sadly could be interleaving. To not send too many select requests, we have to end it here\n            }\n            \n        }\n    });\n\n\n\n    fillLine(ctx, margin(), yoptions, 8.0);\n    fillBandwidthBound(ctx, margin(), xoptions, yoptions, 8);\n\n    flopbounds.push(64.0, 8.0);\n    bandwidthbounds.push(8.0);\n\n    setDot(ctx, xoptions, yoptions, margin(), 1, 1, 1);\n    setDot(ctx, xoptions, yoptions, margin(), 2, 3, 2);\n    setDot(ctx, xoptions, yoptions, margin(), 4, 6, 3);\n    setDot(ctx, xoptions, yoptions, margin(), 7, 7, 4);\n    setDot(ctx, xoptions, yoptions, margin(), 8, 8, 5);\n\n    draw_full(ctx, painter);\n\n    let data_proc = msg => {\n        if(msg[\"msg_type\"] == \"roofline-data\") {\n\n            dotdata = [];\n\n            let data = msg[\"data\"];\n\n            for(let x of data) {\n                let pid = x[\"ProgramID\"];\n                let flop_per_c = x[\"FLOP_C\"];\n                let in_b_per_c = x[\"INPUT_B_C\"];\n                let proc_b_per_c = x[\"PROC_B_C\"];\n                let mem_b_per_c = x[\"MEM_B_C\"];\n\n\n                let flop_per_byte = flop_per_c / mem_b_per_c;\n\n                // We'll use the in-memory (which is not quite accurate, since out-data usually has to be loaded as well)\n                setDot(ctx, xoptions, yoptions, margin(), flop_per_c, flop_per_byte, pid);\n            }\n        }\n    };\n    \n    let socksetup = () => {\n        roofline_socket = new WebSocket('ws://localhost:8024/');\n\n        roofline_socket.onopen = function (event) {\n            roofline_socket.send(JSON.stringify({\"msg_type\": \"roofline\", \"command\": \"connected\"}));\n        }\n        roofline_socket.onmessage = function (event) {\n\n            msg = JSON.parse(event.data);\n            data_proc(msg);\n        }\n        roofline_socket.onclose = function (event) {\n            console.log(\"ERROR: Connection closed!\");\n        }\n        roofline_socket.onerror = function (event) {\n            console.log(\"ERROR: There was an error with the connection.\");\n        }\n        \n    };\n\n    if(message_source == undefined)\n        socksetup();\n    else {\n        message_source(data_proc);\n    }\n\n    return () => draw_full(ctx, painter);\n}\n\nexport {main as main};","import { REST_request } from \"../../main\";\nimport * as Roofline from \"../../../renderer_dir/Roofline/main\";\nimport { DIODE_Context } from \"./context\";\n\n\nexport class DIODE_Context_Roofline extends DIODE_Context {\n    constructor(diode, gl_container, state) {\n        super(diode, gl_container, state);\n        this._proc_func = null;\n    }\n\n    setupEvents(project) {\n        super.setupEvents(project);\n\n        const eh = this.diode.goldenlayout.eventHub;\n        const transthis = this;\n\n        /*this.on(this.project().eventString('-req-new-time'), (msg) => {\n            setTimeout(x => eh.emit(transthis.project().eventString('new-time'), 'ok'), 1);\n            this.addTime(msg.time);\n        });*/\n    }\n\n    create() {\n        const parent = this.container.getElement()[0];\n        parent.style.width = \"100%\";\n        parent.style.height = \"100%\";\n\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = 1920;\n        canvas.height = 1080;\n\n        const redraw_func = Roofline.main(canvas, proc_func => {\n            // Setup code, called on init. Incoming data must be passed to proc_func\n            this._proc_func = proc_func;\n        });\n\n        const on_resize = () => {\n            console.log(\"Resizing\");\n            canvas.width = parseInt(parent.style.width) - 20;\n            canvas.height = parseInt(parent.style.height) - 20;\n\n            // Reset then\n            redraw_func();\n        };\n\n        parent.addEventListener(\"resize\", on_resize);\n\n        if (window.ResizeObserver) {\n            new ResizeObserver(on_resize).observe(parent);\n        } else {\n            console.warn(\"ResizeObserver not available\");\n        }\n\n        parent.appendChild(canvas);\n\n        REST_request('/dace/api/v1.0/perfdata/roofline/', {\n            client_id: this.diode.getClientID()\n        }, xhr => {\n            if (xhr.readyState === 4 && xhr.status === 200) {\n                this._proc_func(JSON.parse(xhr.response));\n            }\n        });\n    }\n\n\n}\n","// Copyright 2019-2020 ETH Zurich and the DaCe authors. All rights reserved.\nimport { DIODE } from \"./diode-ui/diode\"\nimport { DIODE_Context_Settings } from \"./diode-ui/contexts/settings\";\nimport { DIODE_Context_DIODESettings } from \"./diode-ui/contexts/diode_settings\";\nimport { DIODE_Context_CodeIn } from \"./diode-ui/contexts/code_in\";\nimport { DIODE_Context_Terminal } from \"./diode-ui/contexts/terminal\";\nimport { DIODE_Context_CodeOut } from \"./diode-ui/contexts/code_out\";\nimport { DIODE_Context_SDFG } from \"./diode-ui/contexts/sdfg\";\nimport { DIODE_Context_PropWindow } from \"./diode-ui/contexts/prop_window\";\nimport { DIODE_Context_Runqueue } from \"./diode-ui/contexts/runqueue\";\nimport { DIODE_Context_StartPage } from \"./diode-ui/contexts/start_page\";\nimport { DIODE_Context_TransformationHistory } from \"./diode-ui/contexts/transformation_history\";\nimport { DIODE_Context_AvailableTransformations } from \"./diode-ui/contexts/available_transformations\";\nimport { DIODE_Context_Error } from \"./diode-ui/contexts/error\";\nimport { DIODE_Context_RunConfig } from \"./diode-ui/contexts/run_config\";\nimport { DIODE_Context_PerfTimes } from \"./diode-ui/contexts/perf_times\";\nimport { DIODE_Context_InstrumentationControl } from \"./diode-ui/contexts/instrumentation_control\";\nimport { DIODE_Context_Roofline } from \"./diode-ui/contexts/roofline\";\n\nconst base_url = \"//\" + window.location.host;\nglobalThis.base_url = base_url;\n\n// we cannot import jQuery because w2ui only hijacks the global jQuery instance and has no npm package available\nconst { $ } = globalThis;\n\nstart_DIODE();\n\n\nexport function find_object_cycles(obj) {\n    const found = [];\n\n    const detect = (x, path) => {\n        if (typeof (x) == \"string\") {\n\n        }\n        else if (x instanceof Array) {\n            let index = 0;\n            for (const y of x) {\n                detect(y, [...path, index])\n                ++index;\n            }\n        }\n        else if (x instanceof Object) {\n            if (found.indexOf(x) !== -1) {\n                // Cycle found\n                throw [\"Cycle\", path, x];\n            }\n            found.push(x);\n            for (const y of Object.keys(x)) {\n                if (x.hasOwnProperty(y)) {\n                    detect(x[y], [...path, y]);\n                }\n            }\n        }\n    }\n\n    return detect(obj, []);\n\n}\n\nexport function setup_drag_n_drop(elem, callbackSingle, callbackMultiple, options = { readMode: \"text\", condition: (elem) => true }) {\n\n    /*\n        callbackSingle: (mimetype: string, content: string) => mixed\n            Takes the file contents (text) and the mimetype.\n        callbackMultiple: reserved\n        options:\n            .readmode: \"text\" or \"binary\"\n            .condition: Function called with parameter \"elem\" determining if the current element should have the handler active\n    */\n\n    const drag_enter = (e) => {\n        if (!options.condition(elem)) return;\n        e.stopPropagation();\n        e.preventDefault();\n    };\n\n    const drag_over = e => {\n        if (!options.condition(elem)) return;\n        e.stopPropagation();\n        e.preventDefault();\n    };\n\n    const drag_drop = e => {\n        if (!options.condition(elem)) return;\n        const files = Array.from(e.dataTransfer.files);\n\n        if (files.length === 1) {\n            e.stopPropagation();\n            e.preventDefault();\n\n            // A single file was provided\n            const file = files[0];\n\n            const mime = file.type;\n\n            const reader = new FileReader();\n            reader.onload = ev => {\n                callbackSingle(mime, ev.target.result);\n            };\n            if (options.readMode == \"text\") {\n                reader.readAsText(file);\n            }\n            else if (options.readMode == \"binary\") {\n                reader.readAsArrayBuffer(file);\n            }\n            else {\n                throw \"Unimplemented read mode \" + options.readMode;\n            }\n\n        }\n        else if (files.length > 1) {\n            e.stopPropagation();\n            e.preventDefault();\n\n            // #TODO: Deferred \n            alert(\"Cannot handle more than 1 input file at this point\");\n            throw \"Previous alert caused here\";\n        }\n        else {\n            alert(\"Can only drop files at this point - everything else is user-agent-specific!\")\n            throw \"Previous alert caused here\";\n        }\n\n    };\n\n    elem.addEventListener(\"dragenter\", drag_enter, false);\n    elem.addEventListener(\"dragover\", drag_over, false);\n    elem.addEventListener(\"drop\", drag_drop, false);\n}\n\nexport function REST_request(command, payload, callback, method = \"POST\") {\n    const xhr = new XMLHttpRequest();\n    const url = base_url + command;\n    xhr.open(method, url, true);\n    xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n    xhr.onreadystatechange = () => {\n        callback(xhr);\n    };\n    xhr.onerror = (e) => {\n        console.warn(\"Connection error\", e);\n        alert(\"Connection error\");\n    };\n    if (payload != undefined) {\n        const data = JSON.stringify(payload);\n        xhr.send(data);\n    }\n    else {\n        xhr.send();\n    }\n}\n\nexport class FormBuilder {\n\n    static createContainer(idstr) {\n        const elem = document.createElement(\"div\");\n        elem.id = idstr;\n        elem.classList = \"settings_key_value\";\n        return $(elem);\n    }\n\n    static createHostInput(id, onchange, known_list = ['localhost'], initial = \"localhost\") {\n        const elem = document.createElement('input');\n        elem.type = \"list\";\n        elem.id = id;\n        let dlist = document.getElementById(\"hosttype-dlist\");\n        if (!dlist) {\n            dlist = document.createElement(\"datalist\");\n            dlist.id = \"hosttype-dlist\";\n            document.body.appendChild(dlist);\n        }\n        $(elem).attr(\"list\", \"hosttype-dlist\");\n        dlist.innerHTML = \"\";\n        for (const x of known_list) {\n            dlist.innerHTML += '<option value=\"' + x + '\">'\n        }\n\n        elem.value = initial;\n        elem.onchange = () => {\n            onchange(elem);\n        };\n\n        return $(elem);\n    }\n\n    static createComboboxInput(id, onchange, known_list, initial) {\n        const elem = document.createElement('div');\n        const inputelem = document.createElement('input');\n        inputelem.type = \"list\";\n        inputelem.id = id;\n        inputelem.onfocus = () => {\n            // Clear (this will make it act more like a select)\n            const oldvalue = inputelem.value;\n            inputelem.onblur = () => {\n                inputelem.value = oldvalue;\n            }\n            inputelem.value = \"\";\n\n        }\n        const dlist = document.createElement(\"datalist\");\n        dlist.id = id + \"-dlist\";\n        elem.appendChild(dlist);\n\n        $(inputelem).attr(\"list\", id + \"-dlist\");\n        dlist.innerHTML = \"\";\n        for (const x of known_list) {\n            dlist.innerHTML += '<option value=\"' + x + '\">'\n        }\n\n        inputelem.value = initial;\n        inputelem.onchange = () => {\n            inputelem.onblur = null;\n            onchange(inputelem);\n        };\n\n        elem.appendChild(inputelem);\n\n        return $(elem);\n    }\n\n    static createCodeReference(id, onclick, obj) {\n        const elem = document.createElement('span');\n        elem.id = id;\n        elem.addEventListener('click', x => {\n            onclick(x);\n        });\n        elem.classList.add(\"code_ref\");\n\n        if (obj == null || obj.filename == null) {\n            elem.innerText = \"N/A\";\n            elem.title = \"The DebugInfo for this element is not defined\";\n        }\n        else {\n            const split = obj.filename.split(\"/\");\n            const fname = split[split.length - 1];\n\n            elem.innerText = fname + \":\" + obj.start_line;\n            elem.title = obj.filename;\n        }\n\n        return $(elem);\n    }\n\n    static createLabel(id, labeltext, tooltip) {\n        const elem = document.createElement(\"span\");\n        elem.id = id;\n        elem.innerHTML = labeltext;\n        elem.title = tooltip;\n        elem.classList = \"title\";\n\n        return $(elem);\n    }\n\n    static createToggleSwitch(id, onchange, initial = false) {\n        const legacy = false;\n        const elem = document.createElement(\"input\");\n        elem.onchange = () => {\n            onchange(elem);\n        }\n        elem.type = \"checkbox\";\n        elem.id = id;\n        elem.checked = initial;\n\n\n        if (!legacy) {\n            // Add CSS \"toggle-slider\" elements\n            // This requires more HTML.\n            const styled_elem = document.createElement(\"label\");\n            styled_elem.classList = \"switch\";\n            $(styled_elem).append(elem);\n            $(styled_elem).append($('<span class=\"slider round\"></span>'));\n            return $(styled_elem);\n        }\n\n        return $(elem);\n    }\n\n\n    static createTextInput(id, onchange, initial = '') {\n        const elem = document.createElement(\"input\");\n        // oninput triggers on every change (as opposed to onchange, which only changes on deselection)\n        elem.onchange = () => {\n            onchange(elem);\n        }\n        elem.type = \"text\";\n        elem.id = id;\n        elem.value = initial\n        return $(elem);\n    }\n\n    static createLongTextInput(id, onchange, initial = '') {\n        const elem = document.createElement(\"textarea\");\n        // oninput triggers on every change (as opposed to onchange, which only changes on deselection)\n        elem.onchange = () => {\n            onchange(elem.innerHTML);\n        }\n        elem.id = id;\n        elem.innerHTML = initial\n        return $(elem);\n    }\n\n    static createSelectInput(id, onchange, options, initial = '') {\n        const elem = document.createElement(\"select\");\n\n        for (const option of options) {\n            const option_elem = document.createElement('option');\n            option_elem.innerText = option;\n            elem.append(option_elem);\n        }\n\n        // oninput triggers on every change (as opposed to onchange, which only changes on deselection)\n        elem.oninput = () => {\n            onchange(elem);\n        }\n        elem.id = id;\n        elem.value = initial;\n        return $(elem);\n    }\n\n    static createIntInput(id, onchange, initial = 0) {\n        const elem = document.createElement(\"input\");\n        elem.oninput = () => {\n            onchange(elem);\n        }\n        elem.type = \"number\";\n        elem.step = 1;\n        elem.id = id;\n        elem.value = initial;\n        return $(elem);\n    }\n\n\n    static createFloatInput(id, onchange) {\n        const elem = document.createElement(\"input\");\n        elem.oninput = () => {\n            onchange(elem);\n        }\n        elem.type = \"number\";\n        elem.id = id;\n        return $(elem);\n    }\n\n    static createButton(id, onclick, label) {\n        const elem = document.createElement(\"button\");\n        elem.onclick = () => {\n            onclick(elem);\n        };\n        elem.innerHTML = label;\n        return $(elem);\n    }\n}\n\nfunction start_DIODE() {\n    const diode = new DIODE();\n    window.diode = diode;\n    diode.initEnums();\n    diode.pubSSH(true);\n\n    $(\"#toolbar\").w2toolbar({\n        name: \"toolbar\",\n        items: [\n            {\n                type: 'menu', id: 'file-menu', caption: 'File', icon: 'material-icons-outlined gmat-folder', items: [\n                    { text: 'Start', icon: 'material-icons-outlined gmat-new_folder', id: 'start' },\n                    { text: 'Open', icon: 'material-icons-outlined gmat-open', id: 'open-file' },\n                    { text: 'Save', icon: 'material-icons-outlined gmat-save', id: 'save' },\n                ]\n            },\n            { type: 'break', id: 'break0' },\n            {\n                type: 'menu', id: 'settings-menu', caption: 'Settings', icon: 'material-icons-outlined gmat-settings', items: [\n                    { text: 'DACE settings', icon: 'material-icons-outlined gmat-settings-cloud', id: 'diode-settings' },\n                    { text: 'DIODE settings', icon: 'material-icons-outlined gmat-settings-application', id: 'diode-settings' },\n                    { text: 'Run Configurations', icon: 'material-icons-outlined gmat-playlist_play', id: 'runoptions' },\n                    { text: 'Runqueue', icon: 'material-icons-outlined gmat-view_list', id: 'runqueue' },\n                    { text: 'Perfdata', id: 'perfdata' },\n                    { text: 'Perftimes', id: 'perftimes' },\n                ]\n            },\n            {\n                type: 'menu', icon: 'material-icons-outlined gmat-build', id: 'compile-menu', caption: 'Compile', items: [\n                    { text: 'Compile', id: 'compile', icon: 'material-icons-outlined gmat-gavel' },\n                    { text: 'Run', id: 'run', icon: 'material-icons-outlined gmat-play' },\n                    { text: 'Discard changes and compile source', id: 'compile-clean', icon: 'material-icons-outlined gmat-clear' },\n                ]\n            },\n            {\n                type: 'menu-radio', id: 'runconfig', text: function (item) {\n                    const t = (typeof (item.selected) == 'string') ? item.selected : item.selected(); const el = this.get('runconfig:' + t); return \"Config: \" + ((el == null) ? diode.getCurrentRunConfigName() : el.text);\n                }, selected: function (item) {\n                    return diode.getCurrentRunConfigName();\n                }, items: [{\n                    id: 'default', text: \"default\"\n                }\n                ]\n            },\n            {\n                type: 'menu', id: 'transformation-menu', caption: 'Transformations', items: [\n                    { text: 'History', id: 'history' },\n                    { text: 'Available Transformations', id: 'available' },\n\n                ]\n            },\n            {\n                type: 'menu', id: 'group-menu', caption: 'Group', icon: 'material-icons-outlined gmat-apps', items: [\n                    //{ text: 'Group by SDFGs', id: 'group-sdfgs' }, \n                    { text: 'Group default', id: 'group-diode1' }\n                ]\n            },\n            { type: 'menu', id: 'closed-windows', caption: 'Closed windows', icon: 'material-icons-outlined gmat-reopen', items: [] },\n        ],\n        onClick: function (event) {\n            if (event.target === 'file-menu:open-file') {\n                diode.openUploader(\"code-python\");\n            }\n            if (event.target === 'file-menu:start') {\n                // Close all windows before opening Start component\n                diode.closeAll();\n\n                const config = {\n                    type: 'component',\n                    componentName: 'StartPageComponent',\n                    componentState: {}\n                };\n\n                diode.addContentItem(config);\n            }\n            if (event.target === 'file-menu:save') {\n                diode.project().save();\n            }\n            if (event.target == \"settings-menu:diode-settings\") {\n                diode.open_diode_settings();\n            }\n            if (event.target == \"settings-menu:runqueue\") {\n                diode.open_runqueue();\n            }\n            if (event.target == \"settings-menu:perfdata\") {\n                //diode.load_perfdata();\n                diode.show_inst_options();\n            }\n            if (event.target == \"settings-menu:perftimes\") {\n                diode.show_exec_times();\n            }\n            if (event.target == \"group-menu:group-sdfgs\") {\n                diode.groupOptGraph(); diode.groupSDFGsAndCodeOutsTogether();\n            }\n            if (event.target == \"group-menu:group-diode1\") {\n                diode.groupLikeDIODE1();\n            }\n            if (event.target == \"runconfig\") {\n                const m = this.get(event.target);\n\n                const configs = diode.getRunConfigs();\n\n                m.items = [];\n\n                for (const c of configs) {\n                    const cname = c['Configuration name'];\n                    m.items.push({ id: cname, text: cname });\n                }\n            }\n            if (event.target.startsWith(\"runconfig:\")) {\n                const name = event.target.substr(\"runconfig:\".length);\n                diode.setCurrentRunConfig(name);\n            }\n            if (event.target == \"transformation-menu:history\") {\n                diode.addContentItem({\n                    type: 'component',\n                    componentName: 'TransformationHistoryComponent',\n                    title: \"Transformation History\",\n                    componentState: {}\n                });\n            }\n            if (event.target == \"transformation-menu:available\") {\n                diode.addContentItem({\n                    type: 'component',\n                    componentName: 'AvailableTransformationsComponent',\n                    componentState: {}\n                });\n            }\n            if (event.target == \"compile-menu:compile\") {\n                // \"Normal\" recompilation\n                diode.gatherProjectElementsAndCompile(diode, {}, {\n                    sdfg_over_code: true\n                });\n            }\n            if (event.target == \"compile-menu:compile-clean\") {\n                diode.project().request([\"clear-errors\"], () => { });\n                diode.project().discardTransformationsAfter(0);\n                // Compile, disregarding everything but the input code\n                diode.project().request(['input_code'], msg => {\n                    diode.compile(diode, msg['input_code']);\n                }, {\n                    timeout: 300,\n                    on_timeout: () => alert(\"No input code found, open a new file\")\n                });\n            }\n            if (event.target == \"settings-menu:runoptions\") {\n                diode.show_run_options(diode);\n            }\n            if (event.target == \"compile-menu:run\") {\n                // Running\n\n                diode.ui_compile_and_run(diode);\n            }\n            if (event.target == \"closed-windows\") {\n                const m = this.get(event.target);\n\n                // Clear the items first (they will be re-read from the project)\n                m.items = [];\n\n                // Add a \"clear all\"\n                m.items.push({ text: \"Clear all\", id: 'clear-closed-windows', icon: 'material-icons-outlined gmat-clear' });\n\n                const elems = diode.project().getClosedWindowsList();\n                for (const x of elems) {\n                    const name = x[0];\n\n                    m.items.push({ text: name, id: 'open-closed-' + x[1].created });\n                }\n\n                this.refresh();\n\n            }\n            if (event.target == 'closed-windows:clear-closed-windows') {\n                diode.project().clearClosedWindowsList();\n            }\n            if (event.target.startsWith(\"closed-windows:open-closed-\")) {\n                // This is a request to re-open a closed window\n                let name = event.target;\n                name = name.substr(\"closed-windows:open-closed-\".length);\n\n                diode.project().reopenClosedWindow(name);\n\n            }\n        }\n    });\n\n\n    const goldenlayout_config = {\n        content: [{\n            type: 'row',\n            content: [{\n                type: 'component',\n                componentName: 'StartPageComponent',\n                componentState: {}\n            }]\n        }]\n    };\n\n    const saved_config = sessionStorage.getItem('savedState');\n    //saved_config = null; // Don't save the config during development\n    let goldenlayout = null;\n    if (saved_config !== null) {\n        goldenlayout = new GoldenLayout(JSON.parse(saved_config), $('#diode_gl_container'));\n    }\n    else {\n        goldenlayout = new GoldenLayout(goldenlayout_config, $('#diode_gl_container'));\n    }\n\n    goldenlayout.on('stateChanged', diode.debounce(\"stateChanged\", () => {\n        if (!(goldenlayout.isInitialised && goldenlayout.openPopouts.every(popout => popout.isInitialised))) {\n            return;\n        }\n        // Don't serialize SubWindows\n        if (goldenlayout.isSubWindow)\n            return;\n        const tmp = goldenlayout.toConfig();\n        //find_object_cycles(tmp);\n        const state = JSON.stringify(tmp);\n        sessionStorage.setItem('savedState', state);\n    }, 500));\n\n    if (!goldenlayout.isSubWindow) {\n        goldenlayout.eventHub.on('create-window-in-main', x => {\n            const config = JSON.parse(x);\n\n            diode.addContentItem(config);\n        });\n    }\n\n    goldenlayout.registerComponent('testComponent', (container, componentState) => {\n        container.getElement().html('<h2>' + componentState.label + '</h2>');\n    });\n    goldenlayout.registerComponent('SettingsComponent', (container, componentState) => {\n        // Wrap the component in a context \n        const diode_context = new DIODE_Context_Settings(diode, container, componentState);\n        $(container.getElement()).load(\"settings_view.html\", () => {\n            diode_context.get_settings();\n        });\n\n    });\n    goldenlayout.registerComponent('PerfTimesComponent', (container, componentState) => {\n        // Wrap the component in a context \n        const diode_context = new DIODE_Context_PerfTimes(diode, container, componentState);\n        diode_context.setupEvents(diode.getCurrentProject());\n        diode_context.create();\n    });\n    goldenlayout.registerComponent('InstControlComponent', (container, componentState) => {\n        // Wrap the component in a context \n        const diode_context = new DIODE_Context_InstrumentationControl(diode, container, componentState);\n        diode_context.setupEvents(diode.getCurrentProject());\n        diode_context.create();\n    });\n    goldenlayout.registerComponent('RooflineComponent', (container, componentState) => {\n        // Wrap the component in a context \n        const diode_context = new DIODE_Context_Roofline(diode, container, componentState);\n        diode_context.setupEvents(diode.getCurrentProject());\n        diode_context.create();\n    });\n    goldenlayout.registerComponent('SDFGComponent', (container, componentState) => {\n        // Wrap the component in a context \n        const diode_context = new DIODE_Context_SDFG(diode, container, componentState);\n\n        diode_context.create_renderer_pane(componentState[\"sdfg_data\"]);\n        diode_context.setupEvents(diode.getCurrentProject());\n    });\n    goldenlayout.registerComponent('TransformationHistoryComponent', (container, componentState) => {\n        // Wrap the component in a context \n        const diode_context = new DIODE_Context_TransformationHistory(diode, container, componentState);\n        diode_context.setupEvents(diode.getCurrentProject());\n        const hist = diode_context.project().getTransformationHistory();\n        diode_context.create(hist);\n\n    });\n    goldenlayout.registerComponent('AvailableTransformationsComponent', (container, componentState) => {\n        // Wrap the component in a context \n        const diode_context = new DIODE_Context_AvailableTransformations(diode, container, componentState);\n        diode_context.setupEvents(diode.getCurrentProject());\n        diode_context.create();\n\n    });\n    goldenlayout.registerComponent('CodeInComponent', (container, componentState) => {\n        // Wrap the component in a context \n        const diode_context = new DIODE_Context_CodeIn(diode, container, componentState);\n        const editorstring = \"code_in_\" + diode_context.created;\n        const parent_element = $(container.getElement());\n        const new_element = $(\"<div id='\" + editorstring + \"' style='height: 100%; width: 100%; overflow-y:auto'></div>\");\n\n\n        parent_element.append(new_element);\n        parent_element.hide().show(0);\n\n        (function () {\n            const editor_div = new_element;\n            editor_div.attr(\"id\", editorstring);\n            editor_div.text(componentState.code_content);\n            editor_div.hide().show(0);\n            const editor = ace.edit(new_element[0]);\n            editor.setTheme(DIODE.themeString());\n            editor.session.setMode(\"ace/mode/python\");\n            editor.getSession().on('change', () => {\n                container.extendState({ \"code_content\": editor.getValue() });\n            });\n\n            setup_drag_n_drop(new_element[0], (mime, content) => {\n                // #TODO: Set session mode from mime type - but we need a switch to manually do that first\n                console.log(\"File dropped\", mime, content);\n\n                editor.setValue(content);\n                editor.clearSelection();\n            });\n\n            editor.resize();\n\n            editor.commands.addCommand({\n                name: 'Compile',\n                bindKey: { win: 'Ctrl-P', mac: 'Command-P' },\n                exec: function (editor) {\n                    alert(\"Compile pressed\");\n                    diode_context.compile(editor.getValue());\n                },\n                readOnly: true // false if this command should not apply in readOnly mode\n            });\n            editor.commands.addCommand({\n                name: 'Compile and Run',\n                bindKey: { win: 'Alt-R', mac: 'Alt-R' },\n                exec: function (editor) {\n                    alert(\"Compile & Run pressed\");\n                    diode_context.compile_and_run(editor.getValue());\n                },\n                readOnly: true // false if this command should not apply in readOnly mode\n            });\n            diode_context.setEditorReference(editor);\n            diode_context.setupEvents(diode.getCurrentProject());\n        })\n            ()\n            ;\n\n\n    });\n\n    goldenlayout.registerComponent('CodeOutComponent', (container, componentState) => {\n        // Wrap the component in a context \n        const diode_context = new DIODE_Context_CodeOut(diode, container, componentState);\n        const editorstring = \"code_out_\" + diode_context.created;\n        const parent_element = $(container.getElement());\n        const new_element = $(\"<div id='\" + editorstring + \"' style='height: 100%; width: 100%; overflow:auto'></div>\");\n\n\n        parent_element.append(new_element);\n        parent_element.hide().show(0);\n\n        (() => {\n            const editor_div = new_element;\n            editor_div.attr(\"id\", editorstring);\n            editor_div.hide().show(0);\n            const editor = ace.edit(new_element[0]);\n            editor.setTheme(DIODE.themeString());\n            editor.session.setMode(\"ace/mode/c_cpp\");\n            editor.setReadOnly(true);\n\n\n            diode_context.setEditorReference(editor);\n            diode_context.setupEvents(diode.getCurrentProject());\n\n            const extracted = diode_context.getState().code;\n            diode_context.setCode(extracted);\n            editor.resize();\n        })\n            ()\n            ;\n\n\n    });\n\n    // Create an error component which is used for all errors originating in python.\n    // As such, the errors are usually tracebacks. The current implementation\n    // (just displaying the output) is rudimentary and can/should be improved.\n    // #TODO: Improve the error-out formatting\n    goldenlayout.registerComponent('ErrorComponent', (container, componentState) => {\n        // Wrap the component in a context \n        const diode_context = new DIODE_Context_Error(diode, container, componentState);\n        const editorstring = \"error_\" + diode_context.created;\n        const parent_element = $(container.getElement());\n        const new_element = $(\"<div id='\" + editorstring + \"' style='height: 100%; width: 100%; overflow:auto'></div>\");\n\n\n        parent_element.append(new_element);\n        parent_element.hide().show(0);\n\n        (() => {\n            const editor_div = new_element;\n            editor_div.attr(\"id\", editorstring);\n            editor_div.hide().show(0);\n            const editor = ace.edit(new_element[0]);\n            editor.setTheme(DIODE.themeString());\n            editor.session.setMode(\"ace/mode/python\");\n\n\n            diode_context.setEditorReference(editor);\n            diode_context.setupEvents(diode.getCurrentProject());\n\n            const extracted = diode_context.getState().error;\n            diode_context.setError(extracted);\n            editor.resize();\n        })\n            ()\n            ;\n\n\n    });\n\n    goldenlayout.registerComponent('TerminalComponent', (container, componentState) => {\n        // Wrap the component in a context \n        const diode_context = new DIODE_Context_Terminal(diode, container, componentState);\n        const editorstring = \"terminal_\" + diode_context.created;\n        const parent_element = $(container.getElement());\n        const new_element = $(\"<div id='\" + editorstring + \"' style='height: 100%; width: 100%; overflow:auto'></div>\");\n\n        parent_element.append(new_element);\n        parent_element.hide().show(0);\n\n\n        const editor_div = new_element;\n        editor_div.hide().show(0);\n        const editor = ace.edit(new_element[0]);\n        editor.setTheme(DIODE.themeString());\n        editor.session.setMode(\"ace/mode/sh\");\n        editor.setReadOnly(true);\n\n        const firstval = diode_context.getState().current_value;\n        if (firstval !== undefined)\n            editor.setValue(firstval);\n        editor.clearSelection();\n\n        diode_context.setEditorReference(editor);\n\n        console.log(\"Client listening to\", editorstring);\n\n        goldenlayout.eventHub.on(editorstring, (e) => {\n            diode_context.append(e);\n        });\n\n        diode_context.setupEvents(diode.getCurrentProject());\n    });\n\n    goldenlayout.registerComponent('DIODESettingsComponent', (container, componentState) => {\n        const diode_context = new DIODE_Context_DIODESettings(diode, container, componentState);\n        const divstring = \"diode_settings\" + diode_context.created;\n        const parent_element = $(container.getElement());\n        const new_element = $(\"<div id='\" + divstring + \"' style='height: 100%; width: 100%; overflow:auto'></div>\");\n\n        new_element.append(\"<h1>DIODE settings</h1>\");\n        diode_context.setContainer(new_element);\n        parent_element.append(new_element);\n\n    });\n\n    goldenlayout.registerComponent('RunConfigComponent', (container, componentState) => {\n        const diode_context = new DIODE_Context_RunConfig(diode, container, componentState);\n\n        diode_context.setupEvents(diode.getCurrentProject());\n        diode_context.create();\n    });\n\n    goldenlayout.registerComponent('PropWinComponent', (container, componentState) => {\n        // Wrap the component in a context \n        const diode_context = new DIODE_Context_PropWindow(diode, container, componentState);\n\n        const elem = document.createElement('div');\n        elem.classList.add(\"sdfgpropdiv\");\n        elem.style = \"width: 100%; height: 100%\";\n        $(container.getElement()).append(elem);\n\n        diode_context.setupEvents(diode.getCurrentProject());\n        diode_context.createFromState();\n    });\n\n    goldenlayout.registerComponent('StartPageComponent', (container, componentState) => {\n        const diode_context = new DIODE_Context_StartPage(diode, container, componentState);\n\n\n\n        diode_context.setupEvents(diode.getCurrentProject());\n        diode_context.create();\n    });\n\n    goldenlayout.registerComponent('RunqueueComponent', (container, componentState) => {\n        // Wrap the component in a context \n        const diode_context = new DIODE_Context_Runqueue(diode, container, componentState);\n\n\n        diode_context.setupEvents(diode.getCurrentProject());\n        diode_context.create();\n    });\n\n    goldenlayout.on('itemDestroyed', e => {\n        if (e.config.componentState === undefined) {\n            // Skip non-components\n            return;\n        }\n        const x = e.config.componentState.created;\n        goldenlayout.eventHub.emit('destroy-' + x);\n        console.log(\"itemDestroyed\", e);\n    });\n\n    diode.setLayout(goldenlayout);\n    diode.getProject();\n\n\n    goldenlayout.init();\n\n    window.addEventListener('resize', x => {\n        // goldenlayout does not listen to resize events if it is not full-body\n        // So it must be notified manually\n        goldenlayout.updateSize();\n    });\n\n\n    document.body.addEventListener('keydown', (ev) => {\n        diode.onKeyDown(ev);\n    });\n    document.body.addEventListener('keyup', (ev) => {\n        diode.onKeyUp(ev);\n    });\n    diode.addKeyShortcut('gg', () => { diode.groupOptGraph(); diode.groupSDFGsAndCodeOutsTogether(); });\n    diode.addKeyShortcut('gd', () => { diode.groupLikeDIODE1(); });\n    diode.addKeyShortcut('0', () => {\n        diode.open_diode_settings();\n    });\n    diode.addKeyShortcut('r', () => { diode.gatherProjectElementsAndCompile(diode, {}, { sdfg_over_code: true }); });\n    diode.addKeyShortcut('s', () => { diode.project().save(); }, false, true);\n\n    diode.setupEvents();\n\n    // Add drag & drop for the empty goldenlayout container\n    const dgc = $(\"#diode_gl_container\");\n    const glc = dgc[0].firstChild;\n    setup_drag_n_drop(glc, (mime, content) => {\n        console.log(\"File dropped\", mime, content);\n\n        const config = {\n            type: \"component\",\n            componentName: \"CodeInComponent\",\n            componentState: {\n                code_content: content\n            }\n        };\n\n        diode.addContentItem(config);\n    }, undefined, {\n        readMode: \"text\",\n        condition: (elem) => elem.childNodes.length == 0 // Only if empty\n    });\n}\n","// Copyright 2019-2021 ETH Zurich and the DaCe authors. All rights reserved.\n\n// Recursively parse SDFG, including nested SDFG nodes\nexport function parse_sdfg(sdfg_json: string): unknown {\n    return JSON.parse(sdfg_json, reviver);\n}\n\nexport function stringify_sdfg(sdfg: unknown): string {\n    return JSON.stringify(sdfg, (name, val) => replacer(name, val, sdfg));\n}\n\nfunction reviver(name: string, val: unknown) {\n    if (name == 'sdfg' && val && typeof val === 'string' && val[0] === '{') {\n        return JSON.parse(val, reviver);\n    }\n    return val;\n}\n\nfunction isDict(v: unknown): v is Record<string, unknown> {\n    return typeof v === 'object' && v !== null && !(v instanceof Array) && !(v instanceof Date);\n}\n\nfunction replacer(name: string, val: unknown, orig_sdfg: unknown): unknown {\n    if (val && isDict(val) && val !== orig_sdfg && 'type' in val && val.type === 'SDFG') {\n        return JSON.stringify(val, (n, v) => replacer(n, v, val));\n    }\n    return val;\n}\n","// Copyright 2019-2020 ETH Zurich and the DaCe authors. All rights reserved.\n\nexport class SDFG_Parser {\n    constructor(sdfg) {\n        this._sdfg = sdfg;\n    }\n\n    getStates() {\n\n        return this._sdfg.nodes.map(x => new SDFG_State_Parser(x));\n    }\n\n    static lookup_symbols(sdfg, state_id, elem, symbols_to_resolve, depth = 0) {\n        // Resolve used symbols by following connectors in reverse order\n        const state = sdfg.nodes[state_id];\n\n        let syms = [];\n\n        if (elem.constructor == Object) {\n            // Memlet\n            const memlets = state.edges.filter(x => x.dst == elem.dst && x.src == elem.src);\n\n            // Recurse into parent (since this a multigraph, all edges need to be looked at)\n            for (const m of memlets) {\n\n                // Find symbols used (may be Indices or Range)\n                const mdata = m.attributes.data.attributes.subset;\n                // Check for indices\n                if (mdata.type == \"subsets.Indices\") {\n                    // These are constants or variables\n                    // Reverse to have smallest unit first\n                    const tmp = mdata.indices.map(x => x).reverse();\n                    for (const x of tmp) {\n                        // Add the used variables as null and hope that they will be resolved\n                        depth += 1;\n                        syms.push({ var: x, val: null, depth: depth });\n                    }\n                }\n                else if (mdata.type == \"subsets.Range\") {\n                    // These are ranges\n\n                    // These ranges are not of interest, as they specify what is copied and don't define new variables \n                }\n\n                // Find parent nodes\n                const parent = sdfg.nodes[state_id].nodes[m.src];\n                const tmp = SDFG_Parser.lookup_symbols(sdfg, state_id, m.src, symbols_to_resolve, depth + 1);\n                syms = [...syms, ...tmp];\n            }\n        }\n        else {\n            // Node\n            const node = state.nodes[elem];\n\n            // Maps (and Consumes) define ranges, extract symbols from there\n            try {\n                const rngs = node.attributes.range.ranges.map(x => x); // The iterator ranges\n                const params = node.attributes.params.map(x => x); // The iterators\n\n                console.assert(rngs.length == params.length, \"Ranges and params should have the same count of elements\");\n\n                // Reverse from big -> little to little -> big (or outer -> inner to inner -> outer)\n                rngs.reverse();\n                params.reverse();\n\n                for (let i = 0; i < rngs.length; ++i) {\n                    // Check first if the variable is already defined, and if yes, if the value is the same\n                    const fltrd = syms.filter(x => x.var == params[i]);\n                    if (fltrd.length == 0) {\n                        depth += 1;\n                        syms.push({ var: params[i], val: rngs[i], depth: depth });\n                    }\n                    else {\n                        if (JSON.stringify(fltrd[0].val) != JSON.stringify(rngs[i])) {\n                            console.warn(\"Colliding definitions for var \" + params[i], fltrd[0].val, rngs[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) {\n                // Not a node defining ranges (every node except maps / consumes)\n            }\n            // Find all incoming edges\n            const inc_edges = state.edges.filter(x => x.dst == elem);\n            for (const e of inc_edges) {\n                const tmp = SDFG_Parser.lookup_symbols(sdfg, state_id, e, symbols_to_resolve, depth + 1);\n                syms = [...syms, ...tmp];\n            }\n        }\n\n        return syms;\n    }\n}\n\nexport class SDFG_State_Parser {\n    constructor(sdfg_state) {\n        this._sdfg_state = sdfg_state;\n    }\n\n    getNodes() {\n        return this._sdfg_state.nodes.map(x => new SDFG_Node_Parser(x));\n    }\n}\n\nexport class SDFG_Node_Parser {\n    constructor(node) {\n        this._node = node;\n    }\n\n    isNodeType(node_type) {\n        return this._node.attributes.type === node_type;\n    }\n}\n\nexport class SDFG_PropUtil {\n    static getMetaFor(obj, attr_name) {\n        return obj.attributes['_meta_' + attr_name];\n    }\n\n    static getAttributeNames(obj) {\n        const keys = Object.keys(obj.attributes);\n        const list = keys.filter(x => keys.includes('_meta_' + x));\n        return list;\n    }\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var inProgress = {};\nvar dataWebpackPrefix = \"diode-webclient:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdiode_webclient\"] = self[\"webpackChunkdiode_webclient\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(8821);\n"],"sourceRoot":""}